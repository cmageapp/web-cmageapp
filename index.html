<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
	<meta name="description" content="Calculadora profesional de RMG (Radio Medio Geométrico) y DMG (Distancia Media Geométrica) para Ingeniería Eléctrica. Herramienta para cálculo de Líneas de Transmisión. CMAG eApp por Ingenieros de FIUNA.">
    <meta name="keywords" content="RMG, DMG, Calculadora RMG, Calculadora DMG, GMR Calculator, GMD Calculator, Ingeniería Eléctrica, Líneas de Transmisión, Inductancia, Capacitancia, CMAG, eApp, CMAG eApp, FIUNA, Paraguay">
    <meta name="author" content="CMAG Ingeniería">
    <meta name="robots" content="index, follow">
	
	<meta name="google-site-verification" content="y7c6qr9UkZByu2vtQZtkgOe0_ngdfp-e6sYRYnUEuHM" />

    <meta property="og:title" content="CMAG eApp | Calculadora RMG y DMG">
    <meta property="og:description" content="Calcula parámetros de líneas de transmisión (RMG y DMG) al instante. Versión Web Demo y App Android.">
    <meta property="og:image" content="https://www.cmageapp.com/icono.png"> <meta property="og:url" content="https://www.cmageapp.com">
    <meta property="og:type" content="website">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="color-scheme" content="light only">
    <title>PLT Suite</title>
    <link rel="stylesheet" href="libs/katex.min.css">
    <script src="libs/katex.min.js"></script>
    <link rel="stylesheet" href="style.css">
	
</head>
<body>

<header>
    <h1 id="header-title">Cálculo L-C</h1>
</header>

<!-- Cortina de teoria y uso en los headers -->
<div id="theory-curtain" class="curtain-panel">

    <div class="curtain-handle-area" onclick="Curtain.close()">
        <div style="width: 40px; height: 5px; background: rgba(255,255,255,0.3); border-radius: 10px; margin: 10px auto;"></div>
    </div>

    <div class="curtain-content">

        <div id="content-lc" class="theory-section">

                <div class="t-section-title" style="color:#fff; border-color:#555;">FUNDAMENTOS FÍSICOS</div>

                <p style="color:#ccc; font-size:0.8rem; margin-bottom:15px; line-height:1.5;">
                    Los parámetros de línea no son componentes físicos (resistor/bobina), sino efectos distribuidos de los campos electromagnéticos.
                </p>

                <div style="background: radial-gradient(circle at center, rgba(255,255,255,0.05) 0%, rgba(0,0,0,0) 70%); border: 1px solid #333; border-radius: 8px; padding: 15px; margin-bottom: 15px; text-align: center;">

                    <svg viewBox="0 0 360 200" width="100%" height="auto" style="font-family: sans-serif; overflow: visible;">
                        <defs>
                            <marker id="arrowMag" markerWidth="6" markerHeight="6" refX="3" refY="3" orient="auto">
                                <path d="M0,0 L0,6 L6,3 z" fill="#ffcc00" />
                            </marker>
                            <marker id="arrowElec" markerWidth="6" markerHeight="6" refX="3" refY="3" orient="auto">
                                <path d="M0,0 L0,6 L6,3 z" fill="#4da6ff" />
                            </marker>
                        </defs>

                        <circle cx="100" cy="100" r="12" fill="#333" stroke="#fff" stroke-width="2"/>
                        <text x="100" y="105" text-anchor="middle" fill="#fff" font-size="14" font-weight="bold">+</text>

                        <circle cx="260" cy="100" r="12" fill="#333" stroke="#fff" stroke-width="2"/>
                        <text x="260" y="104" text-anchor="middle" fill="#fff" font-size="18" font-weight="bold">-</text>

                        <circle cx="100" cy="100" r="35" fill="none" stroke="#ffcc00" stroke-width="1.5" opacity="0.6" />
                        <circle cx="100" cy="100" r="60" fill="none" stroke="#ffcc00" stroke-width="1.5" opacity="0.4" />
                        <path d="M 100 65 L 105 65" stroke="none" marker-end="url(#arrowMag)" /> <circle cx="260" cy="100" r="35" fill="none" stroke="#ffcc00" stroke-width="1.5" opacity="0.6" />
                        <circle cx="260" cy="100" r="60" fill="none" stroke="#ffcc00" stroke-width="1.5" opacity="0.4" />

                        <path d="M 100 88 Q 180 20 260 88" fill="none" stroke="#4da6ff" stroke-width="1.5" opacity="0.8" marker-mid="url(#arrowElec)"/>
                        <path d="M 100 88 Q 180 -40 260 88" fill="none" stroke="#4da6ff" stroke-width="1.5" opacity="0.5" stroke-dasharray="4,2" />

                        <path d="M 100 112 Q 180 180 260 112" fill="none" stroke="#4da6ff" stroke-width="1.5" opacity="0.8" />
                        <path d="M 100 112 Q 180 240 260 112" fill="none" stroke="#4da6ff" stroke-width="1.5" opacity="0.5" stroke-dasharray="4,2" />

                        <text x="40" y="50" fill="#ffcc00" font-size="10" font-weight="bold">MAGNÉTICO (H)</text>
                        <line x1="45" y1="55" x2="70" y2="75" stroke="#ffcc00" stroke-width="1" opacity="0.5" />

                        <text x="180" y="20" text-anchor="middle" fill="#4da6ff" font-size="10" font-weight="bold" style="background:black;">ELÉCTRICO (E)</text>
                    </svg>
                    <div style="font-size:0.7rem; color:#888; margin-top:5px; font-style:italic;">
                        Campos asociados a una línea de dos conductores
                    </div>
                </div>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 10px;">

                    <div style="background: rgba(255, 204, 0, 0.05); border: 1px solid rgba(255, 204, 0, 0.2); border-radius: 6px; padding: 10px;">
                        <div style="color:#ffcc00; font-size:0.75rem; font-weight:bold; margin-bottom:5px; border-bottom:1px dashed #ffcc00; padding-bottom:3px;">
                            IMPEDANCIA SERIE (Z)
                        </div>
                        <div style="font-size:0.7rem; color:#ccc; margin-bottom:4px;">
                            <b style="color:#fff;">R (Resistencia):</b> Por conductividad.
                        </div>
                        <div style="font-size:0.7rem; color:#ccc;">
                            <b style="color:#fff;">L (Inductancia):</b> Por enlaces de flujo magnético.
                        </div>
                    </div>

                    <div style="background: rgba(77, 166, 255, 0.05); border: 1px solid rgba(77, 166, 255, 0.2); border-radius: 6px; padding: 10px;">
                        <div style="color:#4da6ff; font-size:0.75rem; font-weight:bold; margin-bottom:5px; border-bottom:1px dashed #4da6ff; padding-bottom:3px;">
                            ADMITANCIA SHUNT (Y)
                        </div>
                        <div style="font-size:0.7rem; color:#ccc; margin-bottom:4px;">
                            <b style="color:#fff;">G (Conductancia):</b> Corrientes de fuga.
                        </div>
                        <div style="font-size:0.7rem; color:#ccc;">
                            <b style="color:#fff;">C (Capacitancia):</b> Diferencia de potencial entre conductores.
                        </div>
                    </div>

                </div>

            <div class="t-card">
                <div class="t-section-title" style="color:#00e676; border-color:#00e676;">INDUCTANCIA DE UN CONDUCTOR</div>

                <div class="factor-grid">
                    <div class="factor-label" style="color:#00e676;">
                        Inductancia
                        <div style="margin-top:2px;">
                            <span class="math-latex-render" data-expr="L = \lambda / I"></span>
                        </div>
                    </div>
                    <div class="factor-desc">Relación entre el flujo magnético enlazado y la corriente que lo produce.</div>

                    <div class="factor-label" style="color:#00e676;">Flujo Interno</div>
                    <div class="factor-desc">Líneas de campo <b>dentro</b> del conductor. Enlazan solo una fracción de la corriente.</div>

                    <div class="factor-label" style="color:#00e676;">Flujo Externo</div>
                    <div class="factor-desc">Líneas <b>fuera</b> del conductor. Enlazan el 100% de la corriente.</div>
                </div>

                <div class="interactive-formula" onclick="toggleDerivation('deriv-flux')" style="margin-top:15px; border-color:#4da6ff;">

                    <div class="if-header" style="justify-content:space-between; align-items:center; padding: 10px 15px;">
                        <div style="display:flex; flex-direction:column;">
                            <span style="color:#4da6ff; font-size:0.75rem; font-weight:bold; letter-spacing:1px;">INTERNA</span>
                            <div class="math-latex-render" data-expr="L_{int} = \frac{1}{2} \times 10^{-7} \quad \text{ H/m}"></div>
                        </div>
                        <span class="if-icon" style="color:#4da6ff; font-size: 1.2rem;">▼</span>
                    </div>

                    <div id="deriv-flux" class="if-content">

                        <p style="color:#ccc; font-size:0.85rem; margin-bottom:15px; border-bottom:1px solid #333; padding-bottom:10px; line-height: 1.5;">
                            Análisis de un conductor sólido de radio <span style="font-family:'Times New Roman'; font-style:italic; color:#fff;">r</span> llevando corriente <span style="font-family:'Times New Roman'; font-style:italic; color:#fff;">I</span>.

                            <svg viewBox="0 0 400 220" width="100%" height="auto" xmlns="http://www.w3.org/2000/svg" style="font-family: 'Times New Roman', serif; background-color: #000000;">
                                <defs>
                                    <linearGradient id="cylinderBodyGrad" x1="0%" y1="0%" x2="100%" y2="10%" gradientUnits="userSpaceOnUse">
                                        <stop offset="0%" style="stop-color:#1a1a1a;stop-opacity:1" />
                                        <stop offset="40%" style="stop-color:#333333;stop-opacity:1" />
                                        <stop offset="60%" style="stop-color:#555555;stop-opacity:1" />
                                        <stop offset="100%" style="stop-color:#1a1a1a;stop-opacity:1" />
                                    </linearGradient>

                                    <radialGradient id="frontFaceGrad" cx="50%" cy="50%" r="50%" fx="50%" fy="50%">
                                        <stop offset="0%" style="stop-color:#ffffff;stop-opacity:1" />
                                        <stop offset="90%" style="stop-color:#777777;stop-opacity:1" />
                                        <stop offset="100%" style="stop-color:#555555;stop-opacity:1" />
                                    </radialGradient>

                                    <marker id="arrowEndCyan" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                                        <polygon points="0 0, 10 3.5, 0 7" fill="#00FFFF" />
                                    </marker>
                                    <marker id="arrowEndWhite" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                                        <polygon points="0 0, 10 3.5, 0 7" fill="#FFFFFF" />
                                    </marker>
                                    <marker id="arrowStartWhite" markerWidth="10" markerHeight="7" refX="1" refY="3.5" orient="auto">
                                        <polygon points="10 0, 0 3.5, 10 7" fill="#FFFFFF" />
                                    </marker>

                                    <pattern id="diagonalHatch" width="5" height="5" patternTransform="rotate(-45 0 0)" patternUnits="userSpaceOnUse">
                                        <line x1="0" y1="0" x2="0" y2="5" style="stroke:#AAAAAA; stroke-width:1.2" />
                                    </pattern>
                                </defs>

                                <line x1="340" y1="85" x2="150" y2="93" stroke="#555555" stroke-width="1" stroke-dasharray="4,4" />

                                <ellipse cx="340" cy="85" rx="10" ry="18" fill="none" stroke="#00FFFF" stroke-width="1" stroke-dasharray="3,3" opacity="0.5"/>

                                <ellipse cx="340" cy="85" rx="18" ry="35" fill="none" stroke="#777777" stroke-width="1" stroke-dasharray="4,2" />
                                <path d="M 80 40 L 340 50 L 340 120 L 80 160 Z" fill="url(#cylinderBodyGrad)" stroke="none" />
                                <line x1="80" y1="40" x2="340" y2="50" stroke="#AAAAAA" stroke-width="1" />
                                <line x1="80" y1="160" x2="340" y2="120" stroke="#AAAAAA" stroke-width="1" />

                                <path d="M 80 100 L 115 100 L 358 85 L 340 85 Z" fill="url(#diagonalHatch)" stroke="none" opacity="0.9" />

                                <line x1="80" y1="78" x2="340" y2="67" stroke="#00FFFF" stroke-width="1" stroke-dasharray="3,3" opacity="0.6"/>
                                <line x1="80" y1="122" x2="340" y2="103" stroke="#00FFFF" stroke-width="1" stroke-dasharray="3,3" opacity="0.6"/>

                                <ellipse cx="80" cy="100" rx="35" ry="60" fill="url(#frontFaceGrad)" stroke="#FFFFFF" stroke-width="1.5" />
                                <ellipse cx="80" cy="100" rx="22" ry="38" fill="none" stroke="#00FFFF" stroke-width="2" stroke-dasharray="5,3" />

                                <line x1="80" y1="100" x2="120" y2="100" stroke="#333333" stroke-width="1" stroke-dasharray="2,2" />

                                <path d="M 102 100 A 22 38 0 0 0 96 72" fill="none" stroke="#00FFFF" stroke-width="2.5" marker-end="url(#arrowEndCyan)" />
                                <text x="108" y="75" font-size="20" font-weight="bold" font-style="italic" fill="#00FFFF">H<tspan dy="5" font-size="14">x</tspan></text>

                                <line x1="80" y1="100" x2="62" y2="75" stroke="#00FFFF" stroke-width="1.5" />
                                <text x="50" y="75" font-size="20" font-weight="bold" font-style="italic" fill="#00FFFF">x</text>

                                <line x1="80" y1="100" x2="105" y2="145" stroke="#FFFFFF" stroke-width="1.5" />
                                <text x="110" y="160" font-size="20" font-weight="bold" font-style="italic" fill="#FFFFFF">r</text>
                                <line x1="280" y1="35" x2="150" y2="25" stroke="#00FFFF" stroke-width="3" marker-end="url(#arrowEndCyan)" />
                                <text x="210" y="20" font-size="24" font-weight="bold" font-style="italic" fill="#00FFFF">I</text>

                                <line x1="80" y1="170" x2="80" y2="200" stroke="#FFFFFF" stroke-width="1" />
                                <line x1="340" y1="130" x2="340" y2="160" stroke="#FFFFFF" stroke-width="1" />
                                <line x1="80" y1="190" x2="340" y2="150" stroke="#FFFFFF" stroke-width="1.5" marker-start="url(#arrowStartWhite)" marker-end="url(#arrowEndWhite)" />

                                <rect x="200" y="158" width="40" height="20" fill="#000000" opacity="0.8" />
                                <text x="220" y="174" font-size="18" text-anchor="middle" fill="#FFFFFF">1 m</text>

                                <text x="200" y="215" font-size="14" text-anchor="middle" fill="#999999" font-family="sans-serif">Campo Magnético interno de un conductor cilíndrico sólido</text>
                            </svg>
                        </p>

                        <div class="model-conditions" style="background: linear-gradient(90deg, rgba(255,255,255,0.03) 0%, rgba(255,255,255,0.0) 100%); border-left: 3px solid #4da6ff; padding: 10px 15px; margin: 15px 0; border-radius: 0 4px 4px 0;">

                            <div style="font-size: 0.75rem; text-transform: uppercase; letter-spacing: 1px; color: #4da6ff; margin-bottom: 8px; font-weight: bold;">
                                Suposiciones:
                            </div>

                            <ul style="margin: 0; padding-left: 20px; color: #ccc; font-size: 0.85rem; line-height: 1.6;">
                                <li>
                                    <b>Conductor Largo:</b> Se desprecian efectos en los extremos.
                                </li>
                                <li>
                                    <b>Corriente Uniforme:</b> Se desprecia el <i>Efecto Piel</i> (Skin Effect).
                                </li>
                                <li style="margin-top: 4px;">
                                    <b>Material No Magnético:</b> Se asume permeabilidad del vacío:
                                    <div style="margin-top: 4px; display: inline-block; background: rgba(0,0,0,0.4); padding: 4px 8px; border-radius: 4px; border: 1px solid #333;">
                                        <span class="math-latex-render" data-expr="\mu = \mu_0 = 4\pi \times 10^{-7} \text{ H/m}" style="color: #4da6ff;"></span>
                                    </div>
                                </li>
                            </ul>
                        </div>

                        <div class="step-row" style="flex-direction: column; align-items: stretch; gap: 5px;">
                            <div style="display:flex; gap:10px; align-items:center;">
                                <div class="step-num" style="background:#4da6ff; color:#fff; border:none;">1</div>
                                <div class="step-desc"><b>Ley de Ampère</b> (Trayectoria circular cerrada):</div>
                            </div>

                            <div style="overflow-x: auto; white-space: nowrap; background: rgba(0,0,0,0.3); border-radius: 6px; padding: 5px; margin-bottom: 5px;">
                                <div class="math-latex-render" data-expr="\oint H_{tan} \cdot dl = I_{encerrada}"></div>
                            </div>

                            <div style="font-size:0.8rem; color:#aaa; margin-left: 10px;">
                                Despejando para la corriente interna:
                            </div>

                            <div style="overflow-x: auto; white-space: nowrap; background: rgba(0,0,0,0.3); border-radius: 6px; padding: 5px;">
                                <div class="math-latex-render" data-expr="I_x = I \left( \frac{x}{r} \right)^2"></div>
                            </div>
                        </div>

                        <div class="step-row" style="flex-direction: column; align-items: stretch; gap: 5px;">
                            <div style="display:flex; gap:10px; align-items:center;">
                                <div class="step-num" style="background:#4da6ff; color:#fff; border:none;">2</div>
                                <div class="step-desc">Intensidad de Campo (<span style="font-family:'Times New Roman'; font-style:italic;">H<sub>x</sub></span>):</div>
                            </div>
                            <div style="overflow-x: auto; white-space: nowrap; background: rgba(0,0,0,0.3); border-radius: 6px; padding: 5px;">
                                <div class="math-latex-render" data-expr="H_x = \frac{I_x}{2\pi x} = \frac{I \cdot x}{2\pi r^2}"></div>
                            </div>
                        </div>

                        <div class="step-row" style="flex-direction: column; align-items: stretch; gap: 5px;">
                            <div style="display:flex; gap:10px; align-items:center;">
                                <div class="step-num" style="background:#4da6ff; color:#fff; border:none;">3</div>
                                <div class="step-desc">Densidad de Flujo (<span style="font-family:'Times New Roman'; font-style:italic;">B = &mu;H</span>):</div>
                            </div>
                            <div style="overflow-x: auto; white-space: nowrap; background: rgba(0,0,0,0.3); border-radius: 6px; padding: 5px;">
                                <div class="math-latex-render" data-expr="B_x = \frac{\mu I x}{2\pi r^2} \quad [Wb/m^2]"></div>
                            </div>
                        </div>

                        <div class="step-row" style="flex-direction: column; align-items: stretch; gap: 5px;">
                            <div style="display:flex; gap:10px; align-items:flex-start;">
                                <div class="step-num" style="background:#4da6ff; color:#fff; border:none;">4</div>
                                <div class="step-desc">
                                    <b>Enlaces de Flujo Diferencial (<span style="font-family:'Times New Roman'; font-style:italic;">d&lambda;</span>):</b>

                                    <p style="font-size:0.75rem; color:#ccc; margin:5px 0; line-height: 2;">
                                        El flujo solo enlaza la fracción de corriente encerrada
                                        <span class="math-latex-render"
                                              data-expr="\left(\frac{x}{r} \right)^2"
                                              style="display: inline-block; vertical-align: middle; margin-left: 3px;"></span>
                                    </p>
                                </div>
                            </div>
                            <div style="overflow-x: auto; white-space: nowrap; border:1px dashed #4da6ff; padding:10px; border-radius: 4px; background: rgba(77, 166, 255, 0.05);">
                                <div class="math-latex-render" data-expr="d\lambda = \left( \frac{x}{r} \right)^2 d\phi = \frac{\mu I}{2\pi r^4} x^3 dx"></div>
                            </div>
                        </div>

                        <div class="step-row" style="flex-direction: column; align-items: stretch; gap: 5px;">
                            <div style="display:flex; gap:10px; align-items:center;">
                                <div class="step-num" style="background:#4da6ff; color:#fff; border:none;">5</div>
                                <div class="step-desc">Integrando desde el centro (<span style="font-family:'Times New Roman';">0</span>) a la superficie (<span style="font-family:'Times New Roman';">r</span>):</div>
                            </div>
                            <div style="overflow-x: auto; white-space: nowrap; background: rgba(0,0,0,0.3); border-radius: 6px; padding: 5px;">
                                <div class="math-latex-render" data-expr="\lambda_{int} = \int_0^r \frac{\mu I}{2\pi r^4} x^3 dx = \frac{\mu I}{8\pi}"></div>
                            </div>
                        </div>

                        <div class="step-result" style="margin-top: 15px; padding: 10px; background: linear-gradient(90deg, rgba(77, 166, 255, 0.1) 0%, rgba(0,0,0,0) 100%); border-left: 3px solid #4da6ff; border-radius: 0 4px 4px 0;">

                            <div style="font-size:0.8rem; color:#aaa; margin-bottom:5px; text-align:center;">
                                Inductancia Interna:
                            </div>

                            <div style="overflow-x: auto; white-space: nowrap;">
                                <div class="math-latex-render" data-expr="L_{int} = \frac{\lambda_{int}}{I} = \frac{1}{2} \times 10^{-7} \quad [H/m]" style="color: #4da6ff;"></div>
                            </div>

                        </div>

                    </div>
                </div>

                <div class="interactive-formula" onclick="toggleDerivation('deriv-flux-ext')" style="margin-top:15px; margin-bottom: 20px; border-color: #ffcc00;">

                    <div class="if-header" style="justify-content:space-between; align-items:center; padding: 10px 15px;">
                        <div style="display:flex; flex-direction:column;">
                            <span style="color:#ffcc00; font-size:0.75rem; font-weight:bold; letter-spacing:1px;">EXTERNA</span>
                            <div class="math-latex-render" data-expr="L_{ext} = 2 \cdot 10^{-7} \ln \frac{D_2}{D_1} \quad \text{H/m}"></div>
                        </div>
                        <span class="if-icon" style="color:#ffcc00; font-size: 1.2rem;">▼</span>
                    </div>

                    <div id="deriv-flux-ext" class="if-content">

                        <p style="color:#ccc; font-size:0.85rem; margin-bottom:15px; border-bottom:1px solid #333; padding-bottom:10px; line-height: 1.5;">
                            Análisis fuera del conductor (<span style="font-family:'Times New Roman'; font-style:italic; color:#ffcc00;">x > r</span>).
                            <br>
                            <span style="font-size:0.75rem; color:#888;">Aquí la trayectoria de integración encierra el 100% de la corriente <span style="font-style:italic;">I</span>.</span>

                            <svg viewBox="0 0 400 250" width="100%" height="auto" xmlns="http://www.w3.org/2000/svg" style="font-family: 'Times New Roman', serif; background-color: #000000; margin-top:10px;">
                                <defs>
                                    <marker id="arrowEndYellow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                                        <polygon points="0 0, 10 3.5, 0 7" fill="#ffcc00" />
                                    </marker>
                                    <marker id="arrowEndWhite" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                                        <polygon points="0 0, 10 3.5, 0 7" fill="#ffffff" />
                                    </marker>
                                </defs>

                                <line x1="200" y1="125" x2="380" y2="125" stroke="#333" stroke-width="1" />

                                <circle cx="200" cy="125" r="110" fill="none" stroke="#ffcc00" stroke-width="1" stroke-dasharray="4,4" opacity="0.6"/>
                                <line x1="200" y1="125" x2="277" y2="47" stroke="#ffcc00" stroke-width="1" stroke-dasharray="2,2" />
                                <text x="285" y="45" fill="#ffcc00" font-size="16" font-style="italic">D₂</text>

                                <circle cx="200" cy="125" r="60" fill="none" stroke="#ffcc00" stroke-width="1" stroke-dasharray="4,4" opacity="0.8"/>
                                <line x1="200" y1="125" x2="242" y2="167" stroke="#ffcc00" stroke-width="1" stroke-dasharray="2,2" />
                                <text x="250" y="180" fill="#ffcc00" font-size="16" font-style="italic">D₁</text>

                                <circle cx="200" cy="125" r="85" fill="none" stroke="#fff" stroke-width="0.5" opacity="0.3"/>
                                <path d="M 200 125 L 285 125" stroke="#fff" stroke-width="1"/>
                                <text x="240" y="115" fill="#fff" font-size="16" font-style="italic">x</text>

                                <rect x="280" y="120" width="10" height="10" fill="#ffcc00" opacity="0.3" />
                                <text x="280" y="145" fill="#aaa" font-size="12">dx</text>

                                <circle cx="200" cy="125" r="25" fill="#333" stroke="#aaa" stroke-width="2" />
                                <text x="193" y="130" fill="#fff" font-size="20" font-weight="bold">I</text>

                                <text x="20" y="30" fill="#ffcc00" font-size="14">B = μ₀H</text>
                                <text x="20" y="50" fill="#aaa" font-size="12">Decae con 1/x</text>
                            </svg>
                        </p>

                        <div class="step-row" style="flex-direction: column; align-items: stretch; gap: 5px;">
                            <div style="display:flex; gap:10px; align-items:center;">
                                <div class="step-num" style="background:#ffcc00; border-color:#fff; color:#000;">1</div>
                                <div class="step-desc"><b>Campo Magnético (<span style="font-family:'Times New Roman'; font-style:italic;">H</span>):</b></div>
                            </div>
                            <div style="font-size:0.75rem; color:#aaa; margin-left: 35px; margin-bottom:5px;">
                                La trayectoria encierra toda la corriente I
                            </div>
                            <div style="overflow-x: auto; white-space: nowrap; background: rgba(0,0,0,0.3); border-radius: 6px; padding: 5px;">
                                <div class="math-latex-render" data-expr="H_x = \frac{I}{2\pi x} \quad [A/m]"></div>
                            </div>
                        </div>

                        <div class="step-row" style="flex-direction: column; align-items: stretch; gap: 5px;">
                            <div style="display:flex; gap:10px; align-items:center;">
                                <div class="step-num" style="background:#ffcc00; border-color:#fff; color:#000;">2</div>
                                <div class="step-desc"><b>Densidad de Flujo (<span style="font-family:'Times New Roman'; font-style:italic;">B</span>):</b></div>
                            </div>
                            <div style="overflow-x: auto; white-space: nowrap; background: rgba(0,0,0,0.3); border-radius: 6px; padding: 5px;">
                                <div class="math-latex-render" data-expr="B_x = \mu_0 H_x = 4\pi \cdot 10^{-7} \frac{I}{2\pi x} = 2 \cdot 10^{-7} \frac{I}{x}"></div>
                            </div>
                        </div>

                        <div class="step-row" style="flex-direction: column; align-items: stretch; gap: 5px;">
                            <div style="display:flex; gap:10px; align-items:flex-start;">
                                <div class="step-num" style="background:#ffcc00; border-color:#fff; color:#000;">3</div>
                                <div class="step-desc">
                                    <b>Enlaces de Flujo (<span style="font-family:'Times New Roman'; font-style:italic;">d&lambda;</span>):</b>
                                    <p style="font-size:0.75rem; color:#ccc; margin:5px 0; line-height:1.3;">
                                        Como estamos fuera, el flujo enlaza <span style="color:#ffcc00; font-weight:bold;">el 100%</span> de la corriente.
                                    </p>
                                </div>
                            </div>
                            <div style="overflow-x: auto; white-space: nowrap; border:1px dashed #ffcc00; padding:10px; border-radius: 4px; background: rgba(255, 204, 0, 0.05);">
                                <div class="math-latex-render" data-expr="d\lambda = 1 \cdot d\phi = B_x \cdot dx"></div>
                                <div style="margin-top:5px;"></div>
                                <div class="math-latex-render" data-expr="d\lambda = 2 \cdot 10^{-7} \frac{I}{x} dx"></div>
                            </div>
                        </div>

                        <div class="step-row" style="flex-direction: column; align-items: stretch; gap: 5px;">
                            <div style="display:flex; gap:10px; align-items:center;">
                                <div class="step-num" style="background:#ffcc00; border-color:#fff; color:#000;">4</div>
                                <div class="step-desc">Integrando desde <span style="font-family:'Times New Roman';">D₁</span> hasta <span style="font-family:'Times New Roman';">D₂</span>:</div>
                            </div>
                            <div style="overflow-x: auto; white-space: nowrap; background: rgba(0,0,0,0.3); border-radius: 6px; padding: 5px;">
                                <div class="math-latex-render" data-expr="\lambda_{12} = \int_{D_1}^{D_2} 2 \cdot 10^{-7} \frac{I}{x} dx"></div>
                            </div>
                            <div style="text-align:center; margin-top:5px;">
                                <span style="font-size:1.2rem; color:#ffcc00;">⬇</span>
                            </div>
                            <div style="overflow-x: auto; white-space: nowrap;">
                                <div class="math-latex-render" data-expr="L_{ext} = 2 \cdot 10^{-7} \ln\left(\frac{D_2}{D_1}\right) \quad [H/m]" style="color: #ffcc00;"></div>
                            </div>
                        </div>

                    </div>
                </div>
                <div style="margin-top: 30px; margin-bottom: 10px; border-top: 1px dashed #333;"></div>

                <div style="color:#00e676; font-size:0.75rem; font-weight:bold; letter-spacing:1px;">INDUCTANCIA TOTAL</div>

                <div class="interactive-formula" onclick="toggleDerivation('deriv-total')" style="margin-top:5px; border-color: #00e676; background: linear-gradient(180deg, rgba(0, 230, 118, 0.05) 0%, rgba(0,0,0,0) 100%);">

                    <div class="if-header" style="justify-content:space-between; align-items:center; padding: 15px;">
                        <div style="display:flex; flex-direction:column;">
                            <span style="color:#00e676; font-size:0.7rem; font-weight:bold; letter-spacing:1px; margin-bottom:4px;">FÓRMULA FINAL DE INDUCTANCIA</span>
                            <div style="overflow-x: auto; white-space: nowrap; padding-bottom: 2px;">
                                <div class="math-latex-render" data-expr="L = 2 \cdot 10^{-7} \ln \frac{D}{\color{#00e676}{D_s}}\quad H/m"></div>
                            </div>
                        </div>
                        <span class="if-icon" style="color:#00e676; font-size:1.2rem;">▼</span>
                    </div>

                    <div id="deriv-total" class="if-content">

                        <div class="step-row" style="flex-direction: column; align-items: stretch; gap: 5px;">
                            <div style="display:flex; gap:10px; align-items:center;">
                                <div class="step-num" style="background:#00e676; color:#000; border:none;">1</div>
                                <div class="step-desc">
                                    Suma <span style="font-family:'Times New Roman', serif;"><i>L</i><sub>int</sub> + <i>L</i><sub>ext</sub></span>:
                                </div>
                            </div>

                            <div style="background: rgba(0,0,0,0.3); border-radius: 6px; padding: 10px; border: 1px solid rgba(0,230,118,0.2);">

                                <div style="overflow-x: auto; white-space: nowrap; margin-bottom: 5px; text-align:center;">
                                    <div class="math-latex-render" data-expr="L_{tot} = \color{#4da6ff}{L_{int}} \color{white}{+} \color{#ffcc00}{L_{ext}}"></div>
                                </div>

                                <div style="overflow-x: auto; white-space: nowrap; margin-bottom: 8px; text-align:center; opacity:0.9;">
                                    <div class="math-latex-render" data-expr="= \color{#4da6ff}{\frac{1}{2}\cdot 10^{-7}} \color{white}{+} \color{#ffcc00}{2\cdot 10^{-7} \ln \frac{D}{r}}"></div>
                                </div>

                                <div style="border-top: 1px dashed #555; margin: 8px 20px;"></div>

                                <div style="font-size: 0.7rem; color: #aaa; text-align: center; margin-bottom: 5px; font-family: monospace;">
                                    Factor común <span style="color:#fff">2·10⁻⁷</span>:
                                </div>

                                <div style="overflow-x: auto; white-space: nowrap; text-align:center;">
                                    <div class="math-latex-render" data-expr="L = 2\cdot 10^{-7} \left( \color{#4da6ff}{\frac{1}{4}} \color{white}{+} \color{#ffcc00}{\ln \frac{D}{r}} \color{white}{}\right)"></div>
                                </div>
                            </div>
                        </div>

                        <div class="step-row" style="flex-direction: column; align-items: stretch; gap: 5px;">
                            <div style="display:flex; gap:10px; align-items:center;">
                                <div class="step-num" style="background:#00e676; color:#000; border:none;">2</div>
                                <div class="step-desc">El Truco Matemático:</div>
                            </div>
                            <div style="font-size:0.75rem; color:#aaa; margin-left:35px;">Convertimos 1/4 en logaritmo natural.</div>
                            <div style="overflow-x: auto; white-space: nowrap; background: rgba(0,0,0,0.3); border-radius: 6px; padding: 5px;">
                                <div class="math-latex-render" data-expr="\color{#4da6ff}{\frac{1}{4}} = \ln(e^{1/4})"></div>
                            </div>

                        </div>

                        <div class="step-row" style="flex-direction: column; align-items: stretch; gap: 5px;">
                            <div style="display:flex; gap:10px; align-items:center;">
                                <div class="step-num" style="background:#00e676; color:#000; border:none;">3</div>
                                <div class="step-desc">Propiedad de Logaritmos:</div>
                            </div>
                            <div style="overflow-x: auto; white-space: nowrap; background: rgba(0,0,0,0.3); border-radius: 6px; padding: 5px;">
                                <div class="math-latex-render" data-expr="\ln(e^{1/4}) + \ln(\frac{D}{r}) = \ln\left( \frac{D}{r \cdot e^{-1/4}} \right)"></div>
                            </div>
                        </div>
                        <div style="margin-bottom:10px; background: rgba(255,255,255,0.03); border: 1px solid #333; border-radius: 8px; padding: 15px;">

                            <div style="color:#ddd; font-size:0.8rem; margin-bottom:15px; text-align:left; border-left: 3px solid #00e676; padding-left:10px;">
                                El término interno 1/4 se absorbe matemáticamente reduciendo el radio real r a un radio ficticio Ds
                            </div>

                            <div class="gmr-visual-container" style="height:100px; background:rgba(0,0,0,0.3); border-radius:6px; border:1px solid #444; position:relative; overflow:hidden; margin: 0 auto;">
                                <div class="gmr-real-circle"></div>
                                <div class="gmr-label-r">r</div>
                                <div class="gmr-fake-circle"></div>
                                <div class="gmr-label-ds" style="color:#00e676; left:62%;">Ds</div>
                                <div class="gmr-center"></div>
                            </div>

                            <div style="text-align:center; margin-top:10px;">
                                <div class="math-latex-render" data-expr="\color{#00e676}{D_s} = r \cdot e^{-1/4} \approx 0.7788 r"></div>
                            </div>

                            <div style="margin-top: 15px; padding-top: 15px; border-top: 1px dashed #555; text-align: center;">
                                <div style="font-size: 0.7rem; color: #aaa; margin-bottom: 5px; text-transform: uppercase; letter-spacing: 1px;">
                                    Sustituyendo en la fórmula:
                                </div>

                                <div style="overflow-x: auto; white-space: nowrap; background: rgba(0, 230, 118, 0.05); border-radius: 6px; padding: 10px; border: 1px solid rgba(0, 230, 118, 0.2);">
                                    <div class="math-latex-render" data-expr="L = 2 \cdot 10^{-7} \ln \left( \frac{D}{\color{#00e676}{D_s}} \right) \quad H/m"></div>
                                </div>
                            </div>
                            <div style="margin-top: 25px; margin-bottom: 10px; border-top: 1px dashed #444;"></div>

                            <div style="color:#e040fb; font-size:0.7rem; font-weight:bold; letter-spacing:1px; margin-bottom:15px;">
                                PARÁMETROS DE OPERACIÓN
                            </div>


                            <div class="step-row" style="flex-direction: column; align-items: stretch; gap: 5px;">
                                <div style="display:flex; gap:10px; align-items:center;">
                                    <div style="font-size:1.2rem;">Ω</div>
                                    <div class="step-desc" style="color:#e040fb; font-weight:bold;">Reactancia Inductiva(<span class="math-latex-render" data-expr="X_L"></span>)</div>
                                </div>
                                <div style="font-size:0.75rem; color:#ccc; margin-left:5px;">
                                    Proporcional a la frecuencia e Inductancia.
                                </div>
                                <div style="overflow-x: auto; white-space: nowrap; background: rgba(224, 64, 251, 0.05); border-radius: 6px; padding: 10px; border:1px solid rgba(224, 64, 251, 0.2); text-align:center; margin-top:5px;">
                                    <span class="math-latex-render" data-expr="X_L = 2\pi f L \quad [\frac{Ω}{longitud}]"></span>
                                </div>
                            </div>

                        </div>

                    </div>
                </div>

            </div>

            <div class="t-card">
                <div class="t-section-title" style="color:#4da6ff; border-color:#4da6ff;">CAPACITANCIA DE UN CONDUCTOR</div>

                <div class="factor-grid">
                    <div class="factor-label" style="color:#4da6ff;">
                        Capacitancia
                        <div style="margin-top: 5px;">
                            <span class="math-latex-render" data-expr="C = q / V" style="font-size:0.9em;"></span>
                        </div>
                    </div>
                    <div class="factor-desc">Capacidad de almacenar carga por unidad de diferencia de potencial.</div>

                    <div class="factor-label" style="color:#4da6ff;">Ley de Gauss</div>
                    <div class="factor-desc">El flujo eléctrico total que sale de una superficie cerrada es igual a la carga encerrada.</div>

                    <div class="factor-label" style="color:#4da6ff;">Campo (E)</div>
                    <div class="factor-desc">
                        Es <b>radial</b>. En un conductor perfecto, el campo interno es cero
                        (<span class="math-latex-render" data-expr="E_{int}=0"></span>).
                    </div>
                </div>

                <div class="interactive-formula" onclick="toggleDerivation('deriv-cap-field')" style="margin-top:15px; border-color:#4da6ff;">

                    <div class="if-header" style="justify-content:space-between; align-items:center; padding: 10px 15px;">
                        <div style="display:flex; flex-direction:column;">
                            <span style="color:#4da6ff; font-size:0.75rem; font-weight:bold; letter-spacing:1px;">CAMPO ELÉCTRICO (GAUSS)</span>
                            <div class="math-latex-render" data-expr="E_x = \frac{q}{2\pi \varepsilon x} \quad \text{ V/m}"></div>
                        </div>
                        <span class="if-icon" style="color:#4da6ff; font-size: 1.2rem;">▼</span>
                    </div>

                    <div id="deriv-cap-field" class="if-content">

                        <p style="color:#ccc; font-size:0.85rem; margin-bottom:15px; border-bottom:1px solid #333; padding-bottom:10px; line-height: 1.5;">
                            Análisis mediante Superficie Gaussiana cilíndrica de radio <span style="font-style:italic; color:#4da6ff;">x</span>.

                            <svg viewBox="0 0 400 240" width="100%" height="auto" xmlns="http://www.w3.org/2000/svg" style="font-family: 'Times New Roman', serif; background-color: #000000; margin-top:10px;">
                                <defs>
                                    <radialGradient id="chargeGrad" cx="50%" cy="50%" r="50%">
                                        <stop offset="0%" style="stop-color:#4da6ff;stop-opacity:0.8" />
                                        <stop offset="100%" style="stop-color:#000000;stop-opacity:0" />
                                    </radialGradient>
                                    <marker id="arrowE" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                                        <polygon points="0 0, 10 3.5, 0 7" fill="#4da6ff" />
                                    </marker>
                                </defs>

                                <circle cx="200" cy="120" r="40" fill="url(#chargeGrad)" stroke="#4da6ff" stroke-width="2" />
                                <text x="190" y="125" fill="#fff" font-weight="bold" font-size="20">+q</text>

                                <line x1="240" y1="120" x2="350" y2="120" stroke="#4da6ff" stroke-width="1.5" marker-end="url(#arrowE)" />
                                <line x1="160" y1="120" x2="50" y2="120" stroke="#4da6ff" stroke-width="1.5" marker-end="url(#arrowE)" />
                                <line x1="200" y1="80" x2="200" y2="20" stroke="#4da6ff" stroke-width="1.5" marker-end="url(#arrowE)" />
                                <line x1="200" y1="160" x2="200" y2="220" stroke="#4da6ff" stroke-width="1.5" marker-end="url(#arrowE)" />

                                <line x1="228" y1="92" x2="300" y2="40" stroke="#4da6ff" stroke-width="1" marker-end="url(#arrowE)" opacity="0.6"/>
                                <line x1="172" y1="148" x2="100" y2="200" stroke="#4da6ff" stroke-width="1" marker-end="url(#arrowE)" opacity="0.6"/>

                                <circle cx="200" cy="120" r="100" fill="none" stroke="#aaa" stroke-width="1" stroke-dasharray="5,3" />
                                <text x="260" y="80" fill="#aaa" font-size="14" font-style="italic">Sup. Gaussiana</text>

                                <line x1="200" y1="120" x2="270" y2="190" stroke="#fff" stroke-width="1" stroke-dasharray="2,2" />
                                <text x="240" y="170" fill="#fff" font-size="18" font-style="italic">x</text>

                                <text x="320" y="110" fill="#4da6ff" font-size="18" font-weight="bold">E</text>
                            </svg>
                        </p>

                        <div class="model-conditions" style="background: linear-gradient(90deg, rgba(77, 166, 255, 0.05) 0%, rgba(0,0,0,0) 100%); border-left: 3px solid #4da6ff; padding: 15px; margin: 15px 0; border-radius: 0 4px 4px 0;">

                            <div style="font-size: 0.75rem; text-transform: uppercase; letter-spacing: 1px; color: #4da6ff; margin-bottom: 12px; font-weight: bold; border-bottom: 1px solid rgba(77, 166, 255, 0.2); padding-bottom: 5px;">
                                Fundamentos Físicos (Fig 4.18):
                            </div>

                            <ul style="margin: 0; padding-left: 15px; color: #ccc; font-size: 0.85rem; list-style-type: none;">

                                <li style="position: relative; padding-left: 15px; margin-bottom: 12px;">
                                    <span style="position: absolute; left: 0; color: #4da6ff;">•</span>
                                    <b>Conductor Perfecto:</b> Como la resistividad es cero (<span class="math-latex-render" data-expr="\rho=0"></span>), la Ley de Ohm dicta que el campo interno es nulo:
                                    <div style="margin: 5px 0 5px 10px; opacity: 0.9;">
                                        <span class="math-latex-render" data-expr="E_{int} = \rho J = 0"></span>
                                    </div>
                                </li>

                                <li style="position: relative; padding-left: 15px; margin-bottom: 12px;">
                                    <span style="position: absolute; left: 0; color: #4da6ff;">•</span>
                                    <b>Simetría Radial:</b> El campo <span class="math-latex-render" data-expr="E"></span> es constante para cualquier radio <span class="math-latex-render" data-expr="x"></span> y perpendicular a la superficie (componente normal).
                                </li>

                                <li style="position: relative; padding-left: 15px; margin-bottom: 12px;">
                                    <span style="position: absolute; left: 0; color: #4da6ff;">•</span>
                                    <b>Líneas de Campo:</b> Se originan en las cargas positivas (superficie del conductor) y terminan en las negativas (infinito o conductor de retorno).
                                </li>

                                <li style="position: relative; padding-left: 15px;">
                                    <span style="position: absolute; left: 0; color: #4da6ff;">•</span>
                                    <b>Permitividad:</b>
                                    <span class="math-latex-render" data-expr="\varepsilon = \varepsilon_0 \cdot \varepsilon_r"></span>

                                    <div style="margin-top: 5px; font-size: 0.9em; color: #bbb;">
                                        para un conductor en el espacio libre:
                                        <span class="math-latex-render" data-expr="\varepsilon_0 \approx 8.854 \times 10^{-12} \text{ F/m}"></span>
                                    </div>
                                </li>
                            </ul>

                            <div style="margin-top: 15px; background: rgba(0,0,0,0.2); padding: 8px; border-radius: 4px; border: 1px dashed #555;">
                                <span style="color: #e040fb; font-size: 0.75rem; font-weight: bold;">NOTA:</span>
                                <span style="color: #aaa; font-size: 0.8rem;"> Los cilindros concéntricos imaginarios alrededor del conductor son <i>superficies equipotenciales</i> (el voltaje es constante en todo el cilindro).</span>
                            </div>
                        </div>

                        <div class="step-row" style="flex-direction: column; align-items: stretch; gap: 5px;">
                            <div style="display:flex; gap:10px; align-items:center;">
                                <div class="step-num" style="background:#4da6ff; color:#fff; border:none;">1</div>
                                <div class="step-desc"><b>Aplicando Gauss:</b></div>
                            </div>
                            <div style="overflow-x: auto; white-space: nowrap; background: rgba(0,0,0,0.3); border-radius: 6px; padding: 5px;">
                                <div class="math-latex-render" data-expr="\oint D \cdot ds = q_{\text{encerrada}}"></div>
                            </div>
                        </div>

                        <div class="step-row" style="flex-direction: column; align-items: stretch; gap: 5px;">
                            <div style="display:flex; gap:10px; align-items:center;">
                                <div class="step-num" style="background:#4da6ff; color:#fff; border:none;">2</div>
                                <div class="step-desc">Área del cilindro de longitud 1m :<span class="math-latex-render" data-expr="2\pi x"></span></div>
                            </div>
                            <div style="overflow-x: auto; white-space: nowrap; background: rgba(0,0,0,0.3); border-radius: 6px; padding: 5px;">
                                <div class="math-latex-render" data-expr="\varepsilon E_x (2\pi x)(1) = q"></div>
                            </div>
                        </div>

                        <div class="step-result" style="margin-top: 10px; padding: 10px; border-left: 3px solid #4da6ff;">
                            <div style="font-size:0.8rem; color:#aaa; margin-bottom:5px;">Intensidad de Campo Eléctrico:</div>
                            <div style="overflow-x: auto; white-space: nowrap;">
                                <div class="math-latex-render" data-expr="E_x = \frac{q}{2\pi \varepsilon x} \quad [V/m]" style="color: #4da6ff;"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="interactive-formula" onclick="toggleDerivation('deriv-volt')" style="margin-top:15px; margin-bottom: 20px; border-color: #e040fb;">

                    <div class="if-header" style="justify-content:space-between; align-items:center; padding: 10px 15px;">
                        <div style="display:flex; flex-direction:column;">
                            <span style="color:#e040fb; font-size:0.75rem; font-weight:bold; letter-spacing:1px;">DIFERENCIA DE POTENCIAL <span class="math-latex-render" data-expr="V_{12}"></span></span>
                            <div class="math-latex-render" data-expr="V_{12} = \frac{q}{2\pi \varepsilon} \ln \frac{D_2}{D_1} \quad \text{Volts}"></div>
                        </div>
                        <span class="if-icon" style="color:#e040fb; font-size: 1.2rem;">▼</span>
                    </div>

                    <div id="deriv-volt" class="if-content">
                        <p style="color:#ccc; font-size:0.85rem; margin-bottom:15px; line-height: 1.5;">
                            La tensión es el trabajo necesario para mover una carga unitaria contra el campo eléctrico desde D1 hasta D2
                        </p>

                        <div class="step-row" style="flex-direction: column; align-items: stretch; gap: 5px;">
                            <div style="display:flex; gap:10px; align-items:center;">
                                <div class="step-num" style="background:#e040fb; color:#fff; border:none;">1</div>
                                <div class="step-desc">Integrando el campo <span class="math-latex-render" data-expr="E_{x}"></span></div>
                            </div>
                            <div style="overflow-x: auto; white-space: nowrap; background: rgba(0,0,0,0.3); border-radius: 6px; padding: 5px;">
                                <div class="math-latex-render" data-expr="V_{12} = \int_{D_1}^{D_2} E_x dx = \int_{D_1}^{D_2} \frac{q}{2\pi \varepsilon x} dx"></div>
                            </div>
                        </div>

                        <div class="step-row" style="flex-direction: column; align-items: stretch; gap: 5px;">
                            <div style="display:flex; gap:10px; align-items:center;">
                                <div class="step-num" style="background:#e040fb; color:#fff; border:none;">2</div>
                                <div class="step-desc">Resultado de la integración <span class="math-latex-render" data-expr="dx/x \to \ln x"></span></div>
                            </div>
                            <div style="overflow-x: auto; white-space: nowrap; border:1px dashed #e040fb; padding:10px; border-radius: 4px; background: rgba(224, 64, 251, 0.05);">
                                <div class="math-latex-render" data-expr="V_{12} = \frac{q}{2\pi \varepsilon} \left[ \ln x \right]_{D_1}^{D_2}"></div>
                                <div style="margin-top:5px;"></div>
                                <div class="math-latex-render" data-expr="V_{12} = \frac{q}{2\pi \varepsilon} \ln\left(\frac{D_2}{D_1}\right)"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <div style="margin-top: 30px; margin-bottom: 10px; border-top: 1px dashed #333;"></div>

                <div style="color:#4da6ff; font-size:0.75rem; font-weight:bold; letter-spacing:1px;">CAPACITANCIA FINAL</div>

                <div class="interactive-formula" onclick="toggleDerivation('deriv-cap-total')" style="margin-top:5px; border-color: #4da6ff; background: linear-gradient(180deg, rgba(77, 166, 255, 0.05) 0%, rgba(0,0,0,0) 100%);">

                    <div class="if-header" style="justify-content:space-between; align-items:center; padding: 15px;">
                        <div style="display:flex; flex-direction:column;">
                            <span style="color:#4da6ff; font-size:0.7rem; font-weight:bold; letter-spacing:1px; margin-bottom:4px;">FÓRMULA DE CAPACITANCIA</span>
                            <div style="overflow-x: auto; white-space: nowrap; padding-bottom: 2px;">
                                <div class="math-latex-render" data-expr="C_n = \frac{2\pi \varepsilon}{\ln(D/r_{ext})} \quad F/m"></div>
                            </div>
                        </div>
                        <span class="if-icon" style="color:#4da6ff; font-size:1.2rem;">▼</span>
                    </div>

                    <div id="deriv-cap-total" class="if-content">

                        <div style="font-size:0.85rem; color:#ccc; margin-bottom:10px;">
                            Partiendo de la definición fundamental:                             <span class="math-latex-render" data-expr="C = q / V"></span>
                        </div>

                        <div style="background: rgba(0,0,0,0.3); border-radius: 6px; padding: 10px; border: 1px solid rgba(77, 166, 255, 0.2); text-align:center;">
                            <div class="math-latex-render" data-expr="C = \frac{q}{\frac{q}{2\pi \varepsilon} \ln \frac{D_2}{D_1}}"></div>

                            <div style="margin: 8px auto; width: 50%; border-top: 1px solid #555;"></div>
                            <div style="font-size: 0.75rem; color: #888; font-style: italic;">Se cancela la carga 'q'</div>

                            <div class="math-latex-render" data-expr="C = \frac{2\pi \varepsilon}{\ln \frac{D_2}{D_1}}"></div>
                        </div>

                        <div style="margin-top:15px; background: rgba(255, 87, 34, 0.1); border: 1px solid #ff5722; border-radius: 8px; padding: 15px;">

                            <div style="display:flex; align-items:center; gap:10px; margin-bottom:10px;">
                                <span style="font-size:1.5rem;">⚠️</span>
                                <span style="color:#ff5722; font-weight:bold; font-size:0.9rem;">DIFERENCIA CRÍTICA CON INDUCTANCIA</span>
                            </div>

                            <div style="color:#ddd; font-size:0.8rem; line-height:1.4;">
                                En capacitancia, el campo eléctrico termina en la superficie exterior del conductor.
                                <br><br>
                                NO SE USA el Radio Geométrico Medio
                                <span class="math-latex-render" data-expr="D_s"></span>
                                o
                                <span class="math-latex-render" data-expr="r'"></span>
                                <br>
                                <span style="color:#4da6ff; font-weight:bold;">SE USA</span> el radio exterior real: <span class="math-latex-render" data-expr="r_{exterior}"></span>
                            </div>

                            <div style="background: rgba(0,0,0,0.4); border-radius: 6px; padding: 8px; display: flex; align-items: center; justify-content: space-around; border-top: 1px solid rgba(255,255,255,0.1);">

                                <div style="text-align:center;">
                                    <div style="color:#00e676; font-size:0.65rem; font-weight:bold; margin-bottom:2px; text-shadow: 0 0 8px rgba(77, 166, 255, 0.6);">Inductancia</div>
                                    <span class="math-latex-render" data-expr="\ln(D/D_s)"></span>
                                </div>

                                <div style="width: 1px; height: 25px; background: #444;"></div>

                                <div style="text-align:center;">
                                    <div style="color:#4da6ff; font-size:0.65rem; font-weight:bold; margin-bottom:2px; text-shadow: 0 0 8px rgba(77, 166, 255, 0.6);">Capacitancia</div>
                                    <span class="math-latex-render" data-expr="\ln(D/r_{ext})"></span>
                                </div>

                            </div>
                        </div>

                            <div style="margin-top: 25px; margin-bottom: 10px; border-top: 1px dashed #444;"></div>

                            <div style="color:#e040fb; font-size:0.7rem; font-weight:bold; letter-spacing:1px; margin-bottom:15px;">
                                PARÁMETROS DE OPERACIÓN
                            </div>

                            <div class="step-row" style="flex-direction: column; align-items: stretch; gap: 5px; margin-bottom:15px;">
                                <div style="display:flex; gap:10px; align-items:center;">
                                    <div style="font-size:1.2rem;">⚡</div>
                                    <div class="step-desc" style="color:#e040fb; font-weight:bold;">Corriente de Carga (<span class="math-latex-render" data-expr="I_{carga}"></span>)</div>
                                </div>
                                <div style="font-size:0.75rem; color:#ccc; margin-left:5px;">
                                    Corriente fasorial que fluye debido a la capacitancia alterna de la línea.
                                </div>
                                <div style="overflow-x: auto; white-space: nowrap; background: rgba(224, 64, 251, 0.05); border-radius: 6px; padding: 10px; border:1px solid rgba(224, 64, 251, 0.2); text-align:center; margin-top:5px;">
                                    <span class="math-latex-render" data-expr="I_{carga} = j \omega C_n V_{an} \quad [A/longitud]"></span>
                                </div>
                            </div>


                            <div class="step-row" style="flex-direction: column; align-items: stretch; gap: 5px;">
                                <div style="display:flex; gap:10px; align-items:center;">
                                    <div style="font-size:1.2rem;">Ω</div>
                                    <div class="step-desc" style="color:#e040fb; font-weight:bold;">Reactancia Capacitiva (<span class="math-latex-render" data-expr="X_C"></span>)</div>
                                </div>
                                <div style="font-size:0.75rem; color:#ccc; margin-left:5px;">
                                    Oposición al flujo de corriente. Inversamente proporcional a la frecuencia y capacitancia.
                                </div>
                                <div style="overflow-x: auto; white-space: nowrap; background: rgba(224, 64, 251, 0.05); border-radius: 6px; padding: 10px; border:1px solid rgba(224, 64, 251, 0.2); text-align:center; margin-top:5px;">
                                    <span class="math-latex-render" data-expr="X_C = \frac{1}{2\pi f C_n} \quad [\Omega \cdot longitud] \quad al \quad neutro"></span>
                                </div>
                            </div>


                    </div>
                </div>
            </div>
            <div class="t-card">
                <div class="t-section-title" style="color:#00bcd4; border-color:#00bcd4;">CAPACITANCIA CON EFECTO SUELO</div>

                <div class="factor-grid">
                    <div class="factor-label" style="color:#00bcd4;">Principio</div>
                    <div class="factor-desc">El suelo altera el campo eléctrico. Se modela reemplazando la tierra por un <b>Conductor Imagen</b>.</div>

                    <div class="factor-label" style="color:#00bcd4;">Conductor Imagen</div>
                    <div class="factor-desc">Conductor ficticio a una profundidad <span class="math-latex-render" data-expr="H"></span> con carga opuesta <span class="math-latex-render" data-expr="-q"></span>.</div>

                    <div class="factor-label" style="color:#00bcd4;">Efecto Neto</div>
                    <div class="factor-desc">El suelo <b>aumenta</b> la capacitancia de la línea de transmisión.</div>
                </div>

                <div class="interactive-formula" onclick="toggleDerivation('deriv-ground-calc')" style="margin-top:15px; border-color:#00bcd4; background: linear-gradient(180deg, rgba(0, 188, 212, 0.05) 0%, rgba(0,0,0,0) 100%);">

                    <div class="if-header" style="justify-content:space-between; align-items:center; padding: 15px;">
                        <div style="display:flex; flex-direction:column; min-width: 0;">
                            <span style="color:#00bcd4; font-size:0.7rem; font-weight:bold; letter-spacing:1px; margin-bottom:4px;">EFECTO SUELO: MÉTODO DE IMÁGENES</span>

                            <div style="overflow-x: auto; white-space: nowrap; padding-bottom: 2px; max-width: 65vw;">
                                <span class="math-latex-render" data-expr="C_n = \frac{2\pi \varepsilon}{\ln(\frac{D_{eq}}{r_{ext}}) - \ln(\frac{\sqrt[3]{H_{12}H_{23}H_{31}}}{\sqrt[3]{H_1 H_2 H_3}})}  \quad F/m"></span>
                            </div>
                        </div>
                        <span class="if-icon" style="color:#00bcd4; font-size:1.2rem;">▼</span>
                    </div>

                    <div id="deriv-ground-calc" class="if-content">

                            <p style="color:#ccc; font-size:0.85rem; margin-bottom:15px; border-bottom:1px solid #333; padding-bottom:10px;">
                                El plano de tierra es una superficie equipotencial (V=0). Las líneas de campo entran perpendiculares al suelo.
                            </p>

                            <svg viewBox="0 0 400 300" width="100%" height="auto" xmlns="http://www.w3.org/2000/svg" style="font-family: 'Times New Roman', serif; background-color: #000000; border: 1px solid #333;">
                                <defs>
                                    <linearGradient id="groundGrad" x1="0%" y1="0%" x2="0%" y2="100%">
                                        <stop offset="0%" style="stop-color:#00bcd4;stop-opacity:0.2" />
                                        <stop offset="100%" style="stop-color:#000000;stop-opacity:0" />
                                    </linearGradient>
                                    <marker id="arrowCyan" markerWidth="8" markerHeight="8" refX="7" refY="4" orient="auto">
                                        <path d="M0,0 L8,4 L0,8" fill="none" stroke="#00bcd4" stroke-width="1" />
                                    </marker>
                                </defs>

                                <line x1="20" y1="150" x2="380" y2="150" stroke="#00bcd4" stroke-width="1" />
                                <rect x="20" y="150" width="360" height="20" fill="url(#groundGrad)" />
                                <text x="300" y="145" fill="#00bcd4" font-size="12" font-style="italic">Suelo (V=0)</text>

                                <circle cx="200" cy="50" r="10" fill="#4da6ff" stroke="#fff" stroke-width="2" />
                                <text x="220" y="55" fill="#4da6ff" font-weight="bold">+q</text>
                                <text x="160" y="55" fill="#fff" font-size="14">Real</text>

                                <circle cx="200" cy="250" r="10" fill="none" stroke="#00bcd4" stroke-width="2" stroke-dasharray="4,2" />
                                <text x="220" y="255" fill="#00bcd4" font-weight="bold">-q</text>
                                <text x="150" y="255" fill="#00bcd4" font-size="14" font-style="italic">Imagen</text>

                                <line x1="120" y1="50" x2="120" y2="150" stroke="#aaa" stroke-width="1" marker-start="url(#arrowCyan)" marker-end="url(#arrowCyan)" />
                                <text x="100" y="105" fill="#fff">H</text>

                                <line x1="120" y1="150" x2="120" y2="250" stroke="#00bcd4" stroke-width="1" stroke-dasharray="4,2" />
                                <text x="100" y="205" fill="#00bcd4">H</text>

                                <path d="M 190 50 Q 100 150 190 250" fill="none" stroke="#fff" stroke-width="0.5" opacity="0.6" stroke-dasharray="5,5" />
                                <path d="M 210 50 Q 300 150 210 250" fill="none" stroke="#fff" stroke-width="0.5" opacity="0.6" stroke-dasharray="5,5" />

                                <text x="100" y="20" fill="#aaa" font-size="10">El campo eléctrico superior es idéntico</text>
                            </svg>

                            <div class="model-conditions" style="margin-top:15px; border-left-color: #00bcd4;">
                                <ul style="margin:0; padding-left:15px; color:#ccc; font-size:0.85rem;">
                                    <li style="margin-bottom:8px;">
                                        <b style="color:#00bcd4;">Altura:</b> La distancia entre el conductor real y su imagen es
                                        <span class="math-latex-render" data-expr="2H"></span>.
                                    </li>
                                    <li>
                                        <b style="color:#00bcd4;">Distancia Mutua:</b> Aparecen nuevas distancias
                                        <span class="math-latex-render" data-expr="H_{12}"></span>
                                        (distancia del conductor 1 a la imagen del 2).
                                    </li>
                                </ul>
                            </div>

                        <svg viewBox="0 0 400 350" width="100%" height="auto" xmlns="http://www.w3.org/2000/svg" style="font-family: 'Times New Roman', serif; background-color: #000000; border: 1px solid #333; margin-bottom: 15px;">
                            <defs>
                                <linearGradient id="groundGrad3ph" x1="0%" y1="0%" x2="0%" y2="100%">
                                    <stop offset="0%" style="stop-color:#00bcd4;stop-opacity:0.2" />
                                    <stop offset="100%" style="stop-color:#000000;stop-opacity:0" />
                                </linearGradient>
                                <marker id="arrowCyanSmall" markerWidth="6" markerHeight="6" refX="5" refY="3" orient="auto">
                                    <path d="M0,0 L6,3 L0,6" fill="none" stroke="#00bcd4" stroke-width="1" />
                                </marker>
                                <marker id="arrowBlueSmall" markerWidth="6" markerHeight="6" refX="5" refY="3" orient="auto">
                                    <path d="M0,0 L6,3 L0,6" fill="none" stroke="#4da6ff" stroke-width="1" />
                                </marker>
                            </defs>

                            <line x1="20" y1="175" x2="380" y2="175" stroke="#00bcd4" stroke-width="2" />
                            <rect x="20" y="175" width="360" height="30" fill="url(#groundGrad3ph)" />
                            <text x="340" y="165" fill="#00bcd4" font-size="12" font-style="italic">Suelo</text>

                            <circle cx="100" cy="75" r="8" fill="#4da6ff" stroke="#fff" stroke-width="1" />
                            <text x="95" y="60" fill="#4da6ff" font-weight="bold">1</text>

                            <circle cx="200" cy="75" r="8" fill="#4da6ff" stroke="#fff" stroke-width="1" />
                            <text x="195" y="60" fill="#4da6ff" font-weight="bold">2</text>

                            <circle cx="300" cy="75" r="8" fill="#4da6ff" stroke="#fff" stroke-width="1" />
                            <text x="295" y="60" fill="#4da6ff" font-weight="bold">3</text>

                            <circle cx="100" cy="275" r="8" fill="none" stroke="#00bcd4" stroke-width="1" stroke-dasharray="3,2" />
                            <text x="95" y="305" fill="#00bcd4" font-weight="bold">1'</text>

                            <circle cx="200" cy="275" r="8" fill="none" stroke="#00bcd4" stroke-width="1" stroke-dasharray="3,2" />
                            <text x="195" y="305" fill="#00bcd4" font-weight="bold">2'</text>

                            <circle cx="300" cy="275" r="8" fill="none" stroke="#00bcd4" stroke-width="1" stroke-dasharray="3,2" />
                            <text x="295" y="305" fill="#00bcd4" font-weight="bold">3'</text>

                            <line x1="60" y1="75" x2="60" y2="275" stroke="#00bcd4" stroke-width="1" marker-start="url(#arrowCyanSmall)" marker-end="url(#arrowCyanSmall)" />

                            <line x1="100" y1="75" x2="55" y2="75" stroke="#00bcd4" stroke-width="0.5" opacity="0.5" stroke-dasharray="2,2"/>
                            <line x1="100" y1="275" x2="55" y2="275" stroke="#00bcd4" stroke-width="0.5" opacity="0.5" stroke-dasharray="2,2"/>

                            <rect x="50" y="165" width="20" height="20" fill="#000" /> <text x="52" y="180" fill="#00bcd4" font-size="14" font-weight="bold">H₁</text>

                            <line x1="108" y1="40" x2="192" y2="40" stroke="#4da6ff" stroke-width="1" marker-start="url(#arrowBlueSmall)" marker-end="url(#arrowBlueSmall)" />
                            <text x="140" y="35" fill="#4da6ff" font-size="12">D₁₂</text>
                            <line x1="100" y1="67" x2="100" y2="35" stroke="#4da6ff" stroke-width="0.5" opacity="0.3"/>
                            <line x1="200" y1="67" x2="200" y2="35" stroke="#4da6ff" stroke-width="0.5" opacity="0.3"/>

                            <line x1="100" y1="75" x2="200" y2="275" stroke="#e040fb" stroke-width="1.5" stroke-dasharray="5,3" />
                            <text x="160" y="180" fill="#e040fb" font-size="14" font-weight="bold" style="text-shadow: 2px 2px 4px #000;">H₁₂</text>
                        </svg>

                        <div style="font-size:0.8rem; color:#ccc; margin-bottom:10px;">
                            La presencia del suelo introduce un término de sustracción en el denominador.
                        </div>

                        <div style="background: rgba(0,0,0,0.3); border-radius: 6px; padding: 10px; border: 1px solid rgba(0, 188, 212, 0.2);">

                            <div style="text-align:center; font-size: 0.75rem; color: #aaa; margin-bottom:5px;">
                                Término de Corrección (Resta):
                            </div>

                            <div style="overflow-x: auto; white-space: nowrap; text-align:center; padding-bottom: 5px;">
                                <span class="math-latex-render" data-expr="\ln \left( \frac{\sqrt[3]{H_{12}H_{23}H_{31}}}{\sqrt[3]{H_1 H_2 H_3}} \right)"></span>
                            </div>

                            <div style="font-size: 0.75rem; color: #888; border-top: 1px dashed #444; padding-top: 8px; margin-top: 5px;">
                                Donde <span class="math-latex-render" data-expr="H_{ij}"></span> es la distancia entre el conductor <span style="font-style:italic;">i</span> y la imagen del conductor <span style="font-style:italic;">j</span>.
                            </div>
                        </div>

                        <div style="margin-top:15px; background: rgba(0, 188, 212, 0.1); border: 1px solid #00bcd4; border-radius: 8px; padding: 15px;">

                            <div style="display:flex; align-items:center; gap:10px; margin-bottom:5px;">
                                <span style="color:#00bcd4; font-weight:bold; font-size:0.9rem;">CONCLUSIÓN</span>
                            </div>

                            <div style="color:#ddd; font-size:0.85rem; line-height:1.4;">
                                Como restamos un término al denominador, el denominador se hace más pequeño.
                                <br><br>
                                <span style="color:#00bcd4; font-weight:bold;">RESULTADO:</span> La capacitancia <b>AUMENTA</b> debido a la presencia del suelo.
                            </div>
                        </div>

                    </div>
                </div>

            </div>

        </div>

        <div id="content-res" class="theory-section active">
            <h2 class="t-main-title" style="color:#ff5555;">RESISTENCIA AC</h2>
            <p class="t-desc">Pérdida de potencia y efectos térmicos en la línea.</p>

            <div class="t-card">
                <div class="t-section-title" style="color:#ff5555; border-color:#ff5555;">FACTORES DE INFLUENCIA</div>

                <div class="factor-grid">
                    <div class="factor-label" style="color:#ff5252;">Fórmula Base
                        <span class="math-latex-render" data-expr="R_{dc} = \frac{\rho \cdot l}{A}"></span>
                    </div>
                    <div class="factor-desc">
                        Depende de la resistividad <span class="math-latex-render" data-expr="\rho"></span> longitud y área.
                    </div>
                    <div class="factor-label">Espiralado</div>
                    <div class="factor-desc">Al trenzar los hilos, la longitud real es mayor que la de la línea. El trenzado aumenta la longitud real del conductor un 1-2%.</div>

                    <div class="factor-label">Temperatura</div>
                    <div class="factor-desc">El calor aumenta la agitación molecular, dificultando el paso de electrones.</div>

                    <div class="factor-label">Efecto Piel</div>
                    <div class="factor-desc">En AC, la corriente se desplaza a la periferia, reduciendo el área útil.</div>

                    <div class="factor-label">Proximidad</div>
                    <div class="factor-desc">Alteración del flujo por campos magnéticos de fases vecinas.</div>
                </div>
            </div>

            <div class="t-card" style="padding-bottom: 25px;">
                <div class="t-section-title" style="color:#aaa; border:none; margin-top:0;">EFECTO TEMPERATURA</div>

                <div class="figura-43-container">
                    <svg viewBox="0 0 100 100" preserveAspectRatio="none" class="graph-svg">
                        <defs>
                            <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
                                <path d="M0,0 L0,6 L9,3 z" fill="#888" />
                            </marker>
                        </defs>

                        <line x1="20" y1="100" x2="20" y2="5" stroke="#888" stroke-width="0.5" marker-end="url(#arrow)" /> <line x1="15" y1="65" x2="95" y2="65" stroke="#fff" stroke-width="0.5" /> <line x1="20" y1="90" x2="38.75" y2="65" stroke="#777" stroke-width="0.8" stroke-dasharray="2,1" />

                        <line x1="38.75" y1="65" x2="80" y2="10" stroke="#ff5555" stroke-width="1.2" />

                        <line x1="20" y1="50" x2="50" y2="50" stroke="#555" stroke-width="0.3" stroke-dasharray="2,2" />
                        <line x1="50" y1="50" x2="50" y2="65" stroke="#555" stroke-width="0.3" stroke-dasharray="2,2" />

                        <line x1="20" y1="30" x2="65" y2="30" stroke="#555" stroke-width="0.3" stroke-dasharray="2,2" />
                        <line x1="65" y1="30" x2="65" y2="65" stroke="#555" stroke-width="0.3" stroke-dasharray="2,2" />

                        <circle cx="50" cy="50" r="1.5" fill="#fff" stroke="#ff5555" stroke-width="0.5" />
                        <circle cx="65" cy="30" r="1.5" fill="#fff" stroke="#ff5555" stroke-width="0.5" />
                    </svg>

                    <div class="label-axis-y">t</div>
                    <div class="label-axis-x">R</div>

                    <div class="marker-T"></div>
                    <div class="label-T">- T</div>

                    <div class="label-val" style="left:12%; bottom:48%;">t₁</div>
                    <div class="label-val" style="left:48%; bottom:23%;">R₁</div>

                    <div class="label-val" style="left:12%; bottom:68%;">t₂</div>
                    <div class="label-val" style="left:63%; bottom:23%;">R₂</div>
                </div>

                <div class="t-formula-box" style="margin-top:15px; display:flex; flex-direction:column; align-items:center; justify-content:center; gap:8px;">

                    <div style="display:flex; align-items:center; gap:10px;">
                        <div style="display:inline-flex; flex-direction:column; align-items:center;">
                            <span class="t-math" style="border-bottom:1px solid #fff; padding-bottom:2px;">R₂</span>
                            <span class="t-math" style="padding-top:1px;">R₁</span>
                        </div>
                        <span class="t-math"> = </span>
                        <div style="display:inline-flex; flex-direction:column; align-items:center;">
                            <span class="t-math" style="border-bottom:1px solid #fff; padding-bottom:2px;">T + t₂</span>
                            <span class="t-math" style="padding-top:1px;">T + t₁</span>
                        </div>
                    </div>

                    <div style="font-size:0.65rem; color:#888;">
                        Constante T (Depende del material)
                    </div>

                </div>

                <div style="margin-top:15px; background: rgba(0,0,0,0.3); border-radius: 6px; border: 1px solid rgba(255, 82, 82, 0.2); padding: 12px;">
                <div style="font-size: 0.75rem; color: #ff5252; margin-bottom: 10px; font-weight: bold; border-bottom: 1px dashed rgba(255,82,82,0.3); padding-bottom: 5px; display:flex; justify-content:space-between;">
                    <span>Material (Conductividad)</span>
                    <span>Valor T</span>
                </div>

                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                    <div style="font-size: 0.7rem; color: #ccc; line-height:1.2;">
                        <b style="color:#fff;">Cu</b> Cobre Recocido<br>
                        <span style="font-size:0.65rem; color:#888;">(100% conductividad)</span>
                    </div>
                    <div style="color: #ff5252; font-weight:bold;">
                        <span class="math-latex-render" data-expr="234.5"></span>
                    </div>
                </div>

                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                    <div style="font-size: 0.7rem; color: #ccc; line-height:1.2;">
                        <b style="color:#fff;">Cu</b> Cobre Estirado en frío<br>
                        <span style="font-size:0.65rem; color:#888;">(97.3% conductividad)</span>
                    </div>
                    <div style="color: #ff5252; font-weight:bold;">
                        <span class="math-latex-render" data-expr="241"></span>
                    </div>
                </div>

                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <div style="font-size: 0.7rem; color: #ccc; line-height:1.2;">
                        <b style="color:#fff;">Al</b> Aluminio Estirado en frío<br>
                        <span style="font-size:0.65rem; color:#888;">(61% conductividad)</span>
                    </div>
                    <div style="color: #ff5252; font-weight:bold;">
                        <span class="math-latex-render" data-expr="228"></span>
                    </div>
                </div>

            </div>
            </div>
            <div class="t-card" style="margin-top:15px;">
                <div class="t-section-title" style="color:#ff5252; border-color:#ff5252;">EFECTO PIEL (SKIN EFFECT)</div>

                <div style="display:flex; align-items:center; gap:15px; margin-bottom:15px;">
                    <div style="position:relative; width:80px; height:80px;">
                        <svg viewBox="0 0 100 100" width="100%" height="100%">
                            <defs>
                                <radialGradient id="skinGrad" cx="50%" cy="50%" r="50%" fx="50%" fy="50%">
                                    <stop offset="0%" style="stop-color:#222; stop-opacity:1" /> <stop offset="70%" style="stop-color:#500; stop-opacity:1" />
                                    <stop offset="100%" style="stop-color:#ff5252; stop-opacity:1" /> </radialGradient>
                            </defs>
                            <circle cx="50" cy="50" r="45" fill="url(#skinGrad)" stroke="#ff5252" stroke-width="2" />
                            <circle cx="50" cy="50" r="10" fill="#333" />
                            <text x="50" y="55" text-anchor="middle" fill="#555" font-size="10">J↓</text>
                            <text x="50" y="15" text-anchor="middle" fill="#fff" font-size="14" font-weight="bold">J↑</text>
                        </svg>
                    </div>

                    <div class="factor-desc" style="flex:1;">
                        En AC, el flujo magnético interno expulsa la corriente hacia la superficie exterior.

                        <div style="margin-top:5px; color:#ffab91; font-weight:bold;">
                            Consecuencia:
                            <span class="math-latex-render" data-expr="A_{efectiva} < A_{real}"></span>
                        </div>
                    </div>
                </div>

                <div style="background: rgba(0,0,0,0.3); padding:10px; border-radius:6px; border-left: 3px solid #ff5252;">
                    <div style="font-size:0.75rem; color:#ccc;">Resistencia AC final:</div>
                    <div style="margin-top:3px;">
                        <span class="math-latex-render" data-expr="\quad \quad \quad \quad R_{AC} > R_{DC}"></span>
                    </div>
                    <div style="font-size:0.7rem; color:#888; margin-top:3px;">
                        (Típicamente un 2-5% mayor a 60Hz)
                    </div>
                </div>
            </div>
        </div>

        <div id="content-rmg" class="theory-section">
            <h2 class="t-main-title" style="color:#00e676;">RADIO MEDIO GEOMÉTRICO</h2>
            <p class="t-desc">El "radio efectivo" de un conductor ficticio que no tiene flujo interno.</p>

            <div class="t-card">
                <div class="t-section-title" style="color:#00e676; border-color:#00e676;">EL FACTOR 0.7788</div>

                <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 20px; background: linear-gradient(90deg, rgba(0, 230, 118, 0.05) 0%, rgba(0,0,0,0) 100%); padding: 12px; border-radius: 8px; border-left: 3px solid #00e676;">

                    <div style="flex: 0 0 95px; display:flex; justify-content:center; position:relative;">
                        <svg viewBox="0 0 100 100" width="95" height="95">
                            <defs>
                                <radialGradient id="gradWireLit" cx="40%" cy="40%" r="60%">
                                    <stop offset="0%" style="stop-color:#555" /> <stop offset="100%" style="stop-color:#1a1a1a" />
                                </radialGradient>
                            </defs>

                            <circle cx="50" cy="50" r="45" fill="url(#gradWireLit)" stroke="#777" stroke-width="1" />
                            <text x="50" y="25" fill="#aaa" text-anchor="middle" font-size="10" font-weight="bold">r</text>

                            <circle cx="50" cy="50" r="15" fill="none" stroke="#00e676" stroke-width="1" stroke-dasharray="2,2" opacity="0.5"/>
                            <circle cx="50" cy="50" r="30" fill="none" stroke="#00e676" stroke-width="1" stroke-dasharray="2,2" opacity="0.4"/>

                            <circle cx="50" cy="50" r="35" fill="none" stroke="#fff" stroke-width="1.5" stroke-dasharray="4,2" />
                            <text x="50" y="54" fill="#fff" text-anchor="middle" font-size="12" font-weight="bold" style="text-shadow: 0 0 5px #000;">Ds</text>
                        </svg>
                    </div>

                    <div style="flex: 1;">
                        <div style="font-size: 0.8rem; color: #ccc; line-height: 1.5;">
                            El flujo magnético penetra el conductor real (gris).
                            <br>
                            Matemáticamente, lo reemplazamos por un <b style="color:#fff;">tubo hueco ficticio </b> de un radio menor Ds (círculo punteado blanco) para simplificar la fórmula.
                        </div>
                    </div>
                </div>

                <div class="interactive-formula" onclick="toggleDerivation('deriv-gmr')" style="border-color:#00e676;">
                    <div class="if-header" style="justify-content:space-between; align-items:center;">
                        <div style="display:flex; flex-direction:column;">
                            <span style="font-size:0.75rem; color:#aaa;">Conversión Matemática</span>
                            <div style="margin-top:2px;">
                                <span class="math-latex-render" data-expr="D_s = r \cdot e^{-1/4} \approx 0.7788 r"></span>
                            </div>
                        </div>
                        <span class="if-icon" style="color:#00e676;">▼</span>
                    </div>

                    <div id="deriv-gmr" class="if-content">
                        <div class="step-row" style="flex-direction:column; gap:5px;">
                            <div style="font-size:0.8rem; color:#ccc;">1. La Inductancia total incluye el término interno 1/4:</div>
                            <div style="background:rgba(255,255,255,0.05); padding:8px; border-radius:4px; text-align:center;">
                                <span class="math-latex-render" data-expr="L = 2 \cdot 10^{-7} \left( \color{#00e676}{\frac{1}{4}} \color{white}{ + \ln \frac{D}{r}} \right)"></span>
                            </div>
                        </div>

                        <div class="step-row" style="flex-direction:column; gap:5px; margin-top:10px;">
                            <div style="font-size:0.8rem; color:#ccc;">2. Convertimos 1/4 en logaritmo natural:</div>
                            <div style="text-align:center;">
                                <span class="math-latex-render" data-expr="\frac{1}{4} = \ln(e^{1/4})"></span>
                            </div>
                        </div>

                        <div class="step-row" style="flex-direction:column; gap:5px; margin-top:10px;">
                            <div style="font-size:0.8rem; color:#ccc;">3. Propiedad de resta de logaritmos (<span class="math-latex-render" data-expr="\ln A - \ln B"></span>):</div>
                            <div style="background:rgba(0, 230, 118, 0.1); border:1px solid #00e676; padding:8px; border-radius:4px; text-align:center;">
                                <span class="math-latex-render" data-expr="L = 2 \cdot 10^{-7} \ln \left( \frac{D}{r \cdot e^{-1/4}} \right)"></span>
                            </div>
                            <div style="font-size:0.7rem; color:#aaa; margin-top:5px; text-align:center;">
                                El término <span class="math-latex-render" data-expr="r \cdot e^{-1/4}"></span> es el nuevo radio ficticio.
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="t-card">
                <div class="t-section-title" style="color:#fff; border-color:#fff;">CONDUCTORES AGRUPADOS (HACES)</div>

                <div style="background:rgba(0, 230, 118, 0.05); border-left:3px solid #00e676; padding:10px; margin-bottom:15px; border-radius:4px;">
                    <div style="font-size:0.7rem; color:#00e676; font-weight:bold; margin-bottom:5px;">APLICACIÓN EN EXTRA ALTO VOLTAJE (>230 kV)</div>
                    <ul style="margin:0; padding-left:15px; color:#ccc; font-size:0.75rem; line-height:1.4;">
                        <li><b>Reduce Efecto Corona:</b> Disminuye el gradiente de voltaje superficial.</li>
                        <li><b>Reduce Inductancia:</b> Aumenta el RMG efectivo (crea un conductor "hueco" gigante).</li>
                    </ul>
                </div>

                <div style="display:grid; grid-template-columns: 1fr 1fr 1fr; gap:5px; margin-bottom:15px;">

                    <div style="background:rgba(0,0,0,0.3); padding:8px; border-radius:6px; text-align:center;">
                        <svg viewBox="0 -10 60 80" width="45" height="45" style="margin-bottom:5px; overflow:visible;">
                            <circle cx="15" cy="40" r="6" fill="#4da6ff"/>
                            <circle cx="45" cy="40" r="6" fill="#4da6ff"/>
                            <line x1="21" y1="40" x2="39" y2="40" stroke="#555" stroke-width="1" stroke-dasharray="2,1"/>

                            <line x1="15" y1="25" x2="45" y2="25" stroke="#aaa" stroke-width="1.5"/>
                            <line x1="15" y1="20" x2="15" y2="30" stroke="#aaa" stroke-width="1.5"/>
                            <line x1="45" y1="20" x2="45" y2="30" stroke="#aaa" stroke-width="1.5"/>
                            <text x="30" y="18" fill="#fff" font-size="14" text-anchor="middle" font-weight="900" style="text-shadow: 0px 1px 2px #000;">d</text>
                        </svg>
                        <div style="font-size:0.7rem; color:#aaa; margin-bottom:2px;">Dúplex</div>
                        <span class="math-latex-render" data-expr="\sqrt{D_s d}" style="font-size:0.8rem;"></span>
                    </div>

                    <div style="background:rgba(0,0,0,0.3); padding:8px; border-radius:6px; text-align:center;">
                        <svg viewBox="0 -10 60 80" width="45" height="45" style="margin-bottom:5px; overflow:visible;">
                            <circle cx="30" cy="10" r="5" fill="#4da6ff"/>
                            <circle cx="12" cy="38" r="5" fill="#4da6ff"/>
                            <circle cx="48" cy="38" r="5" fill="#4da6ff"/>

                            <line x1="12" y1="55" x2="48" y2="55" stroke="#aaa" stroke-width="1.5"/>
                            <line x1="12" y1="50" x2="12" y2="60" stroke="#aaa" stroke-width="1.5"/>
                            <line x1="48" y1="50" x2="48" y2="60" stroke="#aaa" stroke-width="1.5"/>
                            <text x="30" y="50" fill="#fff" font-size="14" text-anchor="middle" font-weight="900" style="text-shadow: 0px 1px 2px #000;">d</text>
                        </svg>
                        <div style="font-size:0.7rem; color:#aaa; margin-bottom:2px;">Triplex</div>
                        <span class="math-latex-render" data-expr="\sqrt[3]{D_s d^2}" style="font-size:0.8rem;"></span>
                    </div>

                    <div style="background:rgba(0,0,0,0.3); padding:8px; border-radius:6px; text-align:center;">
                        <svg viewBox="0 -10 60 80" width="45" height="45" style="margin-bottom:5px; overflow:visible;">
                            <rect x="15" y="25" width="30" height="30" fill="none" stroke="#555" stroke-dasharray="1,1"/>
                            <circle cx="15" cy="25" r="5" fill="#4da6ff"/> <circle cx="45" cy="25" r="5" fill="#4da6ff"/>
                            <circle cx="45" cy="55" r="5" fill="#4da6ff"/> <circle cx="15" cy="55" r="5" fill="#4da6ff"/>

                            <line x1="15" y1="10" x2="45" y2="10" stroke="#aaa" stroke-width="1.5"/>
                            <line x1="15" y1="5" x2="15" y2="15" stroke="#aaa" stroke-width="1.5"/>
                            <line x1="45" y1="5" x2="45" y2="15" stroke="#aaa" stroke-width="1.5"/>
                            <text x="30" y="5" fill="#fff" font-size="14" text-anchor="middle" font-weight="900" style="text-shadow: 0px 1px 2px #000;">d</text>
                        </svg>
                        <div style="font-size:0.7rem; color:#aaa; margin-bottom:2px;">Cuádruplex</div>
                        <span class="math-latex-render" data-expr="1.09\sqrt[4]{D_s d^3}" style="font-size:0.8rem;"></span>
                    </div>
                </div>

                <div class="interactive-formula" onclick="toggleDerivation('req-content-detailed', 'req-icon-detailed')" style="border-color:#4da6ff; cursor:pointer;">

                    <div class="if-header" style="justify-content:space-between; align-items:center; display:flex;">
                        <div style="display:flex; flex-direction:column;">
                            <span style="font-size:0.7rem; color:#aaa; text-transform:uppercase; letter-spacing:1px;">Caso General</span>
                            <div style="margin-top:5px;">
                                <span class="math-latex-render" data-expr="R_{eq} = \sqrt[n]{n \cdot r \cdot R^{n-1}}" style="color:#fff; font-size: 1.1rem;"></span>
                            </div>
                        </div>
                        <span id="req-icon-detailed" class="if-icon" style="color:#4da6ff; font-size: 1.2rem;">▼</span>
                    </div>

                    <div id="req-content-detailed" class="if-content">



                            <div class="scrolling-wrapper-detailed">

                                <svg style="display: none;">
                                    <defs>
                                        <marker id="arrowRed" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
                                            <path d="M0,0 L0,6 L9,3 z" fill="#ff3333" />
                                        </marker>
                                        <marker id="arrowRedRev" markerWidth="10" markerHeight="10" refX="1" refY="3" orient="auto" markerUnits="strokeWidth">
                                            <path d="M10,0 L10,6 L1,3 z" fill="#ff3333" />
                                        </marker>
                                    </defs>
                                </svg>

                                <div class="detailed-scroll-card">
                                    <div style="color:#fff; font-size:0.85rem; font-weight:bold; border-bottom:1px solid #333; padding-bottom:8px;">
                                        1 CONDUCTOR POR FASE
                                    </div>

                                    <div class="card-layout-row">
                                        <div class="svg-container-detailed">
                                            <svg viewBox="0 0 140 140" width="140" height="140" style="overflow:visible;">
                                                <circle cx="70" cy="70" r="40" fill="none" stroke="#ff3333" stroke-width="2.5"/>
                                                <circle cx="70" cy="70" r="4" class="svg-center-point"/>
                                                <line x1="70" y1="70" x2="106" y2="42" class="svg-dim-line" marker-end="url(#arrowRed)"/>
                                                <text x="85" y="50" class="svg-dim-text" transform="rotate(-38 85 50)">r = R</text>
                                            </svg>
                                        </div>

                                        <div class="math-container-detailed">
                                            <div class="math-step-box">
                                                <span style="color:#aaa; font-size:0.7rem;">Datos:</span><br>
                                                <span class="math-latex-render" style="font-size:0.8rem; color:#ccc;" data-expr="n=1, \quad R=r"></span>
                                            </div>
                                            <div class="math-step-box">
                                                <span style="color:#aaa; font-size:0.7rem;">Sustitución:</span><br>
                                                <span class="math-latex-render" style="font-size:0.8rem; color:#ccc;" data-expr="R_{eq} = \sqrt[1]{1 \cdot r \cdot R^{1-1}}"></span>
                                            </div>
                                            <div class="math-step-box">
                                                <span class="math-latex-render" style="font-size:0.8rem; color:#ccc;" data-expr="R_{eq} = 1 \cdot r \cdot R^0"></span>
                                            </div>
                                            <div class="math-step-box final-result-box">
                                                <span class="math-latex-render" style="font-size:1rem; color:#4da6ff;" data-expr="R_{eq} = r"></span>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div style="margin-top: 15px; border-top: 1px dashed rgba(77, 166, 255, 0.3); padding-top: 15px;">

                                <div class="detailed-scroll-card">
                                    <div style="color:#fff; font-size:0.85rem; font-weight:bold; border-bottom:1px solid #333; padding-bottom:8px;">
                                        2 CONDUCTORES (DÚPLEX)
                                    </div>

                                    <div class="card-layout-row">
                                        <div class="svg-container-detailed">
                                            <svg viewBox="0 0 160 140" width="160" height="140" style="overflow:visible;">
                                                <circle cx="80" cy="60" r="40" class="svg-circum-circle"/>
                                                <circle cx="80" cy="60" r="4" class="svg-center-point"/>
                                                <circle cx="40" cy="60" r="10" class="svg-conductor"/>
                                                <circle cx="120" cy="60" r="10" class="svg-conductor"/>
                                                <line x1="80" y1="60" x2="120" y2="60" class="svg-dim-line" marker-end="url(#arrowRed)"/>
                                                <text x="95" y="55" class="svg-dim-text">R</text>
                                                <line x1="40" y1="60" x2="32" y2="54" class="svg-r-small-line"/>
                                                <text x="25" y="55" font-size="10" fill="#000">r</text>

                                                <line x1="40" y1="110" x2="120" y2="110" class="svg-dim-line" marker-start="url(#arrowRedRev)" marker-end="url(#arrowRed)"/>
                                                <line x1="40" y1="75" x2="40" y2="118" stroke="#ff3333" stroke-width="0.5" stroke-dasharray="2,2"/>
                                                <line x1="120" y1="75" x2="120" y2="118" stroke="#ff3333" stroke-width="0.5" stroke-dasharray="2,2"/>
                                                <text x="80" y="125" class="svg-dim-text" text-anchor="middle">d</text>
                                            </svg>
                                        </div>

                                        <div class="math-container-detailed">
                                            <div class="math-step-box geo-relation-box">
                                                <span style="color:#ff3333; font-size:0.65rem; font-weight:bold;">Relación Geométrica:</span><br>
                                                <span class="math-latex-render" style="font-size:0.8rem; color:#ff3333;" data-expr="R = d/2"></span>
                                            </div>
                                            <div class="math-step-box">
                                                <span style="color:#aaa; font-size:0.7rem;">Datos:</span>
                                                <span class="math-latex-render" style="font-size:0.75rem; color:#ccc;" data-expr="n=2"></span>
                                            </div>
                                            <div class="math-step-box">
                                                <span style="color:#aaa; font-size:0.7rem;">Sustitución:</span><br>
                                                <span class="math-latex-render" style="font-size:0.8rem; color:#ccc;" data-expr="R_{eq} = \sqrt[2]{2 \cdot r \cdot (d/2)^{2-1}}"></span>
                                            </div>
                                            <div class="math-step-box">
                                                <span style="color:#aaa; font-size:0.7rem;">Simplificando:</span><br>
                                                <span class="math-latex-render" style="font-size:0.8rem; color:#ccc;" data-expr="R_{eq} = \sqrt{2 \cdot r \cdot (d/2)}"></span>
                                            </div>
                                            <div class="math-step-box final-result-box">
                                                <span class="math-latex-render" style="font-size:1rem; color:#4da6ff;" data-expr="R_{eq} = \sqrt{r \cdot d}"></span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                </div>

                                <div style="margin-top: 15px; border-top: 1px dashed rgba(77, 166, 255, 0.3); padding-top: 15px;">

                                <div class="detailed-scroll-card">
                                    <div style="color:#fff; font-size:0.85rem; font-weight:bold; border-bottom:1px solid #333; padding-bottom:8px;">
                                        3 CONDUCTORES (TRÍPLEX)
                                    </div>

                                    <div class="card-layout-row">
                                        <div class="svg-container-detailed">
                                            <svg viewBox="0 0 160 160" width="160" height="160" style="overflow:visible;">
                                                <circle cx="80" cy="70" r="45" class="svg-circum-circle"/>
                                                <circle cx="80" cy="70" r="4" class="svg-center-point"/>
                                                <circle cx="80" cy="25" r="9" class="svg-conductor"/>
                                                <circle cx="41" cy="92.5" r="9" class="svg-conductor"/>
                                                <circle cx="119" cy="92.5" r="9" class="svg-conductor"/>

                                                <polygon points="80,25 41,92.5 119,92.5" fill="none" stroke="#ff3333" stroke-width="0.5" stroke-dasharray="2,2" opacity="0.5"/>

                                                <line x1="80" y1="70" x2="80" y2="25" class="svg-dim-line" marker-end="url(#arrowRed)"/>
                                                <text x="85" y="50" class="svg-dim-text">R</text>

                                                <line x1="41" y1="125" x2="119" y2="125" class="svg-dim-line" marker-start="url(#arrowRedRev)" marker-end="url(#arrowRed)"/>
                                                <line x1="41" y1="105" x2="41" y2="130" stroke="#ff3333" stroke-width="0.5" stroke-dasharray="2,2"/>
                                                <line x1="119" y1="105" x2="119" y2="130" stroke="#ff3333" stroke-width="0.5" stroke-dasharray="2,2"/>
                                                <text x="80" y="140" class="svg-dim-text" text-anchor="middle">d</text>
                                            </svg>
                                        </div>

                                        <div class="math-container-detailed">
                                            <div class="math-step-box geo-relation-box">
                                                <span style="color:#ff3333; font-size:0.65rem; font-weight:bold;">Relación Geométrica (Centroide):</span><br>
                                                <span class="math-latex-render" style="font-size:0.8rem; color:#ff3333;" data-expr="R = \frac{d}{\sqrt{3}} = \frac{\sqrt{3}d}{3}"></span>
                                            </div>
                                            <div class="math-step-box">
                                                <span style="color:#aaa; font-size:0.7rem;">Datos:</span>
                                                <span class="math-latex-render" style="font-size:0.75rem; color:#ccc;" data-expr="n=3"></span>
                                            </div>
                                            <div class="math-step-box">
                                                <span style="color:#aaa; font-size:0.7rem;">Sustitución:</span><br>
                                                <span class="math-latex-render" style="font-size:0.75rem; color:#ccc;" data-expr="R_{eq} = \sqrt[3]{3 \cdot r \cdot (\frac{\sqrt{3}d}{3})^{3-1}}"></span>
                                            </div>
                                            <div class="math-step-box">
                                                <span style="color:#aaa; font-size:0.7rem;">Simplificando el cuadrado:</span><br>
                                                <span class="math-latex-render" style="font-size:0.75rem; color:#ccc;" data-expr="R_{eq} = \sqrt[3]{3 \cdot r \cdot (\frac{3d^2}{9})} = \sqrt[3]{3 \cdot r \cdot \frac{d^2}{3}}"></span>
                                            </div>
                                            <div class="math-step-box final-result-box">
                                                <span class="math-latex-render" style="font-size:1rem; color:#4da6ff;" data-expr="R_{eq} = \sqrt[3]{r \cdot d^2}"></span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                </div>

                                <div style="margin-top: 15px; border-top: 1px dashed rgba(77, 166, 255, 0.3); padding-top: 15px;">

                                <div class="detailed-scroll-card">
                                    <div style="color:#fff; font-size:0.85rem; font-weight:bold; border-bottom:1px solid #333; padding-bottom:8px;">
                                        4 CONDUCTORES (CUÁDRUPLEX)
                                    </div>

                                    <div class="card-layout-row">
                                        <div class="svg-container-detailed">
                                            <svg viewBox="0 0 160 160" width="160" height="160" style="overflow:visible;">
                                                <circle cx="80" cy="70" r="50" class="svg-circum-circle"/>
                                                <circle cx="80" cy="70" r="4" class="svg-center-point"/>
                                                <circle cx="45" cy="35" r="9" class="svg-conductor"/>
                                                <circle cx="115" cy="35" r="9" class="svg-conductor"/>
                                                <circle cx="115" cy="105" r="9" class="svg-conductor"/>
                                                <circle cx="45" cy="105" r="9" class="svg-conductor"/>

                                                <polygon points="45,35 115,35 115,105 45,105" fill="none" stroke="#ff3333" stroke-width="0.5" stroke-dasharray="2,2" opacity="0.5"/>
                                                <line x1="45" y1="35" x2="115" y2="105" stroke="#ff3333" stroke-width="0.5" opacity="0.3"/>
                                                <line x1="115" y1="35" x2="45" y2="105" stroke="#ff3333" stroke-width="0.5" opacity="0.3"/>

                                                <line x1="80" y1="70" x2="115" y2="35" class="svg-dim-line" marker-end="url(#arrowRed)"/>
                                                <text x="100" y="50" class="svg-dim-text">R</text>

                                                <line x1="45" y1="135" x2="115" y2="135" class="svg-dim-line" marker-start="url(#arrowRedRev)" marker-end="url(#arrowRed)"/>
                                                <line x1="45" y1="115" x2="45" y2="140" stroke="#ff3333" stroke-width="0.5" stroke-dasharray="2,2"/>
                                                <line x1="115" y1="115" x2="115" y2="140" stroke="#ff3333" stroke-width="0.5" stroke-dasharray="2,2"/>
                                                <text x="80" y="150" class="svg-dim-text" text-anchor="middle">d</text>
                                            </svg>
                                        </div>

                                        <div class="math-container-detailed">
                                            <div class="math-step-box geo-relation-box">
                                                <span style="color:#ff3333; font-size:0.65rem; font-weight:bold;">Relación Geométrica (Semidiagonal):</span><br>
                                                <span class="math-latex-render" style="font-size:0.8rem; color:#ff3333;" data-expr="R = \frac{\sqrt{2}d}{2}"></span>
                                            </div>
                                            <div class="math-step-box">
                                                <span style="color:#aaa; font-size:0.7rem;">Datos:</span>
                                                <span class="math-latex-render" style="font-size:0.75rem; color:#ccc;" data-expr="n=4"></span>
                                            </div>
                                            <div class="math-step-box">
                                                <span style="color:#aaa; font-size:0.7rem;">Sustitución:</span><br>
                                                <span class="math-latex-render" style="font-size:0.7rem; color:#ccc;" data-expr="R_{eq} = \sqrt[4]{4 \cdot r \cdot (\frac{\sqrt{2}d}{2})^{4-1}}"></span>
                                            </div>
                                            <div class="math-step-box">
                                                <span style="color:#aaa; font-size:0.7rem;">Operando el cubo:</span><br>
                                                <span class="math-latex-render" style="font-size:0.7rem; color:#ccc;" data-expr="R_{eq} = \sqrt[4]{4 \cdot r \cdot (\frac{2\sqrt{2}d^3}{8})} = \sqrt[4]{4 \cdot r \cdot \frac{\sqrt{2}d^3}{4}}"></span>
                                            </div>
                                            <div class="math-step-box final-result-box">
                                                <span class="math-latex-render" style="font-size:0.9rem; color:#4da6ff;" data-expr="R_{eq} = \sqrt[4]{\sqrt{2} \cdot r \cdot d^3} \approx 1.09\sqrt[4]{r d^3}"></span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                </div>

                            </div>

                            <div style="margin-top:15px; font-size:0.7rem; color:#888; text-align:center; font-style:italic; border-top: 1px solid #333; padding-top: 10px;">
                                <b>r</b> = radio del conductor  <b>d</b> = distancia entre centros de conductores adyacentes.
                            </div>
                    </div>
                </div>

                <div class="t-section-title" style="color:#e91e63; border-color:#e91e63;">CASO ASIMÉTRICO & PROMEDIO ENTRE FASES</div>

                <div class="interactive-formula" onclick="toggleDerivation('deriv-gen-final-v2')" style="border-color:#e91e63; cursor:pointer;">

                    <div class="if-header" style="justify-content:space-between; align-items:center; display:flex;">
                        <div style="display:flex; flex-direction:column; width: 100%;">
                            <span style="font-size:0.7rem; color:#e91e63; font-weight:bold; letter-spacing:1px; margin-bottom: 5px;">MÉTODO DE DISTANCIAS MEDIAS (RMG)</span>

                            <div style="display:flex; align-items:center; justify-content:space-between;">
                                <div style="overflow-x: auto; white-space: nowrap; padding-bottom: 8px; overflow-y:hidden;">
                                    <span class="math-latex-render" data-expr="D_{s}^{b} = \sqrt[n^2]{ (\underbrace{\text{Propios}}_{n \text{ veces}}) \cdot (\underbrace{\text{Mutuos}}_{n^2-n \text{ veces}}) }" style="color:#fff; font-size: 1.2rem;"></span>
                                </div>
                                <span id="gen-icon-final-v2" class="if-icon" style="color:#e91e63; font-size: 1.2rem; margin-left:10px;">▼</span>
                            </div>
                        </div>
                    </div>

                    <div id="deriv-gen-final-v2" class="if-content">

                        <p style="color:#ccc; font-size:0.85rem; margin-bottom:15px; border-bottom:1px solid #444; padding-bottom:10px;">
                            Para disposiciones asimétricas o complejas, olvidamos la geometría simple y aplicamos fuerza bruta matemática: <b>multiplicar todas las distancias posibles</b>.
                        </p>

                        <div style="margin-bottom:20px;">
                            <div style="font-size:0.75rem; color:#aaa; margin-bottom:8px; text-transform:uppercase; letter-spacing:1px;">
                                1. Desglose de los Términos
                            </div>

                            <div style="background:rgba(0,0,0,0.2); border-radius:8px; padding:15px; border:1px solid #444; display:grid; grid-template-columns: 1fr 1fr; gap:10px;">

                                <div style="text-align:center; padding-right:10px; border-right:1px dashed #555;">
                                    <div style="color:#e91e63; font-weight:bold; font-size:2rem; line-height:1;">n</div>
                                    <div style="font-size:0.7rem; color:#fff; font-weight:bold; margin-bottom:5px;">Términos Propios</div>
                                    <div style="font-size:0.65rem; color:#aaa; line-height:1.3;">
                                        Es el conductor consigo mismo.<br>
                                        Se usa su <b style="color:#e91e63">RMG propio (r')</b>.
                                    </div>
                                </div>

                                <div style="text-align:center;">
                                    <div style="color:#ccc; font-weight:bold; font-size:2rem; line-height:1;">n²-n</div>
                                    <div style="font-size:0.7rem; color:#fff; font-weight:bold; margin-bottom:2px;">Distancias Mutuas</div>

                                    <div style="font-size:0.6rem; color:#e91e63; background:rgba(233, 30, 99, 0.1); padding:2px 5px; border-radius:4px; margin-bottom:5px; display:inline-block;">
                                        (Total <span class="math-latex-render" data-expr="n^2"></span> - <span class="math-latex-render" data-expr="n"></span> propios)
                                    </div>

                                    <div style="font-size:0.65rem; color:#aaa; line-height:1.3;">
                                        Distancias físicas entre conductores diferentes <br>(<span class="math-latex-render" data-expr="d_{12}, d_{13}..."></span>).
                                    </div>
                                </div>

                            </div>

                            <div style="margin-top:10px; text-align:center;">
                                <div style="display:inline-block; background:#e91e63; color:white; padding:3px 10px; border-radius:4px; font-size:0.75rem; font-weight:bold;">
                                    Total Términos = <span class="math-latex-render" data-expr="n \times n = n^2"></span>
                                </div>
                                <div style="font-size:0.65rem; color:#e91e63; margin-top:3px;">
                                    (Este es el índice de la raíz)
                                </div>
                            </div>
                        </div>

                        <div style="margin-bottom:20px;">
                            <svg viewBox="0 0 300 120" width="100%" height="auto" style="overflow:visible;">
                                <defs>
                                    <marker id="arrowGenV2" markerWidth="6" markerHeight="6" refX="5" refY="3" orient="auto">
                                        <path d="M0,0 L6,3 L0,6" fill="none" stroke="#e91e63" stroke-width="1" />
                                    </marker>
                                </defs>

                                <circle cx="50" cy="60" r="15" fill="#222" stroke="#e91e63" stroke-width="2"/>
                                <text x="50" y="65" fill="#fff" font-weight="bold" text-anchor="middle">1</text>

                                <path d="M 40 50 Q 20 20 50 42" fill="none" stroke="#e91e63" stroke-width="1.5" marker-end="url(#arrowGenV2)"/>
                                <text x="30" y="30" fill="#e91e63" font-size="10" font-weight="bold">r'</text>

                                <circle cx="150" cy="30" r="15" fill="#222" stroke="#aaa" stroke-width="2"/>
                                <text x="150" y="35" fill="#fff" font-weight="bold" text-anchor="middle">2</text>

                                <circle cx="250" cy="60" r="15" fill="#222" stroke="#aaa" stroke-width="2"/>
                                <text x="250" y="65" fill="#fff" font-weight="bold" text-anchor="middle">3</text>

                                <line x1="65" y1="60" x2="235" y2="60" stroke="#aaa" stroke-width="1" stroke-dasharray="4,2"/>
                                <text x="150" y="75" fill="#aaa" font-size="10" text-anchor="middle">d13</text>

                                <line x1="62" y1="52" x2="138" y2="35" stroke="#aaa" stroke-width="1" stroke-dasharray="4,2"/>
                                <text x="90" y="40" fill="#aaa" font-size="10" text-anchor="middle">d12</text>

                                <text x="150" y="100" fill="#ccc" font-size="10" text-anchor="middle" font-style="italic">
                                    Se repite el proceso para cada conductor
                                </text>
                            </svg>
                        </div>

                        <div style="border-top: 1px dashed #555; padding-top: 15px; margin-top: 15px;">

                            <div style="display:flex; align-items:center; gap:10px; margin-bottom:10px;">
                                <span style="font-size:1.2rem;">⚡</span>
                                <span style="color:#fff; font-weight:bold; font-size:0.8rem;">PARA SISTEMAS TRIFÁSICOS (IMPORTANTE)</span>
                            </div>

                            <p style="color:#ccc; font-size:0.75rem; line-height:1.4; margin-bottom:10px;">
                                En líneas reales, cada fase (A, B, C) puede tener una geometría diferente, resultando en RMGs distintos (<span class="math-latex-render" data-expr="RMG_A, RMG_B, RMG_C"></span>).
                                <br><br>
                                Para usar la fórmula de Inductancia final, debemos hallar el <b>promedio geométrico</b> de las tres fases.
                            </p>

                            <div style="background:rgba(255, 255, 255, 0.05); border-left:3px solid #e91e63; padding:10px; border-radius:0 4px 4px 0;">
                                <div style="overflow-x: auto; white-space: nowrap; text-align:center; margin-bottom:5px;">
                                    <span class="math-latex-render" data-expr="RMG_{total} = \sqrt[3]{RMG_A \cdot RMG_B \cdot RMG_C}"></span>
                                </div>
                            </div>

                        </div>

                    </div>
                </div>
            </div>

            <div class="t-card" style="border: 1px solid #ff9100; background: linear-gradient(180deg, rgba(255, 145, 0, 0.05) 0%, rgba(0,0,0,0) 100%);">

                <div class="t-section-title" style="color:#ff9100; border-color:#ff9100;">
                    <span style="margin-right:5px;"> DIFERENCIA CRÍTICA: L vs C</span>
                </div>

                <p style="color:#ccc; font-size:0.8rem; margin-bottom:15px;">
                    El cálculo del RMG del haz (<span class="math-latex-render" data-expr="D_s^b"></span>) cambia según si calculamos Inductancia o Capacitancia.
                </p>

                <div style="display:grid; grid-template-columns: 1fr 1fr; gap:10px;">

                    <div style="background:rgba(0, 230, 118, 0.1); border:1px solid rgba(0, 230, 118, 0.3); border-radius:6px; padding:10px; text-align:center;">
                        <div style="color:#00e676; font-weight:bold; font-size:0.8rem; margin-bottom:5px;">INDUCTANCIA</div>
                        <div style="font-size:0.7rem; color:#aaa;">Flujo penetra conductor</div>

                        <div style="margin:10px 0; border-bottom:1px solid rgba(255,255,255,0.1); padding-bottom:5px;">
                            <span class="math-latex-render" data-expr="D_s = r \cdot 0.7788"></span>
                        </div>

                        <div style="font-size:0.7rem; color:#fff;">
                            Se usa RMG real (<span class="math-latex-render" data-expr="r'"></span>)
                        </div>
                    </div>

                    <div style="background:rgba(77, 166, 255, 0.1); border:1px solid rgba(77, 166, 255, 0.3); border-radius:6px; padding:10px; text-align:center;">
                        <div style="color:#4da6ff; font-weight:bold; font-size:0.8rem; margin-bottom:5px;">CAPACITANCIA</div>
                        <div style="font-size:0.7rem; color:#aaa;">Campo muere en superficie</div>

                        <div style="margin:10px 0; border-bottom:1px solid rgba(255,255,255,0.1); padding-bottom:5px;">
                            <span class="math-latex-render" data-expr="D_s = r"></span>
                        </div>

                        <div style="font-size:0.7rem; color:#fff;">
                            Se usa Radio Exterior
                        </div>
                    </div>

                </div>

                <div style="margin-top:15px; background:rgba(0,0,0,0.3); padding:8px; border-radius:4px; font-size:0.75rem; text-align:center; color:#ddd;">
                    Para el haz, sustituir <span class="math-latex-render" data-expr="D_s"></span> en las fórmulas de arriba según el caso.
                </div>

            </div>
        </div>

        <div id="content-dmg" class="theory-section">
            <h2 class="t-main-title" style="color:#ffcc00;">DISTANCIA MEDIA GEOMÉTRICA </h2>
            <p class="t-desc">La separación "efectiva" entre fases que determina el flujo mutuo.</p>

            <div class="t-card" style="border: 1px solid #ffcc00; background: linear-gradient(180deg, rgba(255, 204, 0, 0.05) 0%, rgba(0,0,0,0) 100%);">
                <div class="t-section-title" style="color:#ffcc00; border-color:#ffcc00;">PRINCIPIO FÍSICO</div>

                <div style="display:flex; flex-direction: column; gap: 15px;">
                    <p style="color:#ccc; font-size:0.85rem; line-height:1.5;">
                        Representa la distancia promedio logarítmica entre los conductores de una fase (ida) y los de otra fase (retorno/mutua).
                    </p>

                    <div style="text-align:center;">
                        <svg viewBox="0 0 320 140" width="100%" height="auto" style="background:rgba(0,0,0,0.2); border-radius:8px; border:1px solid #444;">
                            <defs>
                                <marker id="arrowYellow" markerWidth="6" markerHeight="6" refX="5" refY="3" orient="auto">
                                    <path d="M0,0 L6,3 L0,6" fill="none" stroke="#ffcc00" stroke-width="1" />
                                </marker>
                            </defs>

                            <rect x="40" y="20" width="40" height="100" rx="20" fill="none" stroke="#fff" stroke-dasharray="3,2" opacity="0.3"/>
                            <text x="60" y="15" fill="#fff" font-size="9" text-anchor="middle" font-weight="bold">Fase A (n)</text>

                            <circle cx="60" cy="35" r="7" fill="#333" stroke="#fff" stroke-width="1.5"/>
                            <text x="60" y="38" fill="#fff" font-size="7" text-anchor="middle">1</text>

                            <text x="60" y="70" fill="#fff" font-size="12" text-anchor="middle" style="font-family:serif;">⋮</text>

                            <circle cx="60" cy="105" r="7" fill="#333" stroke="#fff" stroke-width="1.5"/>
                            <text x="60" y="108" fill="#fff" font-size="7" text-anchor="middle">n</text>


                            <rect x="240" y="20" width="40" height="100" rx="20" fill="none" stroke="#ffcc00" stroke-dasharray="3,2" opacity="0.3"/>
                            <text x="260" y="15" fill="#ffcc00" font-size="9" text-anchor="middle" font-weight="bold">Fase B (m)</text>

                            <circle cx="260" cy="35" r="7" fill="#333" stroke="#ffcc00" stroke-width="1.5"/>
                            <text x="260" y="38" fill="#ffcc00" font-size="7" text-anchor="middle">1</text>

                            <circle cx="260" cy="65" r="7" fill="#333" stroke="#ffcc00" stroke-width="1.5"/>
                            <text x="260" y="68" fill="#ffcc00" font-size="7" text-anchor="middle">2</text>

                            <text x="260" y="88" fill="#ffcc00" font-size="12" text-anchor="middle" style="font-family:serif;">⋮</text>

                            <circle cx="260" cy="105" r="7" fill="#333" stroke="#ffcc00" stroke-width="1.5"/>
                            <text x="260" y="108" fill="#ffcc00" font-size="7" text-anchor="middle">m</text>


                            <line x1="67" y1="35" x2="253" y2="35" stroke="#ffcc00" stroke-width="0.5" opacity="0.5"/> <line x1="67" y1="35" x2="253" y2="65" stroke="#ffcc00" stroke-width="0.5" opacity="0.5"/> <line x1="67" y1="35" x2="253" y2="105" stroke="#ffcc00" stroke-width="0.5" opacity="0.3"/> <line x1="67" y1="105" x2="253" y2="35" stroke="#ffcc00" stroke-width="0.5" opacity="0.3"/> <line x1="67" y1="105" x2="253" y2="65" stroke="#ffcc00" stroke-width="0.5" opacity="0.5"/> <line x1="67" y1="105" x2="253" y2="105" stroke="#ffcc00" stroke-width="0.5" opacity="0.5"/> <text x="160" y="130" fill="#aaa" font-size="9" text-anchor="middle">
                            Se multiplican <tspan fill="#fff" font-weight="bold">n × m</tspan> distancias
                        </text>
                        </svg>
                    </div>

                    <div class="interactive-formula" onclick="toggleDerivation('deriv-concept-dmg')" style="border-color:#ffcc00; cursor:pointer;">

                        <div class="if-header" style="flex-direction:column; align-items: stretch; padding: 15px;">

                            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:10px;">
                                <span style="font-size:0.7rem; color:#aaa; font-weight:bold; letter-spacing:1px;">FÓRMULA GENERAL</span>
                                <span class="if-icon" style="color:#ffcc00; font-size:1.2rem;">▼</span>
                            </div>

                            <div style="text-align:center;">
                                <span class="math-latex-render" data-expr="D_{m} = \sqrt[nm]{\prod_{i=1}^{n} \prod_{j=1}^{m} D_{ij}}" style="font-size:1.4rem; color:#fff;"></span>
                            </div>

                        </div>

                        <div id="deriv-concept-dmg" class="if-content">
                            <div style="border-top:1px dashed #555; padding-top:15px; margin-top:5px;">

                                <p style="font-size:0.75rem; color:#ccc; margin-bottom:15px; text-align:center;">
                                    <b>Ejemplo Visual:</b> Fase A (2 cond.) vs Fase B (3 cond.)
                                </p>

                                <div style="text-align:center; margin-bottom:15px;">
                                    <svg viewBox="0 0 300 160" width="100%" height="auto" style="background:rgba(0,0,0,0.3); border-radius:8px; border:1px solid #444;">

                                        <rect x="30" y="20" width="60" height="120" rx="10" fill="none" stroke="#fff" stroke-dasharray="3,2" opacity="0.3"/>
                                        <text x="60" y="15" fill="#fff" font-size="9" text-anchor="middle" font-weight="bold">Fase A</text>

                                        <circle cx="60" cy="50" r="8" fill="#333" stroke="#fff" stroke-width="1.5"/>
                                        <text x="60" y="53" fill="#fff" font-size="8" text-anchor="middle">a1</text>

                                        <circle cx="60" cy="110" r="8" fill="#333" stroke="#fff" stroke-width="1.5"/>
                                        <text x="60" y="113" fill="#fff" font-size="8" text-anchor="middle">a2</text>


                                        <rect x="210" y="20" width="60" height="120" rx="10" fill="none" stroke="#ffcc00" stroke-dasharray="3,2" opacity="0.3"/>
                                        <text x="240" y="15" fill="#ffcc00" font-size="9" text-anchor="middle" font-weight="bold">Fase B</text>

                                        <circle cx="240" cy="35" r="8" fill="#333" stroke="#ffcc00" stroke-width="1.5"/>
                                        <text x="240" y="38" fill="#ffcc00" font-size="8" text-anchor="middle">b1</text>

                                        <circle cx="240" cy="80" r="8" fill="#333" stroke="#ffcc00" stroke-width="1.5"/>
                                        <text x="240" y="83" fill="#ffcc00" font-size="8" text-anchor="middle">b2</text>

                                        <circle cx="240" cy="125" r="8" fill="#333" stroke="#ffcc00" stroke-width="1.5"/>
                                        <text x="240" y="128" fill="#ffcc00" font-size="8" text-anchor="middle">b3</text>


                                        <line x1="68" y1="50" x2="232" y2="35" stroke="#ffcc00" stroke-width="0.5" opacity="0.5"/>
                                        <line x1="68" y1="50" x2="232" y2="80" stroke="#ffcc00" stroke-width="0.5" opacity="0.5"/>
                                        <line x1="68" y1="50" x2="232" y2="125" stroke="#ffcc00" stroke-width="0.5" opacity="0.5"/>

                                        <line x1="68" y1="110" x2="232" y2="35" stroke="#ffcc00" stroke-width="0.5" opacity="0.5"/>
                                        <line x1="68" y1="110" x2="232" y2="80" stroke="#ffcc00" stroke-width="0.5" opacity="0.5"/>
                                        <line x1="68" y1="110" x2="232" y2="125" stroke="#ffcc00" stroke-width="0.5" opacity="0.5"/>

                                        <rect x="115" y="72" width="70" height="16" rx="4" fill="#000" opacity="0.8"/>
                                        <text x="150" y="83" fill="#aaa" font-size="9" text-anchor="middle">6 Distancias</text>

                                    </svg>
                                </div>

                                <div style="background:rgba(255, 204, 0, 0.1); border-radius:6px; padding:10px; text-align:center;">
                                    <div style="display:grid; grid-template-columns: 1fr 1fr; gap:10px; border-bottom:1px solid rgba(255,255,255,0.1); padding-bottom:8px; margin-bottom:8px;">
                                        <div>
                                            <span style="font-size:0.7rem; color:#aaa;">Índice Raíz (n×m)</span>
                                            <div style="color:#fff; font-weight:bold;">2 × 3 = 6</div>
                                        </div>
                                        <div>
                                            <span style="font-size:0.7rem; color:#aaa;">Términos</span>
                                            <div style="color:#fff; font-weight:bold;">6 distancias</div>
                                        </div>
                                    </div>

                                    <div style="overflow-x:auto; white-space:nowrap; padding-bottom:5px; text-align: left;">
                                        <span class="math-latex-render" data-expr="D_{AB} = \sqrt[6]{ (d_{a_1b_1}d_{a_1b_2}d_{a_1b_3}) \cdot (d_{a_2b_1}d_{a_2b_2}d_{a_2b_3}) }" style="font-size:0.9rem;"></span>
                                    </div>

                                    <div style="margin-top:5px; font-size:0.65rem; color:#aaa; font-style:italic;">
                                        *Cada conductor de A se conecta con todos los de B.
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="t-card">
                <div class="t-section-title" style="color:#fff; border-color:#fff;">LÍNEAS TRIFÁSICAS (SIMPLE TERNA)</div>

                <div style="display:grid; grid-template-columns: 1fr 1.5fr; gap:10px; align-items:center; margin-bottom:15px;">
                    <div style="font-size:0.8rem; color:#ccc;">
                        En líneas <b>transpuestas</b>, buscamos la media geométrica de las posiciones para equilibrar las fases.
                    </div>

                    <svg viewBox="0 0 150 100" width="100%" height="auto" style="overflow:visible;">
                        <circle cx="20" cy="30" r="6" fill="#4da6ff" stroke="#fff" stroke-width="1"/>
                        <text x="20" y="15" fill="#4da6ff" font-size="10" text-anchor="middle" font-weight="bold">1</text>

                        <circle cx="75" cy="30" r="6" fill="#4da6ff" stroke="#fff" stroke-width="1"/>
                        <text x="75" y="15" fill="#4da6ff" font-size="10" text-anchor="middle" font-weight="bold">2</text>

                        <circle cx="130" cy="30" r="6" fill="#4da6ff" stroke="#fff" stroke-width="1"/>
                        <text x="130" y="15" fill="#4da6ff" font-size="10" text-anchor="middle" font-weight="bold">3</text>

                        <line x1="20" y1="30" x2="75" y2="30" stroke="#aaa" stroke-width="1" stroke-dasharray="2,2"/>
                        <text x="47" y="45" fill="#aaa" font-size="8" text-anchor="middle">D12</text>

                        <line x1="75" y1="30" x2="130" y2="30" stroke="#aaa" stroke-width="1" stroke-dasharray="2,2"/>
                        <text x="102" y="45" fill="#aaa" font-size="8" text-anchor="middle">D23</text>

                        <path d="M 20 38 Q 75 70 130 38" fill="none" stroke="#aaa" stroke-width="1" stroke-dasharray="2,2"/>
                        <text x="75" y="65" fill="#aaa" font-size="8" text-anchor="middle">D31</text>
                    </svg>
                </div>

                <div class="interactive-formula" onclick="toggleDerivation('deriv-tri')">
                    <div class="if-header" style="justify-content:space-between;">
                        <span class="math-latex-render" data-expr="D_{eq} = \sqrt[3]{D_{12} \cdot D_{23} \cdot D_{31}}" style="font-size:1rem;"></span>
                        <span class="if-icon">▼</span>
                    </div>
                    <div id="deriv-tri" class="if-content">
                        <div class="model-conditions" style="border-left-color:#fff; margin-top:5px;">
                            <div style="font-size:0.75rem; color:#fff; font-weight:bold; margin-bottom:5px;">Caso Especial: Equilátero</div>

                            <div style="display:overflow x; align-items:center; gap:15px;">
                                <div style="flex:0 0 80px;">
                                    <svg viewBox="0 0 100 90" width="80" height="72" style="overflow:visible;">
                                        <defs>
                                            <marker id="arrowEq" markerWidth="4" markerHeight="4" refX="2" refY="2" orient="auto">
                                                <path d="M0,0 L4,2 L0,4" fill="none" stroke="#00e676" stroke-width="1"/>
                                            </marker>
                                        </defs>

                                        <circle cx="50" cy="10" r="4" fill="#333" stroke="#fff" stroke-width="1.5"/>
                                        <circle cx="10" cy="80" r="4" fill="#333" stroke="#fff" stroke-width="1.5"/>
                                        <circle cx="90" cy="80" r="4" fill="#333" stroke="#fff" stroke-width="1.5"/>

                                        <line x1="50" y1="10" x2="10" y2="80" stroke="#00e676" stroke-width="1.5"/>
                                        <text x="20" y="45" fill="#00e676" font-size="10" font-weight="bold">D</text>

                                        <line x1="50" y1="10" x2="90" y2="80" stroke="#00e676" stroke-width="1.5"/>
                                        <text x="75" y="45" fill="#00e676" font-size="10" font-weight="bold">D</text>

                                        <line x1="10" y1="80" x2="90" y2="80" stroke="#00e676" stroke-width="1.5"/>
                                        <text x="50" y="75" fill="#00e676" font-size="10" font-weight="bold" text-anchor="middle" style="background:#000;">D</text>
                                    </svg>
                                </div>

                                <div style="flex:1;">
                                    <div style="font-size:0.7rem; color:#ccc; margin-bottom:5px;">
                                        Si las distancias son iguales:
                                        <br>
                                        <span class="math-latex-render" data-expr="D_{12} = D_{23} = D_{31} = D"></span>
                                    </div>
                                    <div style="background:rgba(0,0,0,0.3); padding:5px; border-radius:4px; text-align:center;">
                                        <span class="math-latex-render" data-expr="D_{eq} = \sqrt[3]{D \cdot D \cdot D} = D" style="color:#00e676;"></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="t-card" style="border: 1px solid #4da6ff; background: linear-gradient(180deg, rgba(77, 166, 255, 0.05) 0%, rgba(0,0,0,0) 100%);">
                <div class="t-section-title" style="color:#4da6ff; border-color:#4da6ff;">DOBLE CIRCUITO (6 FASES)</div>

                <p style="color:#ccc; font-size:0.8rem; margin-bottom:15px;">
                    En una misma torre hay dos ternas (circuito 1 y 2) Cada fase compuesta tiene dos conductores <span class="math-latex-render" data-expr="A = a + a' \quad B = b + b'   \quad C = c + c'"></span>
                </p>


                <div class="interactive-formula" onclick="toggleDerivation('deriv-dbl-circ')" style="border-color:#4da6ff;">

                    <div class="if-header" style="justify-content:space-between; flex-direction:column; align-items:flex-start;">
                        <div style="font-size:0.7rem; color:#4da6ff; font-weight:bold; margin-bottom:5px;">DMG TOTAL EQUIVALENTE</div>
                        <div style="width:100%; display:flex; justify-content:space-between; align-items:center;">
                            <span class="math-latex-render" data-expr="D_{eq} = \sqrt[3]{D_{AB} \cdot D_{BC} \cdot D_{CA}}" style="font-size:1.1rem; color:#fff;"></span>
                            <span class="if-icon" style="color:#4da6ff;">▼</span>
                        </div>
                    </div>

                    <div id="deriv-dbl-circ" class="if-content">

                        <div style="position:relative; margin-bottom:20px; text-align:center;">
                            <svg viewBox="0 0 260 260" width="100%" height="auto" style="background:rgba(0,0,0,0.3); border-radius:8px; border:1px solid #444;">
                                <defs>
                                    <filter id="glow" x="-50%" y="-50%" width="200%" height="200%">
                                        <feGaussianBlur stdDeviation="2.5" result="coloredBlur"/>
                                        <feMerge>
                                            <feMergeNode in="coloredBlur"/>
                                            <feMergeNode in="SourceGraphic"/>
                                        </feMerge>
                                    </filter>
                                </defs>

                                <path d="M 80 40 L 80 110" stroke="#fff" stroke-width="1" stroke-dasharray="3,3" opacity="0.4"/>
                                <path d="M 80 40 L 180 110" stroke="#fff" stroke-width="1" stroke-dasharray="3,3" opacity="0.4"/>

                                <path d="M 180 180 L 80 110" stroke="#fff" stroke-width="1" stroke-dasharray="3,3" opacity="0.4"/>
                                <path d="M 180 180 L 180 110" stroke="#fff" stroke-width="1" stroke-dasharray="3,3" opacity="0.4"/>

                                <line x1="130" y1="10" x2="130" y2="210" stroke="#666" stroke-width="1" stroke-dasharray="6,4"/>

                                <g opacity="0.3">
                                    <circle cx="80" cy="180" r="10" fill="none" stroke="#00e676" stroke-width="2"/>
                                    <text x="55" y="185" fill="#00e676" font-size="12" font-weight="bold">c</text>

                                    <circle cx="180" cy="40" r="10" fill="none" stroke="#00e676" stroke-width="2"/>
                                    <text x="205" y="45" fill="#00e676" font-size="12" font-weight="bold">c'</text>
                                </g>

                                <g filter="url(#glow)">
                                    <circle cx="80" cy="40" r="12" fill="#222" stroke="#ff5252" stroke-width="2.5"/>
                                    <text x="55" y="45" fill="#ff5252" font-size="14" font-weight="bold">a</text>

                                    <circle cx="180" cy="180" r="12" fill="#222" stroke="#ff5252" stroke-width="2.5"/>
                                    <text x="205" y="185" fill="#ff5252" font-size="14" font-weight="bold">a'</text>
                                </g>

                                <g filter="url(#glow)">
                                    <circle cx="80" cy="110" r="12" fill="#222" stroke="#4da6ff" stroke-width="2.5"/>
                                    <text x="55" y="115" fill="#4da6ff" font-size="14" font-weight="bold">b</text>

                                    <circle cx="180" cy="110" r="12" fill="#222" stroke="#4da6ff" stroke-width="2.5"/>
                                    <text x="205" y="115" fill="#4da6ff" font-size="14" font-weight="bold">b'</text>
                                </g>

                                <g transform="translate(130, 240)">
                                    <text x="0" y="0" fill="#aaa" font-size="10" text-anchor="middle">
                                        Visualizando distancias para:
                                    </text>
                                    <text x="0" y="12" fill="#fff" font-size="11" font-weight="bold" text-anchor="middle">
                                        <tspan fill="#ff5252">Fase A</tspan> ↔ <tspan fill="#4da6ff">Fase B</tspan>
                                    </text>
                                </g>
                            </svg>
                        </div>

                        <p style="font-size:0.8rem; color:#ccc; margin-bottom:15px; border-bottom:1px dashed #444; padding-bottom:10px;">
                            Debemos calcular la distancia media entre cada par de fases compuestas. Como cada fase tiene 2 conductores, hay <span class="math-latex-render" data-expr="2 \times 2 = 4"></span> distancias por cada par.
                        </p>

                        <div style="display:flex; flex-direction:column; gap:15px;">

                            <div style="background:rgba(255, 82, 82, 0.1); border-left:3px solid #ff5252; padding:10px; border-radius:0 4px 4px 0;">
                                <div style="font-size:0.7rem; color:#ff5252; font-weight:bold; margin-bottom:5px;">1. ENTRE FASE A Y B</div>
                                <div style="overflow-x:auto; white-space:nowrap;">
                                    <span class="math-latex-render" data-expr="D_{AB} = \sqrt[4]{d_{ab} \cdot d_{ab'} \cdot d_{a'b} \cdot d_{a'b'}}"></span>
                                </div>
                            </div>

                            <div style="background:rgba(77, 166, 255, 0.1); border-left:3px solid #4da6ff; padding:10px; border-radius:0 4px 4px 0;">
                                <div style="font-size:0.7rem; color:#4da6ff; font-weight:bold; margin-bottom:5px;">2. ENTRE FASE B Y C</div>
                                <div style="overflow-x:auto; white-space:nowrap;">
                                    <span class="math-latex-render" data-expr="D_{BC} = \sqrt[4]{d_{bc} \cdot d_{bc'} \cdot d_{b'c} \cdot d_{b'c'}}"></span>
                                </div>
                            </div>

                            <div style="background:rgba(0, 230, 118, 0.1); border-left:3px solid #00e676; padding:10px; border-radius:0 4px 4px 0;">
                                <div style="font-size:0.7rem; color:#00e676; font-weight:bold; margin-bottom:5px;">3. ENTRE FASE C Y A</div>
                                <div style="overflow-x:auto; white-space:nowrap;">
                                    <span class="math-latex-render" data-expr="D_{CA} = \sqrt[4]{d_{ca} \cdot d_{ca'} \cdot d_{c'a} \cdot d_{c'a'}}"></span>
                                </div>
                            </div>

                        </div>

                        <div style="margin-top: 15px; border-top: 1px dashed rgba(77, 166, 255, 0.3); padding-top: 15px;">

                        <div style="font-size:0.7rem; color:#4da6ff; font-weight:bold; margin-bottom:5px;">DMG TOTAL EQUIVALENTE</div>
                            <div style="width:100%; display:flex; justify-content:space-between; align-items:center;">
                                <span class="math-latex-render" data-expr="D_{eq} = \sqrt[3]{D_{AB} \cdot D_{BC} \cdot D_{CA}}" style="font-size:1.1rem; color:#fff;"></span>
                        </div>

                        <div style="margin-top:15px; font-size:0.7rem; color:#aaa; text-align:center;">
                            <span class="math-latex-render" data-expr="D_{eq}"></span> es el promedio geométrico de las distancia geométrica reales entre las fases
                        </div>

                        </div>

                    </div>
                </div>
            </div>

            <div class="t-card" style="border: 1px solid #d500f9; background: linear-gradient(180deg, rgba(213, 0, 249, 0.05) 0%, rgba(0,0,0,0) 100%);">
                <div class="t-section-title" style="color:#d500f9; border-color:#d500f9;">TRANSPOSICIÓN Y ASIMETRÍA</div>

                <div style="display:grid; grid-template-columns: 1fr; gap:15px; margin-bottom:15px;">

                    <p style="color:#ccc; font-size:0.85rem; line-height:1.5;">
                        Cuando las distancias <span class="math-latex-render" data-expr="D_{12} \neq D_{23} \neq D_{31}"></span>, las fases tendrían inductancias desiguales (desbalance).
                        Para equilibrar el sistema, se realiza la <b>Transposición</b>: rotar las posiciones físicas de los conductores a lo largo de la línea.
                    </p>

                    <div style="text-align:center;">
                        <svg viewBox="0 0 340 140" width="100%" height="auto" style="background:rgba(0,0,0,0.2); border-radius:8px; border:1px solid #444;">
                            <defs>
                                <linearGradient id="gradTrans" x1="0%" y1="0%" x2="100%" y2="0%">
                                    <stop offset="0%" style="stop-color:#d500f9;stop-opacity:0.2" />
                                    <stop offset="50%" style="stop-color:#d500f9;stop-opacity:1" />
                                    <stop offset="100%" style="stop-color:#d500f9;stop-opacity:0.2" />
                                </linearGradient>
                                <marker id="arrowPurple" markerWidth="6" markerHeight="6" refX="5" refY="3" orient="auto">
                                    <path d="M0,0 L6,3 L0,6" fill="none" stroke="#d500f9" stroke-width="1" />
                                </marker>
                            </defs>

                            <line x1="110" y1="20" x2="110" y2="120" stroke="#555" stroke-dasharray="2,2" />
                            <line x1="230" y1="20" x2="230" y2="120" stroke="#555" stroke-dasharray="2,2" />

                            <text x="55" y="15" fill="#aaa" font-size="8" text-anchor="middle">Tramo 1 (L/3)</text>
                            <text x="170" y="15" fill="#aaa" font-size="8" text-anchor="middle">Tramo 2 (L/3)</text>
                            <text x="285" y="15" fill="#aaa" font-size="8" text-anchor="middle">Tramo 3 (L/3)</text>

                            <text x="10" y="40" fill="#fff" font-size="7" alignment-baseline="middle">Pos 1</text>
                            <text x="10" y="70" fill="#fff" font-size="7" alignment-baseline="middle">Pos 2</text>
                            <text x="10" y="100" fill="#fff" font-size="7" alignment-baseline="middle">Pos 3</text>

                            <path d="M 30 40 L 110 40 L 130 70 L 230 70 L 250 100 L 330 100" fill="none" stroke="#d500f9" stroke-width="2" marker-end="url(#arrowPurple)"/>
                            <circle cx="70" cy="40" r="8" fill="#222" stroke="#d500f9" stroke-width="1.5"/>
                            <text x="70" y="43" fill="#d500f9" font-size="8" text-anchor="middle" font-weight="bold">a</text>

                            <circle cx="180" cy="70" r="8" fill="#222" stroke="#d500f9" stroke-width="1.5"/>
                            <text x="180" y="73" fill="#d500f9" font-size="8" text-anchor="middle" font-weight="bold">a</text>

                            <circle cx="290" cy="100" r="8" fill="#222" stroke="#d500f9" stroke-width="1.5"/>
                            <text x="290" y="103" fill="#d500f9" font-size="8" text-anchor="middle" font-weight="bold">a</text>

                            <path d="M 30 70 L 110 70 L 130 100 L 230 100 L 250 40 L 330 40" fill="none" stroke="#666" stroke-width="1" opacity="0.5"/>
                            <circle cx="70" cy="70" r="6" fill="#222" stroke="#666" stroke-width="1"/>
                            <text x="70" y="73" fill="#888" font-size="7" text-anchor="middle">b</text>

                            <path d="M 30 100 L 110 100 L 130 40 L 230 40 L 250 70 L 330 70" fill="none" stroke="#666" stroke-width="1" opacity="0.5"/>
                            <circle cx="70" cy="100" r="6" fill="#222" stroke="#666" stroke-width="1"/>
                            <text x="70" y="103" fill="#888" font-size="7" text-anchor="middle">c</text>

                            <rect x="130" y="115" width="80" height="18" rx="4" fill="#000" opacity="0.8"/>
                            <text x="170" y="127" fill="#d500f9" font-size="8" text-anchor="middle">Ciclo Completo</text>
                        </svg>
                    </div>

                    <div style="font-size:0.75rem; color:#aaa; text-align:center; font-style:italic;">
                        Al ocupar cada fase todas las posiciones (1, 2, 3) por igual distancia, el flujo magnético promedio se equilibra.
                    </div>
                </div>

                <div class="interactive-formula" onclick="toggleDerivation('deriv-trans')" style="border-color:#d500f9; cursor:pointer;">
                    <div class="if-header" style="justify-content:space-between; align-items:center;">
                        <div style="display:flex; flex-direction:column;">
                            <span style="font-size:0.7rem; color:#d500f9; font-weight:bold;">RESULTADO MATEMÁTICO</span>
                            <span class="math-latex-render" data-expr="L_a = 2 \times 10^{-7} \ln \frac{D_{eq}}{D_s}" style="font-size:1.1rem; color:#fff;"></span>
                        </div>
                        <span class="if-icon" style="color:#d500f9;">▼</span>
                    </div>

                    <div id="deriv-trans" class="if-content">
                        <div style="border-top:1px dashed #555; padding-top:10px; margin-top:5px;">

                            <p style="font-size:0.8rem; color:#ccc;">
                                El promedio de los enlaces de flujo (<span class="math-latex-render" data-expr="\lambda_{avg}"></span>) en los 3 tramos resulta en la media geométrica de las distancias:
                            </p>

                            <div style="background:rgba(213, 0, 249, 0.1); padding:10px; border-radius:6px; text-align:center; margin:10px 0;">
                                <div style="font-size:0.7rem; color:#d500f9; margin-bottom:5px;">ESPACIAMIENTO EQUILÁTERO EQUIVALENTE</div>
                                <span class="math-latex-render" data-expr="D_{eq} = \sqrt[3]{D_{12} \cdot D_{23} \cdot D_{31}}" style="font-size:1.2rem;"></span>
                            </div>

                            <p style="font-size:0.75rem; color:#aaa;">
                                <b>Interpretación:</b> Una línea asimétrica transpuesta se comporta magnéticamente igual que una línea equilátera ficticia cuyo lado es <span class="math-latex-render" data-expr="D_{eq}"></span>.
                            </p>
                        </div>
                    </div>
                </div>

            </div>
        </div>

        <div id="content-info" class="theory-section">

            <div class="t-card" style="border: 1px solid #455a64; background: linear-gradient(180deg, rgba(69, 90, 100, 0.1) 0%, rgba(0,0,0,0) 100%);">

                <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:15px;">
                    <div style="display:flex; align-items:center; gap:10px;">
                        <div style="background:#263238; border-radius:8px; padding:10px; border:1px solid #546e7a;">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#cfd8dc" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/>
                            </svg>
                        </div>
                        <div>
                            <div style="color:#fff; font-weight:bold; font-size:1rem;">PLT</div>
                            <div style="color:#90a4ae; font-size:0.75rem;">Parámetros de Línea de Transmisión</div>
                        </div>
                    </div>

                    <div style="text-align:right;">
                        <div style="color:#00e676; font-size:0.7rem; font-weight:bold; background:rgba(0, 230, 118, 0.1); padding:2px 8px; border-radius:4px; display:inline-block;">v1.0.0 Release</div>
                        <div style="color:#546e7a; font-size:0.7rem; margin-top:4px;">Build: Febrero 2026</div>
                    </div>
                </div>

                <div style="border-top:1px solid rgba(255,255,255,0.1); padding-top:10px;">
                    <p style="font-size:0.75rem; color:#90a4ae; margin:0;">
                        Desarrollado como herramienta de apoyo para estudiantes de Ingeniería Electromecánica y Sistemas de Potencia.
                    </p>
                </div>
            </div>

            <div class="t-card" style="border: 1px solid #7c4dff; background: linear-gradient(180deg, rgba(124, 77, 255, 0.05) 0%, rgba(0,0,0,0) 100%);">
                <div class="t-section-title" style="color:#7c4dff; border-color:#7c4dff;">TABLAS DE CONDUCTORES (ASTM)</div>

                <p style="color:#ccc; font-size:0.8rem; margin-bottom:15px;">
                    Datos característicos de conductores estándar según normas ASTM B232 y B231 (Fuente: Catálogo INPACO / Tablas Grainger).
                </p>

                <div style="font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; max-width: 100%;">

                    <details open style="background:rgba(0,0,0,0.2); border-radius:4px; border:1px solid #444; margin-bottom:10px; overflow:hidden;">
                        <summary style="padding:12px; cursor:pointer; color:#fff; font-size:0.85rem; font-weight:bold; list-style:none; display:flex; justify-content:space-between; align-items:center;">
                         <span style="display:flex; align-items:center; gap:8px;">
                         <span style="color:#7c4dff;">●</span> ACSR / CAA (Aluminio con Alma de Acero)
                         </span>
                         <span style="font-size:0.7rem; color:#aaa;">▼</span>
                        </summary>

                        <div style="padding:0 10px 15px 10px; overflow-x: auto;">

                            <div style="display: inline-block; min-width: 100%;">

                            <div style="background: #1e1e1e; border-bottom: 2px solid #7c4dff; margin-bottom: 10px; border-radius: 8px 8px 0 0; overflow: hidden;">


                                <div style="overflow-x: auto; white-space: nowrap; padding: 15px 10px; -webkit-overflow-scrolling: touch;">

                                    <div style="line-height: 1.2;">
                                        <h3 style="color:#ddd; margin:0; font-family:'Segoe UI', sans-serif; font-size: 1rem; font-weight: 700;">CONDUCTORES ACSR</h3>
                                        <div style="color:#7c4dff; font-size: 0.65rem; font-family: monospace; letter-spacing: 0.5px; margin-top:2px;">ALUMINIUM CONDUCTOR STEEL REINFORCED</div>
                                    </div>

                                    <div style="text-align:right; font-size:0.65rem; color:#aaa; min-width: 70px;">
                                        <div style="margin-bottom:3px;">
                                            <span style="display:inline-block; width:8px; height:8px; background:#fff; border-radius:50%; margin-right:5px; vertical-align:middle;"></span>Al
                                        </div>
                                        <div>
                                            <span style="display:inline-block; width:8px; height:8px; background:repeating-linear-gradient(45deg, #666, #666 1px, #444 1px, #444 2px); border-radius:50%; margin-right:5px; vertical-align:middle; border:1px solid #777;"></span>St
                                        </div>
                                    </div>
                                    <svg width="0" height="0" style="position:absolute;">
                                        <defs>
                                            <pattern id="steelPatternX" patternUnits="userSpaceOnUse" width="3" height="3">
                                                <path d="M-1,1 l2,-2 M0,3 l3,-3 M2,4 l2,-2" style="stroke:#bbb; stroke-width:0.8;" />
                                                <rect width="3" height="3" fill="#666" fill-opacity="0.8"/>
                                            </pattern>
                                            <g id="alStrandX">
                                                <circle r="4.5" fill="#fff" stroke="#1e1e1e" stroke-width="0.5"/>
                                            </g>
                                            <g id="stStrandX">
                                                <circle r="4.5" fill="url(#steelPatternX)" stroke="#aaa" stroke-width="0.5"/>
                                            </g>
                                        </defs>
                                    </svg>

                                    <div style="display: inline-block; text-align: center; margin-right: 30px; vertical-align: bottom;">
                                        <svg width="50" height="50" viewBox="-15 -15 30 30" style="overflow: visible;">
                                            <use href="#stStrandX" x="0" y="0" />
                                            <g>
                                                <use href="#alStrandX" x="9" y="0" transform="rotate(0)" />
                                                <use href="#alStrandX" x="9" y="0" transform="rotate(60)" />
                                                <use href="#alStrandX" x="9" y="0" transform="rotate(120)" />
                                                <use href="#alStrandX" x="9" y="0" transform="rotate(180)" />
                                                <use href="#alStrandX" x="9" y="0" transform="rotate(240)" />
                                                <use href="#alStrandX" x="9" y="0" transform="rotate(300)" />
                                            </g>
                                        </svg>
                                        <div style="font-family:monospace; color:#ddd; font-size:0.7rem; margin-top:8px;">
                                            <span style="color:#fff; font-weight:bold;">6</span>/<span style="color:#aaa;">1</span>
                                        </div>
                                    </div>

                                    <div style="display: inline-block; text-align: center; margin-right: 30px; vertical-align: bottom;">
                                        <svg width="60" height="60" viewBox="-25 -25 50 50" style="overflow: visible;">
                                            <use href="#stStrandX" x="0" y="0" />
                                            <g>
                                                <use href="#alStrandX" x="9" y="0" transform="rotate(0)" />
                                                <use href="#alStrandX" x="9" y="0" transform="rotate(60)" />
                                                <use href="#alStrandX" x="9" y="0" transform="rotate(120)" />
                                                <use href="#alStrandX" x="9" y="0" transform="rotate(180)" />
                                                <use href="#alStrandX" x="9" y="0" transform="rotate(240)" />
                                                <use href="#alStrandX" x="9" y="0" transform="rotate(300)" />
                                            </g>
                                            <g>
                                                <use href="#alStrandX" x="17.5" y="0" transform="rotate(0)" />
                                                <use href="#alStrandX" x="17.5" y="0" transform="rotate(30)" />
                                                <use href="#alStrandX" x="17.5" y="0" transform="rotate(60)" />
                                                <use href="#alStrandX" x="17.5" y="0" transform="rotate(90)" />
                                                <use href="#alStrandX" x="17.5" y="0" transform="rotate(120)" />
                                                <use href="#alStrandX" x="17.5" y="0" transform="rotate(150)" />
                                                <use href="#alStrandX" x="17.5" y="0" transform="rotate(180)" />
                                                <use href="#alStrandX" x="17.5" y="0" transform="rotate(210)" />
                                                <use href="#alStrandX" x="17.5" y="0" transform="rotate(240)" />
                                                <use href="#alStrandX" x="17.5" y="0" transform="rotate(270)" />
                                                <use href="#alStrandX" x="17.5" y="0" transform="rotate(300)" />
                                                <use href="#alStrandX" x="17.5" y="0" transform="rotate(330)" />
                                            </g>
                                        </svg>
                                        <div style="font-family:monospace; color:#ddd; font-size:0.7rem; margin-top:8px;">
                                            <span style="color:#fff; font-weight:bold;">18</span>/<span style="color:#aaa;">1</span>
                                        </div>
                                    </div>

                                    <div style="display: inline-block; text-align: center; margin-right: 30px; vertical-align: bottom;">
                                        <svg width="65" height="65" viewBox="-25 -25 50 50" style="overflow: visible;">
                                            <use href="#stStrandX" x="0" y="0" />
                                            <use href="#stStrandX" x="9" y="0" transform="rotate(0)" />
                                            <use href="#stStrandX" x="9" y="0" transform="rotate(60)" />
                                            <use href="#stStrandX" x="9" y="0" transform="rotate(120)" />
                                            <use href="#stStrandX" x="9" y="0" transform="rotate(180)" />
                                            <use href="#stStrandX" x="9" y="0" transform="rotate(240)" />
                                            <use href="#stStrandX" x="9" y="0" transform="rotate(300)" />
                                            <g>
                                                <use href="#alStrandX" x="17.5" y="0" transform="rotate(0)" />
                                                <use href="#alStrandX" x="17.5" y="0" transform="rotate(36)" />
                                                <use href="#alStrandX" x="17.5" y="0" transform="rotate(72)" />
                                                <use href="#alStrandX" x="17.5" y="0" transform="rotate(108)" />
                                                <use href="#alStrandX" x="17.5" y="0" transform="rotate(144)" />
                                                <use href="#alStrandX" x="17.5" y="0" transform="rotate(180)" />
                                                <use href="#alStrandX" x="17.5" y="0" transform="rotate(216)" />
                                                <use href="#alStrandX" x="17.5" y="0" transform="rotate(252)" />
                                                <use href="#alStrandX" x="17.5" y="0" transform="rotate(288)" />
                                                <use href="#alStrandX" x="17.5" y="0" transform="rotate(324)" />
                                            </g>
                                            <g>
                                                <use href="#alStrandX" x="26" y="0" transform="rotate(11.25)" />
                                                <use href="#alStrandX" x="26" y="0" transform="rotate(33.75)" />
                                                <use href="#alStrandX" x="26" y="0" transform="rotate(56.25)" />
                                                <use href="#alStrandX" x="26" y="0" transform="rotate(78.75)" />
                                                <use href="#alStrandX" x="26" y="0" transform="rotate(101.25)" />
                                                <use href="#alStrandX" x="26" y="0" transform="rotate(123.75)" />
                                                <use href="#alStrandX" x="26" y="0" transform="rotate(146.25)" />
                                                <use href="#alStrandX" x="26" y="0" transform="rotate(168.75)" />
                                                <use href="#alStrandX" x="26" y="0" transform="rotate(191.25)" />
                                                <use href="#alStrandX" x="26" y="0" transform="rotate(213.75)" />
                                                <use href="#alStrandX" x="26" y="0" transform="rotate(236.25)" />
                                                <use href="#alStrandX" x="26" y="0" transform="rotate(258.75)" />
                                                <use href="#alStrandX" x="26" y="0" transform="rotate(281.25)" />
                                                <use href="#alStrandX" x="26" y="0" transform="rotate(303.75)" />
                                                <use href="#alStrandX" x="26" y="0" transform="rotate(326.25)" />
                                                <use href="#alStrandX" x="26" y="0" transform="rotate(348.75)" />
                                            </g>
                                        </svg>
                                        <div style="font-family:monospace; color:#ddd; font-size:0.7rem; margin-top:8px;">
                                            <span style="color:#fff; font-weight:bold;">26</span>/<span style="color:#aaa;">7</span>
                                        </div>
                                    </div>

                                    <div style="display: inline-block; text-align: center; margin-right: 10px; vertical-align: bottom;">
                                        <svg width="80" height="80" viewBox="-35 -35 70 70" style="overflow: visible;">
                                            <use href="#stStrandX" x="0" y="0" />
                                            <use href="#stStrandX" x="9" y="0" transform="rotate(0)" />
                                            <use href="#stStrandX" x="9" y="0" transform="rotate(60)" />
                                            <use href="#stStrandX" x="9" y="0" transform="rotate(120)" />
                                            <use href="#stStrandX" x="9" y="0" transform="rotate(180)" />
                                            <use href="#stStrandX" x="9" y="0" transform="rotate(240)" />
                                            <use href="#stStrandX" x="9" y="0" transform="rotate(300)" />
                                            <g>
                                                <use href="#alStrandX" x="18" y="0" transform="rotate(15)" />
                                                <use href="#alStrandX" x="18" y="0" transform="rotate(45)" />
                                                <use href="#alStrandX" x="18" y="0" transform="rotate(75)" />
                                                <use href="#alStrandX" x="18" y="0" transform="rotate(105)" />
                                                <use href="#alStrandX" x="18" y="0" transform="rotate(135)" />
                                                <use href="#alStrandX" x="18" y="0" transform="rotate(165)" />
                                                <use href="#alStrandX" x="18" y="0" transform="rotate(195)" />
                                                <use href="#alStrandX" x="18" y="0" transform="rotate(225)" />
                                                <use href="#alStrandX" x="18" y="0" transform="rotate(255)" />
                                                <use href="#alStrandX" x="18" y="0" transform="rotate(285)" />
                                                <use href="#alStrandX" x="18" y="0" transform="rotate(315)" />
                                                <use href="#alStrandX" x="18" y="0" transform="rotate(345)" />
                                            </g>
                                            <g>
                                                <use href="#alStrandX" x="27" y="0" transform="rotate(10)" />
                                                <use href="#alStrandX" x="27" y="0" transform="rotate(30)" />
                                                <use href="#alStrandX" x="27" y="0" transform="rotate(50)" />
                                                <use href="#alStrandX" x="27" y="0" transform="rotate(70)" />
                                                <use href="#alStrandX" x="27" y="0" transform="rotate(90)" />
                                                <use href="#alStrandX" x="27" y="0" transform="rotate(110)" />
                                                <use href="#alStrandX" x="27" y="0" transform="rotate(130)" />
                                                <use href="#alStrandX" x="27" y="0" transform="rotate(150)" />
                                                <use href="#alStrandX" x="27" y="0" transform="rotate(170)" />
                                                <use href="#alStrandX" x="27" y="0" transform="rotate(190)" />
                                                <use href="#alStrandX" x="27" y="0" transform="rotate(210)" />
                                                <use href="#alStrandX" x="27" y="0" transform="rotate(230)" />
                                                <use href="#alStrandX" x="27" y="0" transform="rotate(250)" />
                                                <use href="#alStrandX" x="27" y="0" transform="rotate(270)" />
                                                <use href="#alStrandX" x="27" y="0" transform="rotate(290)" />
                                                <use href="#alStrandX" x="27" y="0" transform="rotate(310)" />
                                                <use href="#alStrandX" x="27" y="0" transform="rotate(330)" />
                                                <use href="#alStrandX" x="27" y="0" transform="rotate(350)" />
                                            </g>
                                            <g>
                                                <use href="#alStrandX" x="35" y="0" transform="rotate(0)" />
                                                <use href="#alStrandX" x="35" y="0" transform="rotate(15)" />
                                                <use href="#alStrandX" x="35" y="0" transform="rotate(30)" />
                                                <use href="#alStrandX" x="35" y="0" transform="rotate(45)" />
                                                <use href="#alStrandX" x="35" y="0" transform="rotate(60)" />
                                                <use href="#alStrandX" x="35" y="0" transform="rotate(75)" />
                                                <use href="#alStrandX" x="35" y="0" transform="rotate(90)" />
                                                <use href="#alStrandX" x="35" y="0" transform="rotate(105)" />
                                                <use href="#alStrandX" x="35" y="0" transform="rotate(120)" />
                                                <use href="#alStrandX" x="35" y="0" transform="rotate(135)" />
                                                <use href="#alStrandX" x="35" y="0" transform="rotate(150)" />
                                                <use href="#alStrandX" x="35" y="0" transform="rotate(165)" />
                                                <use href="#alStrandX" x="35" y="0" transform="rotate(180)" />
                                                <use href="#alStrandX" x="35" y="0" transform="rotate(195)" />
                                                <use href="#alStrandX" x="35" y="0" transform="rotate(210)" />
                                                <use href="#alStrandX" x="35" y="0" transform="rotate(225)" />
                                                <use href="#alStrandX" x="35" y="0" transform="rotate(240)" />
                                                <use href="#alStrandX" x="35" y="0" transform="rotate(255)" />
                                                <use href="#alStrandX" x="35" y="0" transform="rotate(270)" />
                                                <use href="#alStrandX" x="35" y="0" transform="rotate(285)" />
                                                <use href="#alStrandX" x="35" y="0" transform="rotate(300)" />
                                                <use href="#alStrandX" x="35" y="0" transform="rotate(315)" />
                                                <use href="#alStrandX" x="35" y="0" transform="rotate(330)" />
                                                <use href="#alStrandX" x="35" y="0" transform="rotate(345)" />
                                            </g>
                                        </svg>
                                        <div style="font-family:monospace; color:#ddd; font-size:0.7rem; margin-top:8px;">
                                            <span style="color:#fff; font-weight:bold;">54</span>/<span style="color:#aaa;">7</span>
                                        </div>
                                    </div>

                                </div>
                            </div>

                            <table style="width:100%; border-collapse: collapse; font-size:0.65rem; white-space: nowrap; color:#ddd;">
                                <thead>
                                <tr style="background:rgba(124, 77, 255, 0.1); color:#a280ff;">
                                    <th colspan="2" style="border-right:1px solid #555;">ID</th>
                                    <th colspan="4" style="border-right:1px solid #555; text-align:center;">Físico & Mecánico (Nuevo)</th>
                                    <th colspan="3" style="border-right:1px solid #555; text-align:center;">Resistencia & Carga</th>
                                    <th colspan="2" style="text-align:center;">Reactancia</th>
                                </tr>
                                <tr style="border-bottom: 2px solid #7c4dff; color:#fff;">
                                    <th style="padding:8px; text-align:left;">Código</th>
                                    <th style="padding:8px; text-align:center; border-right:1px solid #555;">AWG/MCM<br>[mm²]</th>

                                    <th style="padding:8px; text-align:center;">Form.<br>(Al/St)</th>
                                    <th style="padding:8px; text-align:right;">Diám.<br>(mm)</th>
                                    <th style="padding:8px; text-align:right;">Peso<br>(kg/km)</th>
                                    <th style="padding:8px; text-align:right; border-right:1px solid #555;">Ruptura<br>(kgf)</th>

                                    <th style="padding:8px; text-align:right;">I. Adm<br>(A)</th>
                                    <th style="padding:8px; text-align:right;">R. DC 20°<br>(Ω/km)</th>
                                    <th style="padding:8px; text-align:right; border-right:1px solid #555;">R. AC 50°<br>(Ω/km)</th>

                                    <th style="padding:8px; text-align:right;">GMR<br>(mm)</th>
                                    <th style="padding:8px; text-align:right;">Xa<br>(Ω/km)</th>
                                </tr>
                                </thead>
                                <tbody style="font-family: monospace;">

                                <tr style="background:rgba(255,255,255,0.05);"><td colspan="11" style="padding:4px; font-style:italic; color:#aaa;">Distribución </td></tr>

                                <tr style="border-bottom:1px solid #333;">
                                    <td style="padding:6px 8px; font-weight:bold; color:#fff;">Turkey</td>
                                    <td style="padding:6px 8px; text-align:center; border-right:1px solid #444;">6 <span style="color:#777;">[13.3]</span></td>
                                    <td style="padding:6px 8px; text-align:center;">6/1</td>
                                    <td style="padding:6px 8px; text-align:right;">5.0</td>
                                    <td style="padding:6px 8px; text-align:right; color:#ddd;">54.0</td>
                                    <td style="padding:6px 8px; text-align:right; border-right:1px solid #444;">542</td>
                                    <td style="padding:6px 8px; text-align:right; font-weight:bold; color:#00e676;">90</td>
                                    <td style="padding:6px 8px; text-align:right;">2.1574</td>
                                    <td style="padding:6px 8px; text-align:right; border-right:1px solid #444;">2.150</td>
                                    <td style="padding:6px 8px; text-align:right;">1.68</td>
                                    <td style="padding:6px 8px; text-align:right;">0.430</td>
                                </tr>

                                <tr style="border-bottom:1px solid #333;">
                                    <td style="padding:6px 8px; font-weight:bold; color:#fff;">Swan</td>
                                    <td style="padding:6px 8px; text-align:center; border-right:1px solid #444;">4 <span style="color:#777;">[21.2]</span></td>
                                    <td style="padding:6px 8px; text-align:center;">6/1</td>
                                    <td style="padding:6px 8px; text-align:right;">6.4</td>
                                    <td style="padding:6px 8px; text-align:right; color:#ddd;">86.1</td>
                                    <td style="padding:6px 8px; text-align:right; border-right:1px solid #444;">848</td>
                                    <td style="padding:6px 8px; text-align:right; font-weight:bold; color:#00e676;">125</td>
                                    <td style="padding:6px 8px; text-align:right;">1.3548</td>
                                    <td style="padding:6px 8px; text-align:right; border-right:1px solid #444;">1.350</td>
                                    <td style="padding:6px 8px; text-align:right;">2.13</td>
                                    <td style="padding:6px 8px; text-align:right;">0.402</td>
                                </tr>

                                <tr style="border-bottom:1px solid #333;">
                                    <td style="padding:6px 8px; font-weight:bold; color:#fff;">Sparrow</td>
                                    <td style="padding:6px 8px; text-align:center; border-right:1px solid #444;">2 <span style="color:#777;">[33.6]</span></td>
                                    <td style="padding:6px 8px; text-align:center;">6/1</td>
                                    <td style="padding:6px 8px; text-align:right;">8.0</td>
                                    <td style="padding:6px 8px; text-align:right; color:#ddd;">137</td>
                                    <td style="padding:6px 8px; text-align:right; border-right:1px solid #444;">1292</td>
                                    <td style="padding:6px 8px; text-align:right; font-weight:bold; color:#00e676;">160</td>
                                    <td style="padding:6px 8px; text-align:right;">0.8541</td>
                                    <td style="padding:6px 8px; text-align:right; border-right:1px solid #444;">0.850</td>
                                    <td style="padding:6px 8px; text-align:right;">2.68</td>
                                    <td style="padding:6px 8px; text-align:right;">0.375</td>
                                </tr>

                                <tr style="border-bottom:1px solid #333;">
                                    <td style="padding:6px 8px; font-weight:bold; color:#fff;">Raven</td>
                                    <td style="padding:6px 8px; text-align:center; border-right:1px solid #444;">1/0 <span style="color:#777;">[53.5]</span></td>
                                    <td style="padding:6px 8px; text-align:center;">6/1</td>
                                    <td style="padding:6px 8px; text-align:right;">10.1</td>
                                    <td style="padding:6px 8px; text-align:right; color:#ddd;">218</td>
                                    <td style="padding:6px 8px; text-align:right; border-right:1px solid #444;">1986</td>
                                    <td style="padding:6px 8px; text-align:right; font-weight:bold; color:#00e676;">220</td>
                                    <td style="padding:6px 8px; text-align:right;">0.5362</td>
                                    <td style="padding:6px 8px; text-align:right; border-right:1px solid #444;">0.530</td>
                                    <td style="padding:6px 8px; text-align:right;">3.38</td>
                                    <td style="padding:6px 8px; text-align:right;">0.347</td>
                                </tr>

                                <tr style="border-bottom:1px solid #333; background:rgba(255, 255, 0, 0.05);">
                                    <td style="padding:6px 8px; font-weight:bold; color:#fff;">Quail</td>
                                    <td style="padding:6px 8px; text-align:center; border-right:1px solid #444;">2/0 <span style="color:#777;">[67.3]</span></td>
                                    <td style="padding:6px 8px; text-align:center;">6/1</td>
                                    <td style="padding:6px 8px; text-align:right;">11.3</td>
                                    <td style="padding:6px 8px; text-align:right; color:#ddd;">274</td>
                                    <td style="padding:6px 8px; text-align:right; border-right:1px solid #444;">2401</td>
                                    <td style="padding:6px 8px; text-align:right; font-weight:bold; color:#00e676;">250</td>
                                    <td style="padding:6px 8px; text-align:right;">0.4262</td>
                                    <td style="padding:6px 8px; text-align:right; border-right:1px solid #444;">-</td>
                                    <td style="padding:6px 8px; text-align:right;">-</td>
                                    <td style="padding:6px 8px; text-align:right;">-</td>
                                </tr>

                                <tr style="border-bottom:1px solid #333;">
                                    <td style="padding:6px 8px; font-weight:bold; color:#fff;">Pigeon</td>
                                    <td style="padding:6px 8px; text-align:center; border-right:1px solid #444;">3/0 <span style="color:#777;">[85.1]</span></td>
                                    <td style="padding:6px 8px; text-align:center;">6/1</td>
                                    <td style="padding:6px 8px; text-align:right;">12.8</td>
                                    <td style="padding:6px 8px; text-align:right; color:#ddd;">346</td>
                                    <td style="padding:6px 8px; text-align:right; border-right:1px solid #444;">3002</td>
                                    <td style="padding:6px 8px; text-align:right; font-weight:bold; color:#00e676;">290</td>
                                    <td style="padding:6px 8px; text-align:right;">0.3371</td>
                                    <td style="padding:6px 8px; text-align:right; border-right:1px solid #444;">0.330</td>
                                    <td style="padding:6px 8px; text-align:right;">4.27</td>
                                    <td style="padding:6px 8px; text-align:right;">0.325</td>
                                </tr>

                                <tr style="border-bottom:1px solid #333;">
                                    <td style="padding:6px 8px; font-weight:bold; color:#fff;">Penguin</td>
                                    <td style="padding:6px 8px; text-align:center; border-right:1px solid #444;">4/0 <span style="color:#777;">[107]</span></td>
                                    <td style="padding:6px 8px; text-align:center;">6/1</td>
                                    <td style="padding:6px 8px; text-align:right;">14.3</td>
                                    <td style="padding:6px 8px; text-align:right; color:#ddd;">436</td>
                                    <td style="padding:6px 8px; text-align:right; border-right:1px solid #444;">3782</td>
                                    <td style="padding:6px 8px; text-align:right; font-weight:bold; color:#00e676;">330</td>
                                    <td style="padding:6px 8px; text-align:right;">0.2676</td>
                                    <td style="padding:6px 8px; text-align:right; border-right:1px solid #444;">0.260</td>
                                    <td style="padding:6px 8px; text-align:right;">4.79</td>
                                    <td style="padding:6px 8px; text-align:right;">0.312</td>
                                </tr>

                                <tr style="background:rgba(255,255,255,0.05);"><td colspan="11" style="padding:4px; font-style:italic; color:#aaa;">Sub-Transmisión</td></tr>

                                <tr style="border-bottom:1px solid #333;">
                                    <td style="padding:6px 8px; font-weight:bold; color:#a280ff;">Partridge</td>
                                    <td style="padding:6px 8px; text-align:center; border-right:1px solid #444;">266.8</td>
                                    <td style="padding:6px 8px; text-align:center;">26/7</td>
                                    <td style="padding:6px 8px; text-align:right;">16.3</td>
                                    <td style="padding:6px 8px; text-align:right; color:#555;">-</td>
                                    <td style="padding:6px 8px; text-align:right; border-right:1px solid #444; color:#555;">-</td>
                                    <td style="padding:6px 8px; text-align:right; color:#555;">-</td>
                                    <td style="padding:6px 8px; text-align:right; color:#555;">-</td>
                                    <td style="padding:6px 8px; text-align:right; border-right:1px solid #444;">0.236</td>
                                    <td style="padding:6px 8px; text-align:right;">6.61</td>
                                    <td style="padding:6px 8px; text-align:right;">0.289</td>
                                </tr>
                                <tr style="border-bottom:1px solid #333;">
                                    <td style="padding:6px 8px; font-weight:bold; color:#a280ff;">Ostrich</td>
                                    <td style="padding:6px 8px; text-align:center; border-right:1px solid #444;">300.0</td>
                                    <td style="padding:6px 8px; text-align:center;">26/7</td>
                                    <td style="padding:6px 8px; text-align:right;">17.3</td>
                                    <td style="padding:6px 8px; text-align:right; color:#555;">-</td>
                                    <td style="padding:6px 8px; text-align:right; border-right:1px solid #444; color:#555;">-</td>
                                    <td style="padding:6px 8px; text-align:right; color:#555;">-</td>
                                    <td style="padding:6px 8px; text-align:right; color:#555;">-</td>
                                    <td style="padding:6px 8px; text-align:right; border-right:1px solid #444;">0.210</td>
                                    <td style="padding:6px 8px; text-align:right;">6.98</td>
                                    <td style="padding:6px 8px; text-align:right;">0.285</td>
                                </tr>
                                <tr style="border-bottom:1px solid #333;">
                                    <td style="padding:6px 8px; font-weight:bold; color:#a280ff;">Merlin</td>
                                    <td style="padding:6px 8px; text-align:center; border-right:1px solid #444;">336.4</td>
                                    <td style="padding:6px 8px; text-align:center;">18/1</td>
                                    <td style="padding:6px 8px; text-align:right;">17.4</td>
                                    <td style="padding:6px 8px; text-align:right; color:#555;">-</td>
                                    <td style="padding:6px 8px; text-align:right; border-right:1px solid #444; color:#555;">-</td>
                                    <td style="padding:6px 8px; text-align:right; color:#555;">-</td>
                                    <td style="padding:6px 8px; text-align:right; color:#555;">-</td>
                                    <td style="padding:6px 8px; text-align:right; border-right:1px solid #444;">0.189</td>
                                    <td style="padding:6px 8px; text-align:right;">6.77</td>
                                    <td style="padding:6px 8px; text-align:right;">0.287</td>
                                </tr>
                                <tr style="border-bottom:1px solid #333;">
                                    <td style="padding:6px 8px; font-weight:bold; color:#a280ff;">Linnet</td>
                                    <td style="padding:6px 8px; text-align:center; border-right:1px solid #444;">336.4</td>
                                    <td style="padding:6px 8px; text-align:center;">26/7</td>
                                    <td style="padding:6px 8px; text-align:right;">18.3</td>
                                    <td style="padding:6px 8px; text-align:right; color:#555;">-</td>
                                    <td style="padding:6px 8px; text-align:right; border-right:1px solid #444; color:#555;">-</td>
                                    <td style="padding:6px 8px; text-align:right; color:#555;">-</td>
                                    <td style="padding:6px 8px; text-align:right; color:#555;">-</td>
                                    <td style="padding:6px 8px; text-align:right; border-right:1px solid #444;">0.187</td>
                                    <td style="padding:6px 8px; text-align:right;">7.41</td>
                                    <td style="padding:6px 8px; text-align:right;">0.280</td>
                                </tr>

                                <tr style="background:rgba(255,255,255,0.05);"><td colspan="11" style="padding:4px; font-style:italic; color:#aaa;">Transmisión Pesada</td></tr>

                                <tr style="border-bottom:1px solid #333;">
                                    <td style="padding:6px 8px; font-weight:bold; color:#e040fb;">Hawk</td>
                                    <td style="padding:6px 8px; text-align:center; border-right:1px solid #444;">477.0</td>
                                    <td style="padding:6px 8px; text-align:center;">26/7</td>
                                    <td style="padding:6px 8px; text-align:right;">21.8</td>
                                    <td style="padding:6px 8px; text-align:right; color:#555;">-</td>
                                    <td style="padding:6px 8px; text-align:right; border-right:1px solid #444; color:#555;">-</td>
                                    <td style="padding:6px 8px; text-align:right; color:#555;">-</td>
                                    <td style="padding:6px 8px; text-align:right; color:#555;">-</td>
                                    <td style="padding:6px 8px; text-align:right; border-right:1px solid #444;">0.132</td>
                                    <td style="padding:6px 8px; text-align:right;">8.81</td>
                                    <td style="padding:6px 8px; text-align:right;">0.267</td>
                                </tr>
                                <tr style="border-bottom:1px solid #333;">
                                    <td style="padding:6px 8px; font-weight:bold; color:#e040fb;">Dove</td>
                                    <td style="padding:6px 8px; text-align:center; border-right:1px solid #444;">556.5</td>
                                    <td style="padding:6px 8px; text-align:center;">26/7</td>
                                    <td style="padding:6px 8px; text-align:right;">23.5</td>
                                    <td style="padding:6px 8px; text-align:right; color:#555;">-</td>
                                    <td style="padding:6px 8px; text-align:right; border-right:1px solid #444; color:#555;">-</td>
                                    <td style="padding:6px 8px; text-align:right; color:#555;">-</td>
                                    <td style="padding:6px 8px; text-align:right; color:#555;">-</td>
                                    <td style="padding:6px 8px; text-align:right; border-right:1px solid #444;">0.113</td>
                                    <td style="padding:6px 8px; text-align:right;">9.57</td>
                                    <td style="padding:6px 8px; text-align:right;">0.261</td>
                                </tr>
                                <tr style="border-bottom:1px solid #333;">
                                    <td style="padding:6px 8px; font-weight:bold; color:#e040fb;">Grosbeak</td>
                                    <td style="padding:6px 8px; text-align:center; border-right:1px solid #444;">636.0</td>
                                    <td style="padding:6px 8px; text-align:center;">26/7</td>
                                    <td style="padding:6px 8px; text-align:right;">25.1</td>
                                    <td style="padding:6px 8px; text-align:right; color:#555;">-</td>
                                    <td style="padding:6px 8px; text-align:right; border-right:1px solid #444; color:#555;">-</td>
                                    <td style="padding:6px 8px; text-align:right; color:#555;">-</td>
                                    <td style="padding:6px 8px; text-align:right; color:#555;">-</td>
                                    <td style="padding:6px 8px; text-align:right; border-right:1px solid #444;">0.099</td>
                                    <td style="padding:6px 8px; text-align:right;">10.20</td>
                                    <td style="padding:6px 8px; text-align:right;">0.256</td>
                                </tr>
                                <tr style="border-bottom:1px solid #333;">
                                    <td style="padding:6px 8px; font-weight:bold; color:#e040fb;">Drake</td>
                                    <td style="padding:6px 8px; text-align:center; border-right:1px solid #444;">795.0</td>
                                    <td style="padding:6px 8px; text-align:center;">26/7</td>
                                    <td style="padding:6px 8px; text-align:right;">28.1</td>
                                    <td style="padding:6px 8px; text-align:right; color:#555;">-</td>
                                    <td style="padding:6px 8px; text-align:right; border-right:1px solid #444; color:#555;">-</td>
                                    <td style="padding:6px 8px; text-align:right; color:#555;">-</td>
                                    <td style="padding:6px 8px; text-align:right; color:#555;">-</td>
                                    <td style="padding:6px 8px; text-align:right; border-right:1px solid #444;">0.080</td>
                                    <td style="padding:6px 8px; text-align:right;">11.40</td>
                                    <td style="padding:6px 8px; text-align:right;">0.248</td>
                                </tr>
                                <tr style="border-bottom:1px solid #333;">
                                    <td style="padding:6px 8px; font-weight:bold; color:#e040fb;">Cardinal</td>
                                    <td style="padding:6px 8px; text-align:center; border-right:1px solid #444;">954.0</td>
                                    <td style="padding:6px 8px; text-align:center;">54/7</td>
                                    <td style="padding:6px 8px; text-align:right;">30.4</td>
                                    <td style="padding:6px 8px; text-align:right; color:#555;">-</td>
                                    <td style="padding:6px 8px; text-align:right; border-right:1px solid #444; color:#555;">-</td>
                                    <td style="padding:6px 8px; text-align:right; color:#555;">-</td>
                                    <td style="padding:6px 8px; text-align:right; color:#555;">-</td>
                                    <td style="padding:6px 8px; text-align:right; border-right:1px solid #444;">0.068</td>
                                    <td style="padding:6px 8px; text-align:right;">12.30</td>
                                    <td style="padding:6px 8px; text-align:right;">0.242</td>
                                </tr>
                                <tr style="border-bottom:1px solid #333;">
                                    <td style="padding:6px 8px; font-weight:bold; color:#e040fb;">Bluebird</td>
                                    <td style="padding:6px 8px; text-align:center; border-right:1px solid #444;">2156</td>
                                    <td style="padding:6px 8px; text-align:center;">84/19</td>
                                    <td style="padding:6px 8px; text-align:right;">44.8</td>
                                    <td style="padding:6px 8px; text-align:right; color:#555;">-</td>
                                    <td style="padding:6px 8px; text-align:right; border-right:1px solid #444; color:#555;">-</td>
                                    <td style="padding:6px 8px; text-align:right; color:#555;">-</td>
                                    <td style="padding:6px 8px; text-align:right; color:#555;">-</td>
                                    <td style="padding:6px 8px; text-align:right; border-right:1px solid #444;">0.032</td>
                                    <td style="padding:6px 8px; text-align:right;">17.90</td>
                                    <td style="padding:6px 8px; text-align:right;">0.214</td>
                                </tr>
                                </tbody>
                            </table>
                            <div style="margin-top:5px; font-size:0.6rem; color:#888;">
                                <strong>Nota:</strong> Los datos de Corriente Admisible y Carga de Ruptura fueron calculados para conductores instalados al aire libre, sometidos a vientos transversales con velocidad de 2,2 km/h, a una temperatura ambiente
                                de 40°C y con la temperatura en el conductor de 75ºC.
                            </div>
                        </div>
                        </div>
                    </details>

                </div>

                <details style="background:rgba(0,0,0,0.2); border-radius:4px; border:1px solid #444; overflow:hidden;">
                    <summary style="padding:12px; cursor:pointer; color:#fff; font-size:0.85rem; font-weight:bold; list-style:none; display:flex; justify-content:space-between; align-items:center;">
            <span style="display:flex; align-items:center; gap:8px;">
                <span style="color:#00e676;">●</span> AAC / CA (Conductores de Aluminio)
            </span>
                        <span style="font-size:0.7rem; color:#aaa;">▼</span>
                    </summary>

                    <div style="padding:0 10px 15px 10px; overflow-x: auto;">

                       <div style="display: inline-block; min-width: 100%;">

                        <h3 style="color:#00e676; margin-bottom: 5px; font-size: 0.9rem; margin-top:10px;">All Aluminum Conductor</h3>
                        <table style="width:100%; border-collapse: collapse; font-size:0.65rem; white-space: nowrap; color:#ddd;">
                            <thead>
                            <tr style="border-bottom: 2px solid #00e676; color:#00e676; background:rgba(0, 230, 118, 0.1);">
                                <th style="padding:8px; text-align:left;">Código</th>
                                <th style="padding:8px; text-align:center;">AWG/MCM<br>o [mm²]</th>
                                <th style="padding:8px; text-align:center;">Formación<br>(Hilos x mm)</th>
                                <th style="padding:8px; text-align:right;">Diám.<br>(mm)</th>
                                <th style="padding:8px; text-align:right;">R. DC 20°C<br>(Ω/km)</th>
                                <th style="padding:8px; text-align:right;">I. Adm.<br>(A)</th>
                                <th style="padding:8px; text-align:right;">Carga Rup.<br>(kgf)</th>
                            </tr>
                            </thead>
                            <tbody style="font-family: monospace;">

                            <tr style="background:rgba(255,255,255,0.05);"><td colspan="7" style="padding:4px; font-style:italic; color:#aaa;">Baja y Media Tensión</td></tr>

                            <tr style="border-bottom:1px solid #333;">
                                <td style="padding:6px 8px; font-weight:bold; color:#fff;">Peachbell</td>
                                <td style="padding:6px 8px; text-align:center;">6 AWG</td>
                                <td style="padding:6px 8px; text-align:center;">7 x 1,55</td>
                                <td style="padding:6px 8px; text-align:right;">4.7</td>
                                <td style="padding:6px 8px; text-align:right;">2.1826</td>
                                <td style="padding:6px 8px; text-align:right; color:#00e676;">85</td>
                                <td style="padding:6px 8px; text-align:right;">255</td>
                            </tr>
                            <tr style="border-bottom:1px solid #333;">
                                <td style="padding:6px 8px; color:#777;">-</td>
                                <td style="padding:6px 8px; text-align:center; font-weight:bold; color:#ddd;">[16 mm²]</td>
                                <td style="padding:6px 8px; text-align:center;">7 x 1,70</td>
                                <td style="padding:6px 8px; text-align:right;">5.1</td>
                                <td style="padding:6px 8px; text-align:right;">1.8145</td>
                                <td style="padding:6px 8px; text-align:right; color:#00e676;">96</td>
                                <td style="padding:6px 8px; text-align:right;">307</td>
                            </tr>
                            <tr style="border-bottom:1px solid #333;">
                                <td style="padding:6px 8px; font-weight:bold; color:#fff;">Rose</td>
                                <td style="padding:6px 8px; text-align:center;">4 AWG</td>
                                <td style="padding:6px 8px; text-align:center;">7 x 1,96</td>
                                <td style="padding:6px 8px; text-align:right;">5.9</td>
                                <td style="padding:6px 8px; text-align:right;">1.3650</td>
                                <td style="padding:6px 8px; text-align:right; color:#00e676;">114</td>
                                <td style="padding:6px 8px; text-align:right;">400</td>
                            </tr>
                            <tr style="border-bottom:1px solid #333;">
                                <td style="padding:6px 8px; color:#777;">-</td>
                                <td style="padding:6px 8px; text-align:center; font-weight:bold; color:#ddd;">[25 mm²]</td>
                                <td style="padding:6px 8px; text-align:center;">7 x 2,15</td>
                                <td style="padding:6px 8px; text-align:right;">6.5</td>
                                <td style="padding:6px 8px; text-align:right;">1.1344</td>
                                <td style="padding:6px 8px; text-align:right; color:#00e676;">127</td>
                                <td style="padding:6px 8px; text-align:right;">474</td>
                            </tr>
                            <tr style="border-bottom:1px solid #333;">
                                <td style="padding:6px 8px; font-weight:bold; color:#fff;">Iris</td>
                                <td style="padding:6px 8px; text-align:center;">2 AWG</td>
                                <td style="padding:6px 8px; text-align:center;">7 x 2,47</td>
                                <td style="padding:6px 8px; text-align:right;">7.4</td>
                                <td style="padding:6px 8px; text-align:right;">0.8595</td>
                                <td style="padding:6px 8px; text-align:right; color:#00e676;">152</td>
                                <td style="padding:6px 8px; text-align:right;">612</td>
                            </tr>
                            <tr style="border-bottom:1px solid #333;">
                                <td style="padding:6px 8px; color:#777;">-</td>
                                <td style="padding:6px 8px; text-align:center; font-weight:bold; color:#ddd;">[35 mm²]</td>
                                <td style="padding:6px 8px; text-align:center;">7 x 2,52</td>
                                <td style="padding:6px 8px; text-align:right;">7.6</td>
                                <td style="padding:6px 8px; text-align:right;">0.8257</td>
                                <td style="padding:6px 8px; text-align:right; color:#00e676;">158</td>
                                <td style="padding:6px 8px; text-align:right;">637</td>
                            </tr>
                            <tr style="border-bottom:1px solid #333;">
                                <td style="padding:6px 8px; color:#777;">-</td>
                                <td style="padding:6px 8px; text-align:center; font-weight:bold; color:#ddd;">[50 mm²]</td>
                                <td style="padding:6px 8px; text-align:center;">7 x 3,02</td>
                                <td style="padding:6px 8px; text-align:right;">9.1</td>
                                <td style="padding:6px 8px; text-align:right;">0.5750</td>
                                <td style="padding:6px 8px; text-align:right; color:#00e676;">198</td>
                                <td style="padding:6px 8px; text-align:right;">865</td>
                            </tr>

                            <tr style="background:rgba(255,255,255,0.05);"><td colspan="7" style="padding:4px; font-style:italic; color:#aaa;">Calibres Medianos</td></tr>

                            <tr style="border-bottom:1px solid #333;">
                                <td style="padding:6px 8px; font-weight:bold; color:#fff;">Poppy</td>
                                <td style="padding:6px 8px; text-align:center;">1/0</td>
                                <td style="padding:6px 8px; text-align:center;">7 x 3,12</td>
                                <td style="padding:6px 8px; text-align:right;">9.4</td>
                                <td style="padding:6px 8px; text-align:right;">0.5387</td>
                                <td style="padding:6px 8px; text-align:right; color:#00e676;">203</td>
                                <td style="padding:6px 8px; text-align:right;">902</td>
                            </tr>
                            <tr style="border-bottom:1px solid #333;">
                                <td style="padding:6px 8px; font-weight:bold; color:#fff;">Aster</td>
                                <td style="padding:6px 8px; text-align:center;">2/0</td>
                                <td style="padding:6px 8px; text-align:center;">7 x 3,50</td>
                                <td style="padding:6px 8px; text-align:right;">10.5</td>
                                <td style="padding:6px 8px; text-align:right;">0.4281</td>
                                <td style="padding:6px 8px; text-align:right; color:#00e676;">235</td>
                                <td style="padding:6px 8px; text-align:right;">1135</td>
                            </tr>
                            <tr style="border-bottom:1px solid #333;">
                                <td style="padding:6px 8px; color:#777;">-</td>
                                <td style="padding:6px 8px; text-align:center; font-weight:bold; color:#ddd;">[70 mm²]</td>
                                <td style="padding:6px 8px; text-align:center;">19 x 2,15</td>
                                <td style="padding:6px 8px; text-align:right;">10.8</td>
                                <td style="padding:6px 8px; text-align:right;">0.4179</td>
                                <td style="padding:6px 8px; text-align:right; color:#00e676;">246</td>
                                <td style="padding:6px 8px; text-align:right;">1244</td>
                            </tr>
                            <tr style="border-bottom:1px solid #333;">
                                <td style="padding:6px 8px; font-weight:bold; color:#fff;">Phlox</td>
                                <td style="padding:6px 8px; text-align:center;">3/0</td>
                                <td style="padding:6px 8px; text-align:center;">7 x 3,93</td>
                                <td style="padding:6px 8px; text-align:right;">11.8</td>
                                <td style="padding:6px 8px; text-align:right;">0.3395</td>
                                <td style="padding:6px 8px; text-align:right; color:#00e676;">271</td>
                                <td style="padding:6px 8px; text-align:right;">1373</td>
                            </tr>
                            <tr style="border-bottom:1px solid #333;">
                                <td style="padding:6px 8px; color:#777;">-</td>
                                <td style="padding:6px 8px; text-align:center; font-weight:bold; color:#ddd;">[95 mm²]</td>
                                <td style="padding:6px 8px; text-align:center;">19 x 2,52</td>
                                <td style="padding:6px 8px; text-align:right;">12.6</td>
                                <td style="padding:6px 8px; text-align:right;">0.3042</td>
                                <td style="padding:6px 8px; text-align:right; color:#00e676;">299</td>
                                <td style="padding:6px 8px; text-align:right;">1673</td>
                            </tr>
                            <tr style="border-bottom:1px solid #333;">
                                <td style="padding:6px 8px; font-weight:bold; color:#fff;">Oxlip</td>
                                <td style="padding:6px 8px; text-align:center;">4/0</td>
                                <td style="padding:6px 8px; text-align:center;">7 x 4,42</td>
                                <td style="padding:6px 8px; text-align:right;">13.2</td>
                                <td style="padding:6px 8px; text-align:right;">0.2684</td>
                                <td style="padding:6px 8px; text-align:right; color:#00e676;">314</td>
                                <td style="padding:6px 8px; text-align:right;">1737</td>
                            </tr>

                            <tr style="background:rgba(255,255,255,0.05);"><td colspan="7" style="padding:4px; font-style:italic; color:#aaa;">Calibres Mayores (mm² y MCM)</td></tr>

                            <tr style="border-bottom:1px solid #333;">
                                <td style="padding:6px 8px; color:#777;">-</td>
                                <td style="padding:6px 8px; text-align:center; font-weight:bold; color:#ddd;">[120 mm²]</td>
                                <td style="padding:6px 8px; text-align:center;">19 x 2,85</td>
                                <td style="padding:6px 8px; text-align:right;">14.3</td>
                                <td style="padding:6px 8px; text-align:right;">0.2379</td>
                                <td style="padding:6px 8px; text-align:right; color:#00e676;">347</td>
                                <td style="padding:6px 8px; text-align:right;">2025</td>
                            </tr>
                            <tr style="border-bottom:1px solid #333;">
                                <td style="padding:6px 8px; color:#777;">-</td>
                                <td style="padding:6px 8px; text-align:center; font-weight:bold; color:#ddd;">[150 mm²]</td>
                                <td style="padding:6px 8px; text-align:center;">37 x 2,25</td>
                                <td style="padding:6px 8px; text-align:right;">15.8</td>
                                <td style="padding:6px 8px; text-align:right;">0.1960</td>
                                <td style="padding:6px 8px; text-align:right; color:#00e676;">401</td>
                                <td style="padding:6px 8px; text-align:right;">2596</td>
                            </tr>
                            <tr style="border-bottom:1px solid #333;">
                                <td style="padding:6px 8px; font-weight:bold; color:#fff;">Tulip</td>
                                <td style="padding:6px 8px; text-align:center;">336.4</td>
                                <td style="padding:6px 8px; text-align:center;">19 x 3,38</td>
                                <td style="padding:6px 8px; text-align:right;">16.9</td>
                                <td style="padding:6px 8px; text-align:right;">0.1691</td>
                                <td style="padding:6px 8px; text-align:right; color:#00e676;">419</td>
                                <td style="padding:6px 8px; text-align:right;">2783</td>
                            </tr>
                            <tr style="border-bottom:1px solid #333;">
                                <td style="padding:6px 8px; color:#777;">-</td>
                                <td style="padding:6px 8px; text-align:center; font-weight:bold; color:#ddd;">[185 mm²]</td>
                                <td style="padding:6px 8px; text-align:center;">37 x 2,52</td>
                                <td style="padding:6px 8px; text-align:right;">17.6</td>
                                <td style="padding:6px 8px; text-align:right;">0.1562</td>
                                <td style="padding:6px 8px; text-align:right; color:#00e676;">430</td>
                                <td style="padding:6px 8px; text-align:right;">3188</td>
                            </tr>
                            </tbody>
                        </table>
                        <div style="margin-top:5px; font-size:0.6rem; color:#888;">
                            <strong>Nota:</strong> Los datos de Corriente Admisible y Carga de Ruptura fueron calculados para conductores instalados al aire libre, sometidos a vientos transversales con velocidad de 2,2 km/h, a una temperatura ambiente
                            de 40°C y con la temperatura en el conductor de 75ºC.
                        </div>
                    </div> </div>
                </details>

            </div>

            <div class="t-card" style="border: 1px solid #00bcd4; background: linear-gradient(180deg, rgba(0, 188, 212, 0.05) 0%, rgba(0,0,0,0) 100%);">
                <div class="t-section-title" style="color:#00bcd4; border-color:#00bcd4;">BASE TEÓRICA Y DATOS</div>

                <p style="color:#ccc; font-size:0.8rem; margin-bottom:15px;">
                    Los de cálculos, constantes físicas y desarrollos teóricos se basan estrictamente en la siguiente literatura estándar:
                </p>

                <div style="display:flex; flex-direction:column; gap:10px;">

                    <div style="background:rgba(0,0,0,0.3); border-left:3px solid #ffcc00; padding:12px; border-radius:0 4px 4px 0; display:flex; gap:12px;">
                        <div style="font-size:1.5rem; opacity:0.7;">📖</div>
                        <div>
                            <div style="color:#fff; font-size:0.9rem; font-weight:bold;">Power System Analysis</div>
                            <div style="color:#aaa; font-size:0.8rem; font-style:italic;">John J. Grainger & William D. Stevenson Jr.</div>
                            <div style="color:#666; font-size:0.7rem; margin-top:4px;">McGraw-Hill Series in Electrical Engineering • Capítulos 4 y 5</div>
                        </div>
                    </div>

                    <div style="background:rgba(0,0,0,0.3); border-left:3px solid #00bcd4; padding:12px; border-radius:0 4px 4px 0; display:flex; gap:12px;">
                        <div style="font-size:1.5rem; opacity:0.7;">📘</div>
                        <div>
                            <div style="color:#fff; font-size:0.9rem; font-weight:bold;">Power System Analysis and Design</div>
                            <div style="color:#aaa; font-size:0.8rem; font-style:italic;">J. Duncan Glover, Thomas J. Overbye & Mulukutla S. Sarma</div>
                            <div style="color:#666; font-size:0.7rem; margin-top:4px;">Cengage Learning • 6th Edition</div>
                        </div>
                    </div>

                    <div style="background:rgba(0,0,0,0.3); border-left:3px solid #ff9800; padding:12px; border-radius:0 4px 4px 0; display:flex; gap:12px;">
                        <div style="font-size:1.5rem; opacity:0.7;">📙</div>
                        <div>
                            <div style="color:#fff; font-size:0.9rem; font-weight:bold;">Aluminium Electrical Conductor Handbook</div>
                            <div style="color:#aaa; font-size:0.8rem; font-style:italic;">The Aluminum Association</div>
                            <div style="color:#666; font-size:0.7rem; margin-top:4px;">Tablas de Conductores (ACSR, AAAC) • Propiedades Físicas</div>
                        </div>
                    </div>

                    <div style="background:rgba(0,0,0,0.3); border-left:3px solid #9e9e9e; padding:12px; border-radius:0 4px 4px 0; display:flex; gap:12px;">
                        <div style="font-size:1.5rem; opacity:0.7;">⚡</div>
                        <div>
                            <div style="color:#fff; font-size:0.9rem; font-weight:bold;">Standard Constants</div>
                            <div style="color:#aaa; font-size:0.8rem;">Permeabilidad del vacío (<span class="math-latex-render" data-expr="\mu_0"></span>) y resistividad.</div>
                            <div style="color:#666; font-size:0.7rem; margin-top:4px;">Valores IEEE Standard 738 / IEC 60028</div>
                        </div>
                    </div>

                    <div style="font-size:0.65rem; color:#888; padding:0 10px;">
                        <p>This software uses the following open source libraries:</p>
                        <ul style="padding-left:15px;">
                            <li><b>KaTeX</b> (MIT License) - Copyright (c) 2013-2024 Khan Academy and contributors</li>
                            <li><b>html2pdf.js</b> (MIT License) - Copyright (c) 2017 Erik Koopmans</li>
                        </ul>
                    </div>

                </div>
            </div>

            <div class="t-card" style="border: 1px dashed #666; background:rgba(255,255,255,0.02);">
                <div style="text-align:center;">
                    <div style="font-size:0.7rem; color:#aaa; font-weight:bold; margin-bottom:5px;">AVISO LEGAL & DISCLAIMER</div>

                    <p style="font-size:0.65rem; color:#666; line-height:1.4; margin:0;">
                        Esta aplicación es una herramienta educativa. Aunque se ha puesto el máximo esfuerzo en la precisión de los cálculos,
                        los resultados no deben utilizarse para la construcción, energización o mantenimiento de líneas reales sin la validación
                        de un Ingeniero Profesional certificado. El desarrollador no se hace responsable por el uso indebido de los datos.
                    </p>

                    <div style="margin-top:15px; padding-top:10px; border-top:1px solid #333;">
                        <span style="font-size:0.7rem; color:#888;">© 2026 PLT CMAG eApp</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="theory-section active" style="padding-top:20px; padding-bottom:10px;">
            <div onclick="Curtain.close()"
                 style="width:100%; padding:15px; text-align:center; color:#666; border:1px dashed #444; border-radius:8px; cursor:pointer;">
                ▲ Toca para cerrar
            </div>
        </div>

    </div>
</div>

<div id="main-container">

    <div id="sect-lc" class="app-section">
        <div class="rmg-container" style="background: transparent; padding: 8px; padding-bottom: 140px; overflow-y: auto; -webkit-overflow-scrolling: touch;">

            <div style="background: #1e1e1e; border-radius: 8px; padding: 15px; margin-bottom: 15px; border: 1px solid #333;">
                <div style="color: #aaa; font-size: 0.75rem; text-transform: uppercase; margin-bottom: 10px; font-weight:bold; border-bottom:1px solid #444; padding-bottom:5px;">
                    1. Configuración Inicial
                </div>
                <div style="display: flex; align-items: center; justify-content: space-between;">
                    <label style="color: #fff; font-size: 0.9rem;">Frecuencia del Sistema:</label>
                    <div style="display:flex; align-items:center; gap:5px;">
                        <input type="number" id="inp_freq" value="60" oninput="AppLC.calc()" style="width: 80px; background: #000; border: 1px solid #555; color: #fff; padding: 8px; border-radius: 4px; text-align: center; font-weight: bold;">
                        <span style="color:#888;">Hz</span>
                    </div>
                </div>
            </div>

            <div style="background: #1e1e1e; border-radius: 8px; padding: 15px; margin-bottom: 15px; border: 1px solid #333;">
                <div style="color: #0f0; font-size: 0.75rem; text-transform: uppercase; margin-bottom: 10px; font-weight:bold; border-bottom:1px solid #444; padding-bottom:5px;">
                    2. Configuración del Subconductor
                </div>

                <div style="margin-bottom: 12px;">
                    <label style="color: #888; font-size: 0.7rem; display:block; margin-bottom:4px;">Método de Cálculo Ds:</label>

                    <input type="hidden" id="sel_mode_induct" value="manual">

                    <div class="plt-select-wrapper theme-green" id="ui_sel_induct">
                        <div class="plt-select-trigger">
                            <span>Matriz RMG Subconductor + Radio</span>
                            <div class="plt-arrow"></div>
                        </div>
                        <div class="plt-options">
                            <div class="plt-option selected" data-value="manual" onclick="setupSelect('ui_sel_induct', 'sel_mode_induct', this)">
                                Matriz RMG Subconductor + Radio
                            </div>
                            <div class="plt-option" data-value="table" onclick="setupSelect('ui_sel_induct', 'sel_mode_induct', this)">
                                Tabla ACSR (Ds fijo)
                            </div>
                            <div class="plt-option" data-value="direct" onclick="setupSelect('ui_sel_induct', 'sel_mode_induct', this)">
                                Ingreso Directo (Valor Ds)
                            </div>
                        </div>
                    </div>
                </div>

                <div id="block_induct_manual">
                    <div style="display: flex; gap: 10px; align-items: flex-start; width: 100%;">

                        <div style="flex: 1; min-width: 0; display: flex; flex-direction: column;">

                            <div style="margin-bottom: 12px;">
                                <label style="color: #ccc; font-size: 0.75rem; display:block; margin-bottom:4px;">Radio del Subconductor (r):</label>
                                <div class="input-unit-group" style="width: 100%;">
                                    <input type="number" id="inp_rad_sub" value="0.57" step="0.01" oninput="AppLC.calc()" style="min-width: 0;">
                                    <div class="unit-divider"></div>
                                    <input type="hidden" id="unit_rad_sub" value="cm">

                                    <div class="plt-select-wrapper mini-dropdown" id="ui_unit_sub">
                                        <div class="plt-select-trigger">
                                            <span id="txt_unit_sub" style="color: #0f0;">cm</span>
                                            <div class="plt-arrow" style="border-color: #0f0;"></div>
                                        </div>
                                        <div class="plt-options">
                                            <div class="plt-option" data-value="mm" style="color:#0f0;" onclick="setupSelect('ui_unit_sub', 'unit_rad_sub', this); AppLC.calc();">mm</div>
                                            <div class="plt-option selected" data-value="cm" style="color:#0f0;" onclick="setupSelect('ui_unit_sub', 'unit_rad_sub', this); AppLC.calc();">cm</div>
                                            <div class="plt-option" data-value="m" style="color:#0f0;" onclick="setupSelect('ui_unit_sub', 'unit_rad_sub', this); AppLC.calc();">m</div>
                                            <div class="plt-option" data-value="in" style="color:#0f0;" onclick="setupSelect('ui_unit_sub', 'unit_rad_sub', this); AppLC.calc();">in</div>
                                            <div class="plt-option" data-value="ft" style="color:#0f0;" onclick="setupSelect('ui_unit_sub', 'unit_rad_sub', this); AppLC.calc();">ft</div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div style="background: #000; border: 1px solid #333; border-radius: 6px; padding: 8px 10px; position: relative;">
                                <div style="display:flex; justify-content:space-between; align-items:flex-end; margin-bottom: 2px;">
                                    <span style="font-size: 0.65rem; color: #888; text-transform: uppercase;">RMG (Ds):</span>
                                    <span id="lbl_kr_factor" style="color: #00e676; font-family: monospace; font-size: 0.8rem;">--- * r</span>
                                </div>

                                <div id="lbl_ds_result" style="color: #fff; font-weight: bold; font-size: 1.2rem; text-align: right; border-top: 1px dashed #333; padding-top: 2px; margin-top:2px;">
                                    = ---
                                </div>
                            </div>

                        </div>

                        <div style="display: flex; flex-direction: column; align-items: center; width: 90px; flex-shrink: 0;">

                            <div onclick="FlowState.edit('sect-rmg')"
                                 style="width: 90px; height: 90px; background: #fff; border: 2px solid #444; border-radius: 8px; position: relative; cursor: pointer; overflow: hidden; display:flex; justify-content:center; align-items:center; transition: border-color 0.2s; box-shadow: 0 4px 8px rgba(0,0,0,0.3);"
                                 onmouseover="this.style.borderColor='#00e676'"
                                 onmouseout="this.style.borderColor='#444'">

                                <canvas id="lc_rmg_preview" width="180" height="180" style="width:90px; height:90px; display:block;"></canvas>

                                <div style="position:absolute; bottom:2px; right:2px; background:rgba(0,0,0,0.8); width:22px; height:22px; border-radius:4px; display:flex; justify-content:center; align-items:center; border:1px solid #555;">
                                    <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="2.5"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg>
                                </div>
                            </div>

                            <div onclick="FlowState.edit('sect-rmg')" style="margin-top: 8px; font-size: 0.6rem; color: #666; text-decoration: underline; cursor: pointer; text-align: center;">
                                Tocar para Editar
                            </div>
                        </div>

                    </div>
                </div>

                <div id="block_induct_table" style="display:none;">
                    <label style="color: #888; font-size: 0.7rem; display:block; margin-bottom:4px;">Seleccionar Conductor:</label>
                    <select id="sel_acsr_induct" onchange="AppLC.calc()" style="width:100%; background:#111; color:#0f0; border:1px solid #333; padding:8px; border-radius:4px;">
                    </select>
                </div>

                <div id="block_induct_direct" style="display:none;">
                    <label style="color: #ccc; font-size: 0.7rem; display:block; margin-bottom:4px;">Valor RMG (Ds) Directo:</label>

                    <div class="input-unit-group" style="margin-bottom: 8px; width: 100%;">
                        <input type="number" id="inp_ds_direct" value="10" step="0.0001" oninput="AppLC.calc()" style="min-width: 0;">

                        <div class="unit-divider"></div>

                        <input type="hidden" id="unit_ds_direct" value="mm">

                        <div class="plt-select-wrapper mini-dropdown" id="ui_unit_direct">
                            <div class="plt-select-trigger">
                                <span id="txt_unit_direct" style="color: #0f0;">mm</span>
                                <div class="plt-arrow" style="border-color: #0f0;"></div>
                            </div>
                            <div class="plt-options">
                                <div class="plt-option selected" data-value="mm" style="color:#0f0;" onclick="setupSelect('ui_unit_direct', 'unit_ds_direct', this); AppLC.calc();">mm</div>
                                <div class="plt-option" data-value="cm" style="color:#0f0;" onclick="setupSelect('ui_unit_direct', 'unit_ds_direct', this); AppLC.calc();">cm</div>
                                <div class="plt-option" data-value="m" style="color:#0f0;" onclick="setupSelect('ui_unit_direct', 'unit_ds_direct', this); AppLC.calc();">m</div>
                                <div class="plt-option" data-value="in" style="color:#0f0;" onclick="setupSelect('ui_unit_direct', 'unit_ds_direct', this); AppLC.calc();">in</div>
                                <div class="plt-option" data-value="ft" style="color:#0f0;" onclick="setupSelect('ui_unit_direct', 'unit_ds_direct', this); AppLC.calc();">ft</div>
                            </div>
                        </div>
                    </div>
                    <div style="font-size:0.7rem; color:#666; font-style:italic; text-align: center;">* Este valor anula el cálculo geométrico del editor.</div>
                </div>

            </div>

            <div style="background: #1e1e1e; border-radius: 8px; padding: 15px; margin-bottom: 20px; border: 1px solid #333;">
                <div style="color: #4da6ff; font-size: 0.75rem; text-transform: uppercase; margin-bottom: 10px; font-weight:bold; border-bottom:1px solid #444; padding-bottom:5px;">
                    3. Configuración Capacitiva (Radio Ext)
                </div>

                <div style="margin-bottom: 12px;">
                    <label style="color: #888; font-size: 0.7rem; display:block; margin-bottom:4px;">Método Radio Exterior:</label>

                    <input type="hidden" id="sel_mode_cap" value="manual">

                    <div class="plt-select-wrapper theme-blue" id="ui_sel_cap">
                        <div class="plt-select-trigger">
                            <span>Ingreso del Radio Exterior</span>
                            <div class="plt-arrow"></div>
                        </div>
                        <div class="plt-options">
                            <div class="plt-option selected" data-value="manual" onclick="setupSelect('ui_sel_cap', 'sel_mode_cap', this)">
                                Ingreso del Radio exterior
                            </div>
                            <div class="plt-option" data-value="auto" onclick="setupSelect('ui_sel_cap', 'sel_mode_cap', this)">
                                Auto-Detección (Tabla ACSR)
                            </div>
                            <div class="plt-option" data-value="factor" onclick="setupSelect('ui_sel_cap', 'sel_mode_cap', this)">
                                Factor proporcional k (Rext = k · Ds)
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Nuevo Modo de factor k -->
                <div id="block_cap_factor" style="display:none; margin-top: 10px;">

                    <div style="
        display: flex;
        align-items: center;
        justify-content: space-between;
        background: #000;
        border: 1px solid #333;
        border-radius: 6px;
        padding: 8px 12px;
        box-shadow: inset 0 2px 5px rgba(0,0,0,0.5);
    ">

                        <div style="display: flex; align-items: center; gap: 8px;">
                            <span style="color: #aaa; font-weight: bold; font-family: monospace; font-size: 1.1rem;">k =</span>
                            <input type="number" id="inp_k_factor" value="4" step="0.001" oninput="AppLC.calc()"
                                   style="
                       width: 70px;
                       background: transparent;
                       border: none;
                       border-bottom: 2px solid #4da6ff;
                       color: #fff;
                       font-size: 1.2rem;
                       font-weight: bold;
                       text-align: center;
                       outline: none;
                       padding-bottom: 2px;
                   ">
                        </div>

                        <div style="
            font-family: 'Times New Roman', serif;
            font-size: 1.1rem;
            color: #666;
            padding-left: 12px;
            border-left: 1px solid #333;
        ">
                            <span style="color:#4da6ff; font-weight:bold;">r<sub style="font-size:0.7em">e</sub></span>
                            = k ·
                            <span style="color:#00e676; font-weight:bold;">D<sub style="font-size:0.7em">s</sub></span>
                        </div>
                    </div>

                    <div style="font-size: 0.65rem; color: #555; font-style: italic; text-align: center; margin-top: 6px;">
                        * Define el Radio Exterior proporcional al RMG de un conductor.
                    </div>
                </div>

                <div id="block_cap_manual">

                    <div style="display: flex; gap: 10px; align-items: center;">

                        <div style="flex: 1; min-width: 0;">
                            <label style="color: #ccc; font-size: 0.75rem; display:block; margin-bottom:4px;">Radio Ext. Real:</label>

                            <div class="input-unit-group" style="width: 100%; border-color: #4da6ff; display: flex;">
                                <input type="number" id="inp_rad_ext" value="12" step="0.01" oninput="AppLC.calc()" style="flex: 1; min-width: 0;">

                                <div class="unit-divider" style="background: #4da6ff;"></div>

                                <input type="hidden" id="unit_rad_ext" value="mm">
                                <div class="plt-select-wrapper mini-dropdown" id="ui_unit_ext" style="width: 60px;">
                                    <div class="plt-select-trigger">
                                        <span id="txt_unit_ext" style="color:#4da6ff;">mm</span>
                                        <div class="plt-arrow" style="border-color:#4da6ff;"></div>
                                    </div>
                                    <div class="plt-options">
                                        <div class="plt-option selected" data-value="mm" style="color:#4da6ff;" onclick="setupSelect('ui_unit_ext', 'unit_rad_ext', this); AppLC.calc();">mm</div>
                                        <div class="plt-option" data-value="cm" style="color:#4da6ff;" onclick="setupSelect('ui_unit_ext', 'unit_rad_ext', this); AppLC.calc();">cm</div>
                                        <div class="plt-option" data-value="m" style="color:#4da6ff;" onclick="setupSelect('ui_unit_ext', 'unit_rad_ext', this); AppLC.calc();">m</div>

                                        <div class="plt-option" data-value="in" style="color:#4da6ff;" onclick="setupSelect('ui_unit_ext', 'unit_rad_ext', this); AppLC.calc();">in</div>
                                        <div class="plt-option" data-value="ft" style="color:#4da6ff;" onclick="setupSelect('ui_unit_ext', 'unit_rad_ext', this); AppLC.calc();">ft</div>
                                    </div>
                                </div>
                            </div>

                            <div style="height: 20px;"></div>
                        </div>

                        <div style="width: 90px; height: 90px; background: #ffffff; border: 2px solid #333; border-radius: 6px; position: relative; overflow: hidden; display:flex; justify-content:center; align-items:center; flex-shrink: 0;">
                            <canvas id="lc_cap_preview" width="180" height="180" style="width:90px; height:90px; display:block; cursor: pointer;"></canvas>
                        </div>

                    </div>

                    <div style="text-align:center; margin-top:4px;">
                        <small style="color:#444; font-size:0.6rem;">Vista Previa (No editable)</small>
                    </div>
                </div>

                <div id="block_cap_auto" style="display:none;">
                    <button onclick="AppLC.autoMatch()" style="width:100%; background: #222; color: #fff; border: 1px dashed #4da6ff; padding: 10px; border-radius: 4px; font-size: 0.8rem; cursor:pointer; margin-bottom:10px;">
                        🔍 Detectar desde Config. Inductiva
                    </button>
                    <div style="background:#111; padding:8px; border-radius:4px; display:flex; justify-content:space-between; align-items:center;">
                        <span id="lbl_match_name" style="color:#4da6ff; font-weight:bold; font-size: 0.8rem;">---</span>
                        <span id="lbl_match_rad" style="color:#fff; font-size: 0.8rem;">---</span>
                    </div>
                </div>
            </div>

            <div style="background: #1e1e1e; border-radius: 8px; padding: 15px; margin-bottom: 20px; border: 1px solid #333;">
                <div style="color: #ffcc00; font-size: 0.75rem; text-transform: uppercase; margin-bottom: 12px; font-weight:bold; border-bottom:1px solid #444; padding-bottom:5px;">
                    4. Geometría de Fases (DMG) + Haz
                </div>

                <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 10px;">
                    <div>
                        <div style="color: #888; font-size: 0.7rem; margin-bottom: 2px;">Configuración:</div>
                        <div id="lbl_dmg_config" style="color: #fff; font-weight:bold; font-size:0.85rem;">---</div>
                    </div>
                    <div style="text-align: right;">
                        <div style="color: #888; font-size: 0.65rem; margin-bottom: 2px;">UNIDADES</div>
                        <input type="hidden" id="sel_unit_tower" value="ft">
                        <div class="plt-select-wrapper mini-dropdown" id="ui_unit_tower" style="width: auto; display:inline-block;">
                            <div class="plt-select-trigger" style="padding: 2px 6px; height: auto; background: #111; border: 1px solid #444; border-radius: 4px;">
                                <span id="txt_unit_tower" style="color: #ffcc00; font-size: 0.85rem; font-weight:bold;">ft (Pies)</span>
                                <div class="plt-arrow" style="border-color: #ffcc00; margin-left:6px;"></div>
                            </div>
                            <div class="plt-options" style="width: 100px; right: 0; left: auto;">
                                <div class="plt-option" data-value="m" onclick="setupSelect('ui_unit_tower', 'sel_unit_tower', this); AppLC.calc(); AppLC.syncMainBundleUI();">m (Metros)</div>
                                <div class="plt-option selected" data-value="ft" onclick="setupSelect('ui_unit_tower', 'sel_unit_tower', this); AppLC.calc(); AppLC.syncMainBundleUI();">ft (Pies)</div>
                                <div class="plt-option" data-value="in" onclick="setupSelect('ui_unit_tower', 'sel_unit_tower', this); AppLC.calc(); AppLC.syncMainBundleUI();">in (Pulg)</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div onclick="FlowState.edit('sect-dmg')"
                     style="width: 100%; height: 160px; background: #ffffff; border: 2px solid #444; border-radius: 8px; position: relative; cursor: pointer; overflow: hidden; display: block; box-shadow: 0 4px 12px rgba(0,0,0,0.4); margin-bottom: 12px; transition: border-color 0.2s;"
                     onmouseover="this.style.borderColor='#666'"
                     onmouseout="this.style.borderColor='#444'">

                    <canvas id="lc_dmg_preview" style="width: 100%; height: 100%; display:block;"></canvas>

                    <div style="position: absolute; bottom: 8px; right: 8px; background: rgba(0,0,0,0.85); padding: 4px 10px; border-radius: 20px; display: flex; gap: 5px; align-items: center; pointer-events: none; border: 1px solid #555; backdrop-filter: blur(2px);">
                        <span style="color:#fff; font-size:0.65rem; font-weight:bold; letter-spacing:0.5px;">EDITAR</span>
                        <svg width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                            <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                        </svg>
                    </div>
                </div>

                <div style="margin-bottom: 12px; background: #111; padding: 10px; border-radius: 6px; border: 1px solid #444;">

                    <div style="color: #888; font-size: 0.65rem; margin-bottom: 4px;">Configuración de Haces:</div>
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div style="color: #4da6ff; font-weight: bold; font-size: 0.6rem;">Haz Circuito 1:</div>
                        <div style="display: flex; gap: 10px; align-items: center;">
                            <div class="ctrl-btn-group" style="background: #000; padding: 2px; border-radius: 4px; display: flex; border: 1px solid #333;">
                                <button class="tiny-btn" onclick="AppLC.updateBundleMain(1, 'n', -1)">-</button>
                                <span id="disp_main_b1_n" style="width: 20px; text-align: center; color: white; font-weight: bold; font-size: 0.9rem;">1</span>
                                <button class="tiny-btn" onclick="AppLC.updateBundleMain(1, 'n', 1)">+</button>
                            </div>
                            <div style="display: flex; align-items: center; gap: 4px;">
                                <span style="color: #888; font-size: 0.8rem;">d:</span>
                                <input type="number" id="inp_main_b1_d" value="0.45" step="any" oninput="AppLC.updateBundleMain(1, 'd', this.value)"
                                       style="width: 60px; background: #000; border: 1px solid #333; color: #ffcc00; text-align: center; border-radius: 3px; padding: 4px; font-weight:bold;">
                                <span id="lbl_unit_d1" style="color: #666; font-size: 0.7rem;">ft</span>
                            </div>
                        </div>
                    </div>

                    <div id="grp_main_bundle_2" style="display: none; justify-content: space-between; align-items: center; margin-top: 8px; border-top: 1px dashed #333; padding-top: 8px;">
                        <div style="color: #ff4444; font-weight: bold; font-size: 0.6rem;">Haz Circuito 2:</div>
                        <div style="display: flex; gap: 10px; align-items: center;">
                            <div class="ctrl-btn-group" style="background: #000; padding: 2px; border-radius: 4px; display: flex; border: 1px solid #333;">
                                <button class="tiny-btn" onclick="AppLC.updateBundleMain(2, 'n', -1)">-</button>
                                <span id="disp_main_b2_n" style="width: 20px; text-align: center; color: white; font-weight: bold; font-size: 0.9rem;">1</span>
                                <button class="tiny-btn" onclick="AppLC.updateBundleMain(2, 'n', 1)">+</button>
                            </div>
                            <div style="display: flex; align-items: center; gap: 4px;">
                                <span style="color: #888; font-size: 0.8rem;">d:</span>
                                <input type="number" id="inp_main_b2_d" value="0.45" step="any" oninput="AppLC.updateBundleMain(2, 'd', this.value)"
                                       style="width: 60px; background: #000; border: 1px solid #333; color: #ffcc00; text-align: center; border-radius: 3px; padding: 4px; font-weight:bold;">
                                <span id="lbl_unit_d2" style="color: #666; font-size: 0.7rem;">ft</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div style="background: #111; padding: 8px 12px; border-radius: 6px; border: 1px dashed #444; display: flex; justify-content: space-between; align-items: center;">
                    <div style="color: #888; font-size: 0.75rem; text-transform: uppercase; font-weight: bold;">
                        DMG Calculado:
                    </div>
                    <div id="lbl_dmg_value_raw" style="color: #fff; font-weight: bold; font-size: 1.1rem; font-family: monospace;">---</div>
                </div>
            </div>

            <div style="background: #111; border-radius: 8px; padding: 12px; margin-bottom: 20px; border: 1px dashed #444;">

                <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom: 10px; border-bottom:1px solid #333; padding-bottom:5px;">
                    <div style="color: #aaa; font-size: 0.7rem; text-transform: uppercase; font-weight:bold;">
                        Resultados Intermedios
                    </div>

                    <input type="hidden" id="sel_unit_res" value="m">

                    <div class="plt-select-wrapper mini-dropdown" id="ui_unit_res" style="width: auto;">
                        <div class="plt-select-trigger" style="padding: 2px 5px; height: auto; border: 1px solid #444; border-radius: 4px;">
                            <span id="txt_unit_res" style="color: #aaa; font-size: 0.75rem;">m (Metros)</span>
                            <div class="plt-arrow" style="border-color: #aaa; margin-left:5px;"></div>
                        </div>

                        <div class="plt-options" style="width: 100px; right:0; left:auto;">
                            <div class="plt-option selected" data-value="m" onclick="setupSelect('ui_unit_res', 'sel_unit_res', this); AppLC.calc();">m (Metros)</div>
                            <div class="plt-option" data-value="ft" onclick="setupSelect('ui_unit_res', 'sel_unit_res', this); AppLC.calc();">ft (Pies)</div>
                            <div class="plt-option" data-value="cm" onclick="setupSelect('ui_unit_res', 'sel_unit_res', this); AppLC.calc();">cm</div>
                            <div class="plt-option" data-value="in" onclick="setupSelect('ui_unit_res', 'sel_unit_res', this); AppLC.calc();">in (Pulg)</div>
                        </div>
                    </div>
                </div>

                <div style="display:grid; grid-template-columns: 1fr 1fr; gap:10px; font-family:monospace; font-size:0.85rem;">
                    <div>
                        <div style="color:#666; font-size:0.7rem;">Ds Indiv (Subcond)</div>
                        <div id="val_ds_indiv" style="color:#fff;">---</div>
                    </div>
                    <div style="text-align:right;">
                        <div style="color:#666; font-size:0.7rem;">DMG Fases (Deq)</div>
                        <div id="val_dmg_fases" style="color:#ffcc00;">---</div>
                    </div>

                    <div>
                        <div style="color:#666; font-size:0.7rem;">Ds Inductivo (Haz)</div>
                        <div id="val_ds_induc" style="color:#0f0;">---</div>
                    </div>
                    <div style="text-align:right;">
                        <div style="color:#666; font-size:0.7rem;">Ds Capacitivo (Haz)</div>
                        <div id="val_ds_capac" style="color:#4da6ff;">---</div>
                    </div>
                </div>

                <div style="margin-top: 15px; border-top: 1px dashed #333; padding-top: 10px;">

                    <div onclick="AppLC.toggleDetailedReport(this)"
                         style="width: 100%; text-align: center; font-size: 0.75rem; color: #888; cursor: pointer; padding: 8px; border-radius: 4px; transition: background 0.2s;"
                         onmouseover="this.style.backgroundColor='#222'; this.style.color='#fff'"
                         onmouseout="this.style.backgroundColor='transparent'; this.style.color='#888'">
                        ▼ Ver Cálculo
                    </div>

                    <div id="lc_detailed_report" class="math-paper" style="display: none; border: none; padding: 5px 0; margin-top: 5px; background: transparent;">
                    </div>

                </div>

            </div>

            <div id="lc-results" style="display: flex; flex-direction: column; gap: 15px;">

                <div onclick="AppLC.toggleMath('L')" style="background: #1a1a1a; border-left: 4px solid #00e676; padding: 15px; border-radius: 6px; cursor: pointer; transition: background 0.2s;">

                    <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom:10px;">
                        <div style="width:100%">
                            <div style="display:flex; justify-content:space-between;">
                                <div style="color: #888; font-size: 0.7rem;">INDUCTANCIA (L)</div>
                                <div style="color: #666; font-size: 0.7rem;">▼ Ver Cálculo</div>
                            </div>
                            <div id="res_L" style="color: #fff; font-size: 1.4rem; font-weight: bold;">---</div>
                        </div>
                    </div>

                    <div style="border-top:1px solid #333; padding-top:8px;">
                        <div style="color: #888; font-size: 0.7rem; margin-bottom:2px;">REACTANCIA INDUCTIVA (XL)</div>
                        <div style="display:flex; justify-content:space-between; align-items:flex-end;">
                            <div id="res_XL_km" style="color: #00e676; font-size: 1.1rem; font-weight: bold;">---</div>
                            <div id="res_XL_mi" style="color: #aaa; font-size: 0.9rem; font-family:monospace;">---</div>
                        </div>
                    </div>

                    <div id="math_container_L" style="display: none; margin-top: 15px; border-top: 1px dashed #00e676; padding-top: 10px;"></div>
                </div>

                <div onclick="AppLC.toggleMath('C')" style="background: #1a1a1a; border-left: 4px solid #4da6ff; padding: 15px; border-radius: 6px; cursor: pointer; transition: background 0.2s;">

                    <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom:10px;">
                        <div style="width:100%">
                            <div style="display:flex; justify-content:space-between;">
                                <div style="color: #888; font-size: 0.7rem;">CAPACITANCIA (Cn)</div>
                                <div style="color: #666; font-size: 0.7rem;">▼ Ver Cálculo</div>
                            </div>
                            <div id="res_C" style="color: #fff; font-size: 1.4rem; font-weight: bold;">---</div>
                        </div>
                    </div>

                    <div style="border-top:1px solid #333; padding-top:8px;">
                        <div style="color: #888; font-size: 0.7rem; margin-bottom:2px;">REACTANCIA CAPACITIVA (XC)</div>
                        <div style="display:flex; justify-content:space-between; align-items:flex-end;">
                            <div id="res_XC_km" style="color: #4da6ff; font-size: 1.1rem; font-weight: bold;">---</div>
                            <div id="res_XC_mi" style="color: #aaa; font-size: 0.9rem; font-family:monospace;">---</div>
                        </div>
                    </div>

                    <div id="math_container_C" style="display: none; margin-top: 15px; border-top: 1px dashed #4da6ff; padding-top: 10px;"></div>
                </div>

            </div>

            <div style="height: 120px;"></div>
        </div>
    </div>

    <div id="sect-res" class="app-section">
        <div class="rmg-container" style="background: transparent; padding: 8px; padding-bottom: 140px; overflow-y: auto;">

            <div style="background: #1e1e1e; padding: 10px; border-radius: 8px; border: 1px solid #333; margin-bottom: 15px;">
                <label style="color: #888; font-size: 0.7rem; display:block; margin-bottom:5px;">MÉTODO DE ENTRADA:</label>
                <div style="display: flex; gap: 5px;">
                    <button id="btn_mode_known" onclick="AppRes.setMode('known')" class="btn-mode active" style="flex:1; padding:8px; border-radius:4px; border:1px solid #4da6ff; background:#0044cc; color:white; font-size:0.75rem;">R Conocida / ACSR</button>
                    <button id="btn_mode_physic" onclick="AppRes.setMode('physic')" class="btn-mode" style="flex:1; padding:8px; border-radius:4px; border:1px solid #333; background:#222; color:#aaa; font-size:0.75rem;">Físico (&rho;, A)</button>
                </div>
            </div>

            <div style="background: #1e1e1e; border-radius: 8px; padding: 15px; margin-bottom: 15px; border: 1px solid #333;">

                <div id="ui_res_known">
                    <div style="color: #ffcc00; font-size: 0.75rem; text-transform: uppercase; margin-bottom: 8px; font-weight:bold; border-bottom:1px solid #444; padding-bottom:5px; display:flex; justify-content:space-between; align-items:center;">
                        <span>1. Datos Iniciales</span>
                        <select id="sel_import_acsr" onchange="AppRes.loadACSR()" style="background:#333; color:#fff; border:1px solid #555; padding:2px 5px; border-radius:4px; font-size:0.65rem; max-width: 120px;">
                            <option value="-1">📂 Cargar ACSR...</option>
                        </select>
                    </div>

                    <div class="input-unit-group" style="margin-bottom:10px;">
                        <span style="padding:10px; color:#ccc; font-size:0.9rem;">R<sub>dc dato</sub> =</span>
                        <input type="number" id="inp_known_r" value="0.018" step="0.0001" oninput="AppRes.calc()" style="flex:1;">
                        <div class="unit-divider"></div>
                        <select id="unit_known_r" onchange="AppRes.calc()" style="background:transparent; color:#ffcc00; border:none; width:95px; text-align:center; font-weight:bold; font-size:0.8rem;">
                            <option value="1000ft">Ω/1000ft</option>
                            <option value="mi">Ω/milla</option>
                            <option value="km">Ω/km</option>
                        </select>
                    </div>

                    <div style="display:flex; gap:10px; align-items:center;">
                        <div style="flex:1;">
                            <label style="color: #ccc; font-size: 0.7rem;">Temp. Dato (t<sub>1</sub>):</label>
                            <div style="display:flex; align-items:center;">
                                <input type="number" id="inp_known_t" value="50" oninput="AppRes.calc()" style="width:100%; background:#000; color:#fff; border:1px solid #555; padding:8px; border-radius:4px; text-align:center;">
                                <span style="margin-left:5px; color:#aaa;">°C</span>
                            </div>
                        </div>

                        <div style="flex:1; display:flex; flex-direction:column;">
                            <div style="display:flex; justify-content:space-between; margin-bottom:2px;">
                                <label style="color: #ccc; font-size: 0.7rem;">Constante (T):</label>
                                <select id="sel_preset_mat_known" onchange="AppRes.loadMaterial('known')" style="background:transparent; color:#4da6ff; border:none; font-size:0.65rem; text-align:right; cursor:pointer;">
                                    <option value="-1">⚙️ Tabla...</option>
                                    <option value="al_61">Aluminio</option>
                                    <option value="cu_100">Cu 100%</option>
                                    <option value="cu_97">Cu 97%</option>
                                </select>
                            </div>
                            <input type="number" id="inp_mat_T_known" value="241.5" oninput="AppRes.calc()" style="width:100%; background:#000; color:#aaa; border:1px solid #555; padding:8px; border-radius:4px; text-align:center;">
                        </div>
                    </div>
                </div>

                <div id="ui_res_physic" style="display:none;">
                    <div style="color: #ffcc00; font-size: 0.75rem; text-transform: uppercase; margin-bottom: 8px; font-weight:bold; border-bottom:1px solid #444; padding-bottom:5px; display:flex; justify-content:space-between; align-items:center;">
                        <span>1. Propiedades Físicas</span>
                        <select id="sel_preset_mat_phy" onchange="AppRes.loadMaterial('physic')" style="background:#333; color:#fff; border:1px solid #555; padding:2px 5px; border-radius:4px; font-size:0.65rem; max-width: 120px;">
                            <option value="-1">⚙️ Material...</option>
                            <option value="cu_100">Cobre (100%)</option>
                            <option value="cu_97">Cobre (97.3%)</option>
                            <option value="al_61">Aluminio (61%)</option>
                        </select>
                    </div>

                    <div style="margin-bottom:10px;">
                        <label style="color: #ccc; font-size: 0.7rem;">Área y Resistividad:</label>
                        <div style="display: grid; grid-template-columns: 1fr 1fr 75px; gap: 8px;">
                            <div>
                                <input type="number" id="inp_phy_rho" value="17.00" placeholder="rho" oninput="AppRes.calc()" style="width:100%; background:#000; border:1px solid #555; color:#fff; padding:8px; border-radius:4px; text-align:center;">
                                <div style="font-size:0.6rem; color:#666; text-align:center; margin-top:2px;">&rho; (ohms)</div>
                            </div>
                            <div>
                                <input type="number" id="inp_phy_area" value="1113" placeholder="Area" oninput="AppRes.calc()" style="width:100%; background:#000; border:1px solid #555; color:#fff; padding:8px; border-radius:4px; text-align:center;">
                                <div style="font-size:0.6rem; color:#666; text-align:center; margin-top:2px;">Área</div>
                            </div>
                            <select id="unit_phy_area" onchange="AppRes.calc()" style="background:#222; color:#fff; border:1px solid #555; border-radius:4px; height: 34px;">
                                <option value="kcmil">kcmil</option>
                                <option value="mm2">mm²</option>
                            </select>
                        </div>
                    </div>

                    <div style="margin-top:10px; display:flex; gap:10px; align-items:center;">
                        <label style="color: #ccc; font-size: 0.7rem;">Constante Masa (T):</label>
                        <input type="number" id="inp_mat_T_phy" value="228" oninput="AppRes.calc()" style="flex:1; background:#000; color:#aaa; border:1px solid #555; padding:6px; border-radius:4px;">
                    </div>
                </div>
            </div>

            <div style="background: #1e1e1e; border-radius: 8px; padding: 15px; margin-bottom: 15px; border: 1px solid #333;">
                <div style="color: #4da6ff; font-size: 0.75rem; text-transform: uppercase; margin-bottom: 10px; font-weight:bold; border-bottom:1px solid #444; padding-bottom:5px;">
                    2. Factores de Variación
                </div>

                <div style="margin-bottom: 15px;">
                    <div style="display:flex; justify-content:space-between; margin-bottom:5px; align-items:center;">
                        <label style="color: #fff; font-size: 0.8rem;">Temp. Final (t<sub>2</sub>):</label>

                        <div style="display:flex; align-items:center; border-bottom: 1px dashed #4da6ff;">

                            <input type="number" id="val_temp_manual" value="60" step="1"
                                   oninput="AppRes.syncTempFromInput(this.value)"
                                   style="background: transparent; border: none; color: #4da6ff; font-weight: bold; font-size: 1.1rem; text-align: right; width: 60px; outline: none; padding: 0;">

                            <input type="hidden" id="unit_temp_op" value="C">

                            <div class="plt-select-wrapper mini-dropdown" id="ui_unit_temp" style="margin-left: 5px;">
                                <div class="plt-select-trigger" style="padding: 0 4px; border:none;">
                                    <span id="txt_unit_temp" style="color: #4da6ff; font-weight:bold; font-size:1.1rem;">°C</span>
                                    <div class="plt-arrow" style="border-color: #4da6ff; border-width: 0 1px 1px 0; padding: 2px;"></div>
                                </div>
                                <div class="plt-options" style="width: 60px; left: auto; right: 0;">
                                    <div class="plt-option selected" data-value="C" style="color:#4da6ff; font-weight:bold;" onclick="AppRes.switchTempUnit('C')">°C</div>
                                    <div class="plt-option" data-value="F" style="color:#4da6ff; font-weight:bold;" onclick="AppRes.switchTempUnit('F')">°F</div>
                                </div>
                            </div>

                        </div>
                    </div>

                    <input type="range" id="inp_temp_op" min="0" max="150" step="1" value="60"
                           oninput="AppRes.updateTemp(this.value)"
                           style="width: 100%; accent-color: #4da6ff;">
                </div>

                <div style="display:grid; grid-template-columns: 1fr 1fr; gap:10px;">
                    <div>
                        <label style="color: #ccc; font-size: 0.65rem; display:block;">Espiralado %</label>
                        <input type="number" id="inp_pct_spiral" value="3" oninput="AppRes.calc()" style="width:100%; background:#000; color:#ffcc00; border:1px solid #555; padding:8px; border-radius:4px; text-align:center;">
                    </div>
                    <div>
                        <label style="color: #ccc; font-size: 0.65rem; display:block;">Efecto Piel %</label>
                        <input type="number" id="inp_pct_skin" value="4" oninput="AppRes.calc()" style="width:100%; background:#000; color:#ff5555; border:1px solid #555; padding:8px; border-radius:4px; text-align:center;">
                    </div>
                </div>
            </div>

            <div id="res-results">

                <div style="display:flex; justify-content:space-between; align-items:flex-end; margin-bottom:5px;">
                    <label style="color: #aaa; font-size: 0.7rem;">RESULTADO FINAL:</label>
                    <select id="sel_unit_out" onchange="AppRes.calc()" style="background:#000; color:#aaa; border:1px solid #444; padding:2px 5px; border-radius:4px; font-size:0.7rem;">
                        <option value="same">Misma unidad</option>
                        <option value="1000ft">Ω / 1000 ft</option>
                        <option value="mi">Ω / milla</option>
                        <option value="km">Ω / km</option>
                    </select>
                </div>

                <div id="res_summary_card" onclick="AppRes.toggleDetails()"
                     style="background: #151515; border: 1px solid #ff3333; border-left: 5px solid #ff3333; padding: 15px; border-radius: 8px; cursor: pointer; margin-bottom: 10px; box-shadow: 0 4px 15px rgba(255, 51, 51, 0.15); transition: transform 0.1s;"
                     onmousedown="this.style.transform='scale(0.98)'"
                     onmouseup="this.style.transform='scale(1)'"
                     ontouchstart="this.style.transform='scale(0.98)'"
                     ontouchend="this.style.transform='scale(1)'">

                    <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:5px;">
                        <span style="color:#ff3333; font-size:0.75rem; font-weight:bold; letter-spacing:1px;">R<sub>AC</sub> FINAL (@ t<sub>2</sub>)</span>
                        <span id="icon_toggle_res" style="color:#ff3333; font-size:0.8rem; transition: transform 0.3s;">▼</span>
                    </div>

                    <div style="display:flex; justify-content:space-between; align-items:baseline;">
                        <div id="val_res_final" style="color: #fff; font-size: 2.2rem; font-weight: bold; font-family: monospace; letter-spacing: -1px;">---</div>
                        <div id="lbl_res_unit" style="color: #888; font-size: 0.9rem; font-weight:bold;">---</div>
                    </div>

                    <div style="margin-top:5px; border-top:1px dashed #333; padding-top:5px; display:flex; justify-content:space-between;">
                        <span style="color:#666; font-size:0.65rem;">Toque para ver desglose</span>
                        <span id="val_res_increase" style="color:#aaa; font-size:0.7rem; font-weight:bold;">+0.00% Total</span>
                    </div>
                </div>

                <div id="res_math_steps" style="display:none; flex-direction:column; gap:10px; padding-top:5px; animation: fadeIn 0.3s ease;">
                </div>

            </div>

        </div>
    </div>

    <div id="sect-rmg" class="app-section">
        <div class="rmg-container">
            <div id="screen-editor">
                <div class="rmg-header" id="rmg-mode-title">Modo Rectangular</div>

                <div class="canvas-area">
                    <canvas id="rmgCanvas"></canvas>
                </div>

                <div class="rmg-footer">
                    <button class="btn-action" onclick="AppRMG.toggleMode()">Modo</button>
                    <button class="btn-action" style="color:yellow;" onclick="AppRMG.reset()">Resetear</button>
                    <button class="btn-action" style="color:#0f0;" onclick="AppRMG.calc()">Ok</button>
                </div>
            </div>

            <div id="screen-result">
                <div class="res-row">
                    <span style="color:#ccc;">RMG (Ds):</span>
                </div>
                <div class="res-row" style="justify-content: flex-end;">
                    <span class="res-val" id="val_ds">--</span>
                </div>
                <hr style="border-color:#444; margin:10px 0;">
                <div class="res-row">
                    <span style="color:white;">Hilos:</span>
                    <span id="val_hilos" style="font-weight:bold;">0</span>
                </div>

                <div class="mini-result-container">
                    <canvas id="miniCanvas"></canvas>
                </div>

                <button class="btn-action" style="width:100%; border-radius:8px; border:1px solid #555;" onclick="AppRMG.back()">Volver</button>
            </div>
        </div>
    </div>

    <div id="sect-dmg" class="app-section" style="padding: 0 !important; overflow: hidden !important;">

        <div class="calc-card" style="width: 100%; height: 100%; display: flex; flex-direction: column; background: #000;">

            <div class="dmg-split-container" style="display: flex; flex-direction: row; width: 100%; height: 300px; flex-shrink: 0; border-bottom: 2px solid #444; background: #1a1a1a;">

                <div class="graph-wrapper" style="flex: 1; position: relative; background: #ffffff; overflow: hidden; border-right: 1px solid #333;">
                    <canvas id="dmgCanvas" style="width: 100%; height: 100%; display: block; touch-action: none; cursor: crosshair;"></canvas>

                    <button onclick="AppDMG.toggleLabels()" style="position: absolute; bottom: 8px; left: 8px; background: rgba(0,0,0,0.7); color: white; border: 1px solid #555; padding: 4px 8px; border-radius: 4px; font-weight:bold; font-size: 0.7rem;">ABC / RST</button>
                    <button onclick="AppDMG.fitView()" style="position: absolute; bottom: 8px; right: 8px; background: rgba(0,0,0,0.7); color: white; border: 1px solid #555; padding: 4px 10px; border-radius: 4px; font-size: 0.9rem;">⛶</button>
                </div>

                <div class="dmg-side-table" style="width: 100px; display: flex; flex-direction: column; background: #121212; border-left: 1px solid #000;">
                    <div style="background: #252525; color: #aaa; font-size: 0.7rem; text-align: center; padding: 6px; font-weight: bold; border-bottom: 1px solid #333;">Coordenadas</div>

                    <div style="overflow-y: auto; flex: 1;">
                        <table id="coordsTable" style="width: 100%; border-collapse: collapse;">
                            <thead style="position: sticky; top: 0; background: #1a1a1a; z-index: 2;">
                            <tr>
                                <th style="color:#aaa; border-bottom:1px solid #444; padding:4px; font-size:0.75rem;">Fase</th>
                                <th style="color:#aaa; border-bottom:1px solid #444; padding:4px; font-size:0.75rem;">X</th>
                                <th style="color:#aaa; border-bottom:1px solid #444; padding:4px; font-size:0.75rem;">Y</th>
                            </tr>
                            </thead>
                            <tbody id="coordsBody"></tbody>
                        </table>
                    </div>
                </div>

            </div>

            <div class="dmg-controls-area" style="flex: 1; overflow-y: auto; -webkit-overflow-scrolling: touch; padding: 15px; padding-bottom: 160px; display: flex; flex-direction: column; gap: 15px; background: #000;">

                <div class="dmg-results-compact" style="background: #1a1a1a; padding: 10px; border-radius: 6px; border-left: 4px solid #ffcc00; display: flex; justify-content: space-between; align-items: center; min-height: 50px;">
                    <div>
                        <div style="color: #888; font-size: 0.7rem; text-transform: none; margin-bottom:2px;">DMG Equivalente</div>
                        <div id="res_equiv" style="color: #ffcc00; font-size: 1.3rem; font-weight: bold; font-family: monospace;">---</div>
                    </div>
                    <div style="text-align: right;">
                        <div style="color: #888; font-size: 0.7rem; margin-bottom:2px;">DMG Geométrico</div>
                        <div id="res_geom" style="color: #fff; font-size: 0.9rem; font-family: monospace;">---</div>
                    </div>
                </div>

                <div style="border-top: 1px dashed #333; padding-top: 4px; margin-top: 2px; text-align: center;">
                    <div style="font-size: 0.65rem; color: #ffcc00; font-style: italic;">
                        * Unidades según coordenadas ingresadas
                    </div>
                </div>

                <div class="dmg-top-bar" style="background: #1e1e1e; padding: 10px; border-radius: 8px; border: 1px solid #333;">
                    <div class="dmg-controls-wrapper" style="display: flex; gap: 5px; justify-content: space-between;">
                        <div class="ctrl-group" style="text-align: center; flex: 1;">
                            <span class="ctrl-label" style="color: #aaa; font-size: 0.65rem; display: block; margin-bottom: 4px;">Nº FASES</span>
                            <div class="ctrl-btn-group" style="display: flex; justify-content: center; align-items: center; background: #000; border-radius: 4px; padding: 4px;">
                                <button class="tiny-btn" onclick="AppDMG.changePhases(-1)" style="width:28px; height:28px;">-</button>
                                <span id="disp_nph" class="ctrl-val" style="width: 20px; font-size:0.9rem; font-weight: bold; text-align:center; color:white;">3</span>
                                <button class="tiny-btn" onclick="AppDMG.changePhases(1)" style="width:28px; height:28px;">+</button>
                            </div>
                        </div>
                        <div class="ctrl-group" style="text-align: center; flex: 1;">
                            <span class="ctrl-label" style="color: #aaa; font-size: 0.65rem; display: block; margin-bottom: 4px;">SELECTOR DE FASE</span>
                            <div class="ctrl-btn-group" style="display: flex; justify-content: center; align-items: center; background: #000; border-radius: 4px; padding: 4px;">

                                <button class="tiny-btn" onclick="AppDMG.changeSelPhase(-1)" style="width:28px; height:28px; font-size: 0.7rem; padding: 0;">&#9664;</button>

                                <span id="disp_sel" class="ctrl-val" style="width: 20px; font-size:0.9rem; font-weight: bold; color: #00aa55; text-align:center;">A</span>

                                <button class="tiny-btn" onclick="AppDMG.changeSelPhase(1)" style="width:28px; height:28px; font-size: 0.7rem; padding: 0;">&#9654;</button>

                            </div>
                        </div>
                        <div class="ctrl-group" style="text-align: center; flex: 1;">
                            <span class="ctrl-label" style="color: #aaa; font-size: 0.65rem; display: block; margin-bottom: 4px;">Nº CONDUCTORES</span>
                            <div class="ctrl-btn-group" style="display: flex; justify-content: center; align-items: center; background: #000; border-radius: 4px; padding: 4px;">
                                <button class="tiny-btn" onclick="AppDMG.changeSubCond(-1)" style="width:28px; height:28px;">-</button>
                                <span id="disp_nsub" class="ctrl-val" style="width: 20px; font-size:0.9rem; font-weight: bold; text-align:center; color:white;">1</span>
                                <button class="tiny-btn" onclick="AppDMG.changeSubCond(1)" style="width:28px; height:28px;">+</button>
                            </div>
                        </div>
                    </div>
                </div>

                <button id="btn_dmg_main" onclick="AppDMG.handleMainAction()"
                        style="
                        background: #333;
                        color: #ccc;
                        border: 1px dashed #555;
                        padding: 25px 0;
                        border-radius: 6px;
                        width: 100%;
                        font-family: monospace;
                        font-size: 1.1rem;
                        font-weight: bold;
                        cursor: pointer;
                        margin-top: 0;
                        margin-bottom: 10px;
                        transition: all 0.2s ease;"
                        onmouseover="if(!window.FlowState || !window.FlowState.isEditMode) this.style.background='#444'"
                        onmouseout="if(!window.FlowState || !window.FlowState.isEditMode) this.style.background='#333'">
                    ▼ Cálculos
                </button>

                <div id="dmg-report-container" class="terminal-report collapsed" style="display: none; margin-top: 15px; border-top: 1px solid #444; padding-top: 15px;">
                </div>

            </div>
        </div>
    </div>

    <div id="sect-info" class="app-section">
        <div class="rmg-container" style="background: transparent; padding: 8px; padding-bottom: 120px; overflow-y: auto; -webkit-overflow-scrolling: touch; display: flex; flex-direction: column; min-height: 100%;">

            <div style="background: #1e1e1e; border-radius: 12px; border: 1px solid #333; margin-bottom: 25px; box-shadow: 0 4px 15px rgba(0,0,0,0.5); overflow: visible;">

                <div style="background: #252525; padding: 10px 15px; border-bottom: 1px solid #333; display:flex; justify-content:space-between; align-items:center; border-radius: 12px 12px 0 0;">
                    <span style="color: #aaa; font-size: 0.7rem; font-weight:bold; letter-spacing:1px;">CONVERSOR DE UNIDADES</span>
                    <span style="font-size: 0.9rem;">📏</span>
                </div>

                <div style="display: flex; position: relative;">

                    <div style="width: 50%; padding: 15px 10px; border-top: 3px solid #00e5ff; border-right: 1px solid #333; display: flex; flex-direction: column; gap: 10px;">
                        <div style="text-align: center; color: #00e5ff; font-size: 0.65rem; font-weight: bold; letter-spacing: 1px;">LONGITUD</div>

                        <div class="input-unit-group" style="border-color: #444; padding: 0;">
                            <input type="number" id="inp_conv_len" value="1" oninput="AppInfo.calcLen()" placeholder="0" style="padding: 8px; font-size: 1rem; text-align: center;">
                            <input type="hidden" id="val_unit_len_from" value="mi">

                            <div class="plt-select-wrapper mini-dropdown" id="ui_len_from" style="width: 50px; border-left: 1px solid #444;">
                                <div class="plt-select-trigger" style="padding: 0; justify-content: center;">
                                    <span style="color: #00e5ff; font-size: 0.8rem;">mi</span>
                                    <span style="font-size: 0.6rem; color: #aaa; margin-left: 3px;">▾</span>
                                </div>
                                <div class="plt-options" style="width: 70px; max-height: 200px; overflow-y: auto;">
                                    <div class="plt-option selected" data-value="mi" onclick="setupSelect('ui_len_from', 'val_unit_len_from', this); AppInfo.calcLen()">mi</div>
                                    <div class="plt-option" data-value="mils" onclick="setupSelect('ui_len_from', 'val_unit_len_from', this); AppInfo.calcLen()">mils</div>
                                    <div class="plt-option" data-value="km" onclick="setupSelect('ui_len_from', 'val_unit_len_from', this); AppInfo.calcLen()">km</div>
                                    <div class="plt-option" data-value="m" onclick="setupSelect('ui_len_from', 'val_unit_len_from', this); AppInfo.calcLen()">m</div>
                                    <div class="plt-option" data-value="ft" onclick="setupSelect('ui_len_from', 'val_unit_len_from', this); AppInfo.calcLen()">ft</div>
                                    <div class="plt-option" data-value="in" onclick="setupSelect('ui_len_from', 'val_unit_len_from', this); AppInfo.calcLen()">in</div>
                                    <div class="plt-option" data-value="cm" onclick="setupSelect('ui_len_from', 'val_unit_len_from', this); AppInfo.calcLen()">cm</div>
                                    <div class="plt-option" data-value="mm" onclick="setupSelect('ui_len_from', 'val_unit_len_from', this); AppInfo.calcLen()">mm</div>
                                </div>
                            </div>
                        </div>

                        <div style="text-align: center; color: #444; font-size: 0.7rem; line-height: 0.5;">▼</div>

                        <div class="input-unit-group" style="background: #111; border-color: #333; padding: 0;">
                            <div id="res_conv_len" style="flex: 1; padding: 8px; font-weight: bold; color: #00e5ff; font-family: monospace; font-size: 1rem; overflow:hidden; text-align: center;">---</div>
                            <input type="hidden" id="val_unit_len_to" value="km">

                            <div class="plt-select-wrapper mini-dropdown" id="ui_len_to" style="width: 50px; border-left: 1px solid #333;">
                                <div class="plt-select-trigger" style="padding: 0; justify-content: center;">
                                    <span style="color: #888; font-size: 0.8rem;">km</span>
                                    <span style="font-size: 0.6rem; color: #aaa; margin-left: 3px;">▾</span>
                                </div>
                                <div class="plt-options" style="width: 70px; max-height: 200px; overflow-y: auto;">
                                    <div class="plt-option selected" data-value="km" onclick="setupSelect('ui_len_to', 'val_unit_len_to', this); AppInfo.calcLen()">km</div>
                                    <div class="plt-option" data-value="mi" onclick="setupSelect('ui_len_to', 'val_unit_len_to', this); AppInfo.calcLen()">mi</div>
                                    <div class="plt-option" data-value="mils" onclick="setupSelect('ui_len_to', 'val_unit_len_to', this); AppInfo.calcLen()">mils</div>
                                    <div class="plt-option" data-value="m" onclick="setupSelect('ui_len_to', 'val_unit_len_to', this); AppInfo.calcLen()">m</div>
                                    <div class="plt-option" data-value="ft" onclick="setupSelect('ui_len_to', 'val_unit_len_to', this); AppInfo.calcLen()">ft</div>
                                    <div class="plt-option" data-value="in" onclick="setupSelect('ui_len_to', 'val_unit_len_to', this); AppInfo.calcLen()">in</div>
                                    <div class="plt-option" data-value="cm" onclick="setupSelect('ui_len_to', 'val_unit_len_to', this); AppInfo.calcLen()">cm</div>
                                    <div class="plt-option" data-value="mm" onclick="setupSelect('ui_len_to', 'val_unit_len_to', this); AppInfo.calcLen()">mm</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div style="width: 50%; padding: 15px 10px; border-top: 3px solid #d500f9; display: flex; flex-direction: column; gap: 10px;">
                        <div style="text-align: center; color: #d500f9; font-size: 0.65rem; font-weight: bold; letter-spacing: 1px;">ÁREA</div>

                        <div class="input-unit-group" style="border-color: #444; padding: 0;">
                            <input type="number" id="inp_conv_area" value="1" oninput="AppInfo.calcArea()" placeholder="0" style="padding: 8px; font-size: 1rem; text-align: center;">
                            <input type="hidden" id="val_unit_area_from" value="kcmil">

                            <div class="plt-select-wrapper mini-dropdown" id="ui_area_from" style="width: 50px; border-left: 1px solid #444;">
                                <div class="plt-select-trigger" style="padding: 0; justify-content: center;">
                                    <span style="color: #d500f9; font-size: 0.8rem;">kcmil</span>
                                    <span style="font-size: 0.6rem; color: #aaa; margin-left: 3px;">▾</span>
                                </div>
                                <div class="plt-options" style="width: 70px; right:0; left:auto; max-height: 200px; overflow-y: auto;">
                                    <div class="plt-option selected" data-value="kcmil" style="color:#ff9; font-weight:bold;" onclick="setupSelect('ui_area_from', 'val_unit_area_from', this); AppInfo.calcArea()">kcmil</div>
                                    <div class="plt-option" data-value="cmil" style="color:#ff9; font-weight:bold;" onclick="setupSelect('ui_area_from', 'val_unit_area_from', this); AppInfo.calcArea()">cmil</div>
                                    <div class="plt-option" data-value="mm2" onclick="setupSelect('ui_area_from', 'val_unit_area_from', this); AppInfo.calcArea()">mm²</div>
                                    <div class="plt-option" data-value="m2" onclick="setupSelect('ui_area_from', 'val_unit_area_from', this); AppInfo.calcArea()">m²</div>
                                    <div class="plt-option" data-value="in2" onclick="setupSelect('ui_area_from', 'val_unit_area_from', this); AppInfo.calcArea()">in²</div>
                                    <div class="plt-option" data-value="ft2" onclick="setupSelect('ui_area_from', 'val_unit_area_from', this); AppInfo.calcArea()">ft²</div>
                                    <div class="plt-option" data-value="km2" onclick="setupSelect('ui_area_from', 'val_unit_area_from', this); AppInfo.calcArea()">km²</div>
                                    <div class="plt-option" data-value="cm2" onclick="setupSelect('ui_area_from', 'val_unit_area_from', this); AppInfo.calcArea()">cm²</div>
                                    <div class="plt-option" data-value="ha" onclick="setupSelect('ui_area_from', 'val_unit_area_from', this); AppInfo.calcArea()">ha</div>
                                </div>
                            </div>
                        </div>

                        <div style="text-align: center; color: #444; font-size: 0.7rem; line-height: 0.5;">▼</div>

                        <div class="input-unit-group" style="background: #111; border-color: #333; padding: 0;">
                            <div id="res_conv_area" style="flex: 1; padding: 8px; font-weight: bold; color: #d500f9; font-family: monospace; font-size: 1rem; overflow:hidden; text-align: center;">---</div>
                            <input type="hidden" id="val_unit_area_to" value="mm2">

                            <div class="plt-select-wrapper mini-dropdown" id="ui_area_to" style="width: 50px; border-left: 1px solid #333;">
                                <div class="plt-select-trigger" style="padding: 0; justify-content: center;">
                                    <span style="color: #888; font-size: 0.8rem;">mm²</span>
                                    <span style="font-size: 0.6rem; color: #aaa; margin-left: 3px;">▾</span>
                                </div>
                                <div class="plt-options" style="width: 70px; right:0; left:auto; max-height: 200px; overflow-y: auto;">
                                    <div class="plt-option selected" data-value="mm2" onclick="setupSelect('ui_area_to', 'val_unit_area_to', this); AppInfo.calcArea()">mm²</div>
                                    <div class="plt-option" data-value="kcmil" style="color:#ff9; font-weight:bold;" onclick="setupSelect('ui_area_to', 'val_unit_area_to', this); AppInfo.calcArea()">kcmil</div>
                                    <div class="plt-option" data-value="cmil" style="color:#ff9; font-weight:bold;" onclick="setupSelect('ui_area_to', 'val_unit_area_to', this); AppInfo.calcArea()">cmil</div>
                                    <div class="plt-option" data-value="m2" onclick="setupSelect('ui_area_to', 'val_unit_area_to', this); AppInfo.calcArea()">m²</div>
                                    <div class="plt-option" data-value="in2" onclick="setupSelect('ui_area_to', 'val_unit_area_to', this); AppInfo.calcArea()">in²</div>
                                    <div class="plt-option" data-value="ft2" onclick="setupSelect('ui_area_to', 'val_unit_area_to', this); AppInfo.calcArea()">ft²</div>
                                    <div class="plt-option" data-value="km2" onclick="setupSelect('ui_area_to', 'val_unit_area_to', this); AppInfo.calcArea()">km²</div>
                                    <div class="plt-option" data-value="cm2" onclick="setupSelect('ui_area_to', 'val_unit_area_to', this); AppInfo.calcArea()">cm²</div>
                                    <div class="plt-option" data-value="ha" onclick="setupSelect('ui_area_to', 'val_unit_area_to', this); AppInfo.calcArea()">ha</div>
                                </div>
                            </div>
                        </div>

                        <div class="tech-note" style="margin-top: 10px; padding-top: 8px;">
                            cmil = (Ø<sub>mils</sub>)²
                        </div>

                    </div>

                </div>
            </div>

            <button onclick="window.open('https://tu-link-aqui.com', '_system')"
                    style="width:100%; background: #222; color: #fff; border: 1px solid #444; padding: 20px; border-radius: 12px; font-weight:bold; font-size:0.95rem; display:flex; align-items:center; justify-content:center; gap:12px; cursor:pointer; margin-bottom: 15px; box-shadow: 0 4px 10px rgba(0,0,0,0.4); transition: transform 0.1s;"
                    onmousedown="this.style.transform='scale(0.98)'"
                    onmouseup="this.style.transform='scale(1)'"
                    ontouchstart="this.style.transform='scale(0.98)'"
                    ontouchend="this.style.transform='scale(1)'">

                <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <rect x="4" y="2" width="16" height="20" rx="2"></rect>
                    <line x1="8" y1="6" x2="16" y2="6"></line>
                    <line x1="16" y1="14" x2="16" y2="18"></line>
                    <path d="M16 10h.01"></path>
                    <path d="M12 10h.01"></path>
                    <path d="M8 10h.01"></path>
                    <path d="M12 14h.01"></path>
                    <path d="M8 14h.01"></path>
                    <path d="M12 18h.01"></path>
                    <path d="M8 18h.01"></path>
                </svg>

                PORT HP PRIME G2
            </button>

            <button onclick="printReport()"
                    style="width:100%; background:linear-gradient(135deg, #0044cc, #003399); color:white; border:none; padding:20px; border-radius:12px; font-weight:bold; font-size:1rem; display:flex; align-items:center; justify-content:center; gap:12px; cursor:pointer; box-shadow:0 6px 20px rgba(0,68,204,0.5); margin-bottom:30px; transition: transform 0.1s;"
                    onmousedown="this.style.transform='scale(0.98)'" onmouseup="this.style.transform='scale(1)'">
                <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                    <line x1="16" y1="13" x2="8" y2="13"></line>
                    <line x1="16" y1="17" x2="8" y2="17"></line>
                    <polyline points="10 9 9 9 8 9"></polyline>
                </svg>
                GENERAR INFORME PDF
            </button>

            <div style="position: relative; margin-top: auto; padding: 15px 5px; border-top: 1px solid #222; width: 100%; display: flex; justify-content: flex-end; align-items: flex-end;">
                <div style="text-align: right;">
                    <div id="egg-trigger" style="font-family: sans-serif; font-weight: 900; font-size: 0.85rem; color: #ddd; cursor: pointer; user-select: none; -webkit-user-select: none;">
                        CMAG <span style="color: #0044cc;">eApp</span>
                    </div>
                </div>
            </div>

        </div> <div id="easter-egg-overlay" onclick="EasterEgg.hide()" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 9999; flex-direction: column; align-items: center; justify-content: center;">

        <img src="img/cmageapp.jpg" class="glitch-effect" style="max-width: 80%; border: 2px solid #0f0; box-shadow: 0 0 20px #0f0; border-radius: 8px;">

        <div style="color: #0f0; font-family: monospace; margin-top: 20px; font-size: 1.2rem; font-weight: bold; text-shadow: 0 0 5px #0f0;">
            CMAG engineering Applications...
        </div>
    </div>

    </div>
</div>

<button onclick="printReport()"
        style="width:100%; background:linear-gradient(135deg, #0044cc, #003399); color:white; border:none; padding:18px; border-radius:10px; font-weight:bold; font-size:0.9rem; display:flex; align-items:center; justify-content:center; gap:12px; cursor:pointer; box-shadow:0 4px 15px rgba(0,68,204,0.4); margin-bottom:20px; transition: transform 0.1s;"
        onmousedown="this.style.transform='scale(0.98)'" onmouseup="this.style.transform='scale(1)'">
    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
        <line x1="16" y1="13" x2="8" y2="13"></line>
        <line x1="16" y1="17" x2="8" y2="17"></line>
        <polyline points="10 9 9 9 8 9"></polyline>
    </svg>
    GENERAR INFORME PDF
</button>

<div style="position: relative; margin-top: 40px; padding-top: 15px; border-top: 1px solid #222; width: 100%; display: flex; justify-content: space-between; align-items: flex-end;">

    <div style="text-align: left;">
        <div style="color:#666; font-size:0.65rem; font-weight: bold; margin-bottom: 2px;">FIUNA - 2026</div>
        <div style="color:#444; font-size:0.6rem;">Ingeniería Electromecánica</div>
    </div>

    <div style="text-align: right;">
        <div style="font-family: sans-serif; font-weight: 900; font-size: 0.8rem; color: #ccc;">CMAG <span style="color: #0044cc;">eApp</span></div>
    </div>

</div>

</div>
</div>

</div>

<nav>
    <button class="nav-btn active" onclick="NavController.handleClick('sect-lc')">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M7 2 v1 c -4 0 -4 5 0 5 c -4 0 -4 5 0 5 c -4 0 -4 5 0 5 v1"/>
            <line x1="18" y1="3" x2="18" y2="8" />
            <line x1="15" y1="8" x2="21" y2="8" />
            <line x1="15" y1="14" x2="21" y2="14" />
            <line x1="18" y1="14" x2="18" y2="21" />
        </svg>
        L&nbsp;-&nbsp;C
    </button>

    <button class="nav-btn" onclick="NavController.handleClick('sect-res')">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M2 12h2l2-5 4 10 4-10 4 10 2-5h2"/>
        </svg>
        Resistencia
    </button>

    <button class="nav-btn" onclick="NavController.handleClick('sect-rmg')">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
            <g transform="rotate(30, 12, 12)">
                <circle cx="12" cy="12" r="9" />
                <circle cx="12" cy="12" r="2.5" />
                <circle cx="12" cy="6.8" r="2.5" />
                <circle cx="12" cy="17.2" r="2.5" />
                <circle cx="16.5" cy="9.4" r="2.5" />
                <circle cx="16.5" cy="14.6" r="2.5" />
                <circle cx="7.5" cy="9.4" r="2.5" />
                <circle cx="7.5" cy="14.6" r="2.5" />
            </g>
        </svg>
        RMG
    </button>

    <button class="nav-btn" onclick="NavController.handleClick('sect-dmg')">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="5" cy="8" r="2" />
            <circle cx="12" cy="8" r="2" />
            <circle cx="19" cy="8" r="2" />
            <path d="M5 16 H19" />  <path d="M5 13 V19" />  <path d="M19 13 V19" /> <path d="M8 16 L5 16 L8 14" fill="none" /> <path d="M8 16 L5 16 L8 18" fill="none" /> <path d="M16 16 L19 16 L16 14" fill="none" /> <path d="M16 16 L19 16 L16 18" fill="none" />
        </svg>
        DMG
    </button>

    <button class="nav-btn" onclick="NavController.handleClick('sect-info')">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="10" />
            <line x1="12" y1="16" x2="12" y2="12" />
            <line x1="12" y1="8" x2="12.01" y2="8" />
        </svg>
        Info
    </button>
</nav>

<script src="libs/html2pdf.bundle.min.js"></script>
<script src="app.js?v=2026"></script>

<!-- Modal opciones + preview PDF -->
<div id="pdf-modal" class="pdf-modal-overlay">
    <div class="pdf-modal-header">
        <div style="color:#fff; font-weight:bold;">Vista Previa PDF</div>
        <button onclick="PDFSystem.close()" style="background:none; border:none; color:#ff4444; font-size:1.5rem; cursor:pointer;">&times;</button>
    </div>

    <div class="pdf-preview-area">
        <div id="pdf-content-clone" class="grayscale-mode"></div>
    </div>

    <div class="pdf-modal-footer">

        <button id="btn-pdf-color" class="toggle-color-btn" onclick="PDFSystem.toggleColor()">
            <span class="icon">◐</span>
            <span class="btn-label">COLOR</span>
        </button>

        <button onclick="PDFSystem.download()" style="flex:1; background: #0044cc; color: white; border: none; padding: 15px; border-radius: 8px; font-weight: bold; font-size: 1rem; display: flex; align-items: center; justify-content: center; gap: 10px;">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg>
            DESCARGAR PDF
        </button>
    </div>
</div>


</body>
</html>
